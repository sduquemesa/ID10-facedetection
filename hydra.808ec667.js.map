{"version":3,"sources":["node_modules/hydra-synth/src/output.js","node_modules/inherits/inherits_browser.js","node_modules/events/events.js","node_modules/right-now/browser.js","node_modules/process/browser.js","src/performance-now.coffee","node_modules/raf/index.js","node_modules/raf-loop/index.js","node_modules/hydra-synth/src/lib/webcam.js","node_modules/hydra-synth/src/lib/screenmedia.js","node_modules/hydra-synth/src/hydra-source.js","node_modules/hydra-synth/src/lib/mouse-event.js","node_modules/hydra-synth/src/lib/mouse.js","webpack://Meyda/webpack/universalModuleDefinition","webpack://Meyda/webpack/bootstrap","webpack://Meyda/node_modules/assert/assert.js","webpack://Meyda/node_modules/dct/index.js","webpack://Meyda/node_modules/dct/src/dct.js","webpack://Meyda/node_modules/fftjs/dist/fft.js","webpack://Meyda/node_modules/fftjs/dist/utils.js","webpack://Meyda/node_modules/inherits/inherits_browser.js","webpack://Meyda/node_modules/process/browser.js","webpack://Meyda/node_modules/webpack-stream/node_modules/util/support/isBufferBrowser.js","webpack://Meyda/node_modules/webpack-stream/node_modules/util/util.js","webpack://Meyda/(webpack)/buildin/global.js","webpack://Meyda/src/extractors/chroma.js","webpack://Meyda/src/extractors/energy.js","webpack://Meyda/src/extractors/extractorUtilities.js","webpack://Meyda/src/extractors/loudness.js","webpack://Meyda/src/extractors/mfcc.js","webpack://Meyda/src/extractors/perceptualSharpness.js","webpack://Meyda/src/extractors/perceptualSpread.js","webpack://Meyda/src/extractors/powerSpectrum.js","webpack://Meyda/src/extractors/rms.js","webpack://Meyda/src/extractors/spectralCentroid.js","webpack://Meyda/src/extractors/spectralFlatness.js","webpack://Meyda/src/extractors/spectralFlux.js","webpack://Meyda/src/extractors/spectralKurtosis.js","webpack://Meyda/src/extractors/spectralRolloff.js","webpack://Meyda/src/extractors/spectralSkewness.js","webpack://Meyda/src/extractors/spectralSlope.js","webpack://Meyda/src/extractors/spectralSpread.js","webpack://Meyda/src/extractors/zcr.js","webpack://Meyda/src/featureExtractors.js","webpack://Meyda/src/index.js","webpack://Meyda/src/main.js","webpack://Meyda/src/meyda-wa.js","webpack://Meyda/src/utilities.js","webpack://Meyda/src/windowing.js","node_modules/hydra-synth/src/lib/audio.js","node_modules/hydra-synth/src/lib/video-recorder.js","node_modules/hydra-synth/src/lib/easing-functions.js","node_modules/hydra-synth/src/lib/array-utils.js","node_modules/hydra-synth/src/lib/sandbox.js","node_modules/hydra-synth/src/eval-sandbox.js","node_modules/hydra-synth/src/glsl/glsl-functions.js","node_modules/hydra-synth/src/glsl-utils.js","node_modules/hydra-synth/src/glsl/utility-functions.js","node_modules/hydra-synth/src/glsl-source.js","node_modules/hydra-synth/src/generator-factory.js","node_modules/hydra-synth/hydra-synth.js","node_modules/hydra-synth/index.js","src/hydra.js"],"names":["ReflectOwnKeys","R","Reflect","ReflectApply","apply","target","receiver","args","Function","prototype","call","ProcessEmitWarning","warning","console","warn","ownKeys","Object","getOwnPropertySymbols","getOwnPropertyNames","concat","NumberIsNaN","Number","isNaN","value","EventEmitter","init","module","exports","once","_events","undefined","_eventsCount","_maxListeners","defaultMaxListeners","checkListener","listener","TypeError","_getMaxListeners","that","_addListener","type","prepend","m","events","existing","create","newListener","emit","unshift","push","length","warned","w","Error","String","name","emitter","count","onceWrapper","fired","arguments","removeListener","wrapFn","_onceWrap","state","wrapped","bind","_listeners","unwrap","evlistener","unwrapListeners","arrayClone","listenerCount","arr","n","copy","Array","i","spliceOne","list","index","pop","ret","Promise","resolve","reject","errorListener","err","resolver","slice","eventTargetAgnosticAddListener","addErrorHandlerIfEventEmitter","handler","flags","on","addEventListener","wrapListener","arg","removeEventListener","defineProperty","enumerable","get","set","RangeError","getPrototypeOf","setMaxListeners","getMaxListeners","doError","error","er","message","context","len","listeners","addListener","prependListener","prependOnceListener","position","originalListener","shift","off","removeAllListeners","keys","key","rawListeners","eventNames","cachedSetTimeout","cachedClearTimeout","process","defaultSetTimout","defaultClearTimeout","runTimeout","fun","setTimeout","e","runClearTimeout","marker","clearTimeout","currentQueue","queue","draining","queueIndex","cleanUpNextTick","drainQueue","timeout","run","Item","array","noop","nextTick","title","env","argv","version","versions","binding","cwd","chdir","dir","umask","ampSpectrum","chromaFilterBank","chromagram","map","row","reduce","acc","v","j","maxVal","Math","max","signal","energy","pow","abs","mu","amplitudeSpect","numerator","denominator","k","barkScale","NUM_BARK_BANDS","specific","Float32Array","total","normalisedSpectrum","bbLimits","Int32Array","currentBandEnd","currentBand","sum","dct","require","melFilterBank","numberOfMFCCCoefficients","min","powSpec","powerSpectrum","numFilters","filtered","loggedMelBands","bufferSize","log","loggedMelBandsArray","mfccs","loudnessValue","loudness","spec","output","exp","spread","rms","sqrt","previousSignal","sf","x","ampspec","mu1","mu2","mu3","mu4","nyqBin","sampleRate","ec","threshold","ampSum","freqSum","freqs","powFreqSum","ampFreqSum","curFreq","zcr","buffer","complexSpectrum","amplitudeSpectrum","Meyda","audioContext","spn","melBands","chromaBands","callback","windowingFunction","featureExtractors","extractors","EXTRACTION_STARTED","_featuresToExtract","windowing","utilities","_errors","notPow2","featureUndef","invalidFeatureFmt","invalidInput","noAC","noSource","createMeydaAnalyzer","options","MeydaAnalyzer","assign","extract","feature","preparedSignal","prepareSignalWithSpectrum","windowedSignal","previousComplexSpectrum","previousAmpSpectrum","el","fft","real","imag","window","_this","_m","errors","source","hopSize","startImmediately","channel","inputs","outputs","createScriptProcessor","connect","destination","inputData","previousInputData","frame","previousFrame","setSource","onaudioprocess","inputBuffer","getChannelData","forEach","f","features","disconnect","windows","isPowerOfTwo","num","pointwiseBufferMult","a","b","c","applyWindow","windowname","createBarkScale","atan","typedToArray","t","arrayToTyped","from","_normalize","range","normalize","normalizeToOne","mean","prev","cur","_melToFreq","melValue","freqValue","_freqToMel","melToFreq","mV","freqToMel","fV","createMelFilterBank","melValues","melValuesInFreq","upperLimitFreq","lowerLimitMel","valueToAdd","fftBinsOfFreq","floor","filterBank","valueOf","hzToOctaves","freq","A440","log2","normalizeByColumn","emptyRow","colDenominators","cell","createChromaFilterBank","centerOctave","octaveWidth","baseC","numOutputBins","frequencyBins","fill","_","binWidthBins","halfNumFilters","round","filterPeaks","frq","weights","octaveWeights","frameLength","hopLength","numFrames","blackman","size","blackmanBuffer","coeff1","PI","coeff2","cos","sine","coeff","sineBuffer","sin","hanning","hanningBuffer","hamming","hammingBuffer","hydra","Hydra","detectAudio","canvas","document","getElementById","funcList","rotation","openingX","openingY","height1","heigth2","render","o2","s0","initCam","src","o0","blend","modulate","out","voronoi","rotate","o1","diff","colorama","kaleid","shape","noise","modulateScale","o3","repeat","saturate","randomIndex","random","func","hydraLoopId","setInterval","facemesh","predictions","faceWidth","boundingBox","bottomRight","topLeft","faceHeight","annotations","faceRotation","midwayBetweenEyes","noseTip","mouthOpeningY","lipsLowerInner","lipsUpperInner","mouthOpeningX","eyeToEyebrowLeft","leftEyeLower3","leftEyebrowUpper","eyeToEyebrowRight","rightEyeLower3","rightEyebrowUpper"],"mappings":"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ACA,CACA,KAAA,QACA,KAAA,QACA,QAAA,IAEA,CACA,KAAA,QACA,KAAA,SACA,QAAA,KAGA,KACA,oEAEA,CACA,KAAA,UACA,KAAA,MACA,OAAA,CACA,CACA,KAAA,QACA,KAAA,QACA,QAAA,GAEA,CACA,KAAA,QACA,KAAA,QACA,QAAA,IAEA,CACA,KAAA,QACA,KAAA,WACA,QAAA,KAGA,KACA,g0BA2BA,CACA,KAAA,MACA,KAAA,MACA,OAAA,CACA,CACA,KAAA,QACA,KAAA,YACA,QAAA,IAEA,CACA,KAAA,QACA,KAAA,OACA,QAAA,IAEA,CACA,KAAA,QACA,KAAA,SACA,QAAA,IAGA,KACA,mQAMA,CACA,KAAA,QACA,KAAA,MACA,OAAA,CACA,CACA,KAAA,QACA,KAAA,QACA,QAAA,GAEA,CACA,KAAA,QACA,KAAA,SACA,QAAA,IAEA,CACA,KAAA,QACA,KAAA,YACA,QAAA,MAGA,KACA,2RAOA,CACA,KAAA,WACA,KAAA,MACA,OAAA,CACA,CACA,KAAA,QACA,KAAA,QACA,QAAA,IAGA,KACA,8CAEA,CACA,KAAA,MACA,KAAA,MACA,OAAA,CACA,CACA,KAAA,YACA,KAAA,MACA,QAAA,MAGA,KACA,8FAGA,CACA,KAAA,QACA,KAAA,MACA,OAAA,CACA,CACA,KAAA,QACA,KAAA,IACA,QAAA,GAEA,CACA,KAAA,QACA,KAAA,IACA,QAAA,GAEA,CACA,KAAA,QACA,KAAA,IACA,QAAA,GAEA,CACA,KAAA,QACA,KAAA,IACA,QAAA,IAGA,KACA,+BAEA,CACA,KAAA,SACA,KAAA,QACA,OAAA,CACA,CACA,KAAA,QACA,KAAA,QACA,QAAA,IAEA,CACA,KAAA,QACA,KAAA,QACA,QAAA,IAGA,KACA,6JAMA,CACA,KAAA,QACA,KAAA,QACA,OAAA,CACA,CACA,KAAA,QACA,KAAA,SACA,QAAA,KAEA,CACA,KAAA,QACA,KAAA,QACA,QAAA,GAEA,CACA,KAAA,QACA,KAAA,QACA,QAAA,GAEA,CACA,KAAA,QACA,KAAA,UACA,QAAA,IAEA,CACA,KAAA,QACA,KAAA,UACA,QAAA,KAGA,KACA,kJAMA,CACA,KAAA,WACA,KAAA,QACA,OAAA,CACA,CACA,KAAA,QACA,KAAA,SACA,QAAA,IAEA,CACA,KAAA,QACA,KAAA,SACA,QAAA,KAGA,KACA,6EAGA,CACA,KAAA,YACA,KAAA,QACA,OAAA,CACA,CACA,KAAA,QACA,KAAA,OACA,QAAA,GAEA,CACA,KAAA,QACA,KAAA,QACA,QAAA,KAGA,KACA,yKAOA,CACA,KAAA,QACA,KAAA,QACA,OAAA,CACA,CACA,KAAA,QACA,KAAA,IACA,QAAA,IAEA,CACA,KAAA,QACA,KAAA,IACA,QAAA,GAEA,CACA,KAAA,QACA,KAAA,IACA,QAAA,GAEA,CACA,KAAA,QACA,KAAA,IACA,QAAA,IAGA,KACA,qKAOA,CACA,KAAA,SACA,KAAA,QACA,OAAA,CACA,CACA,KAAA,QACA,KAAA,UACA,QAAA,GAEA,CACA,KAAA,QACA,KAAA,UACA,QAAA,GAEA,CACA,KAAA,QACA,KAAA,UACA,QAAA,GAEA,CACA,KAAA,QACA,KAAA,UACA,QAAA,IAGA,KACA,kKAKA,CACA,KAAA,iBACA,KAAA,eACA,OAAA,CACA,CACA,KAAA,QACA,KAAA,UACA,QAAA,GAEA,CACA,KAAA,QACA,KAAA,UACA,QAAA,GAEA,CACA,KAAA,QACA,KAAA,UACA,QAAA,IAEA,CACA,KAAA,QACA,KAAA,UACA,QAAA,KAGA,KACA,kLAKA,CACA,KAAA,UACA,KAAA,QACA,OAAA,CACA,CACA,KAAA,QACA,KAAA,OACA,QAAA,GAEA,CACA,KAAA,QACA,KAAA,SACA,QAAA,IAGA,KACA,6IAKA,CACA,KAAA,kBACA,KAAA,eACA,OAAA,CACA,CACA,KAAA,QACA,KAAA,OACA,QAAA,GAEA,CACA,KAAA,QACA,KAAA,SACA,QAAA,KAGA,KACA,sJAKA,CACA,KAAA,UACA,KAAA,QACA,OAAA,CACA,CACA,KAAA,QACA,KAAA,OACA,QAAA,GAEA,CACA,KAAA,QACA,KAAA,SACA,QAAA,IAGA,KACA,6IAKA,CACA,KAAA,kBACA,KAAA,eACA,OAAA,CACA,CACA,KAAA,QACA,KAAA,OACA,QAAA,GAEA,CACA,KAAA,QACA,KAAA,SACA,QAAA,KAGA,KACA,sJAKA,CACA,KAAA,SACA,KAAA,QACA,OAAA,CACA,CACA,KAAA,QACA,KAAA,SACA,QAAA,IAGA,KACA,kNASA,CACA,KAAA,iBACA,KAAA,eACA,OAAA,CACA,CACA,KAAA,QACA,KAAA,SACA,QAAA,IAGA,KACA,iNAQA,CACA,KAAA,SACA,KAAA,QACA,OAAA,CACA,CACA,KAAA,QACA,KAAA,UACA,QAAA,IAEA,CACA,KAAA,QACA,KAAA,UACA,QAAA,IAEA,CACA,KAAA,QACA,KAAA,SACA,QAAA,GAEA,CACA,KAAA,QACA,KAAA,SACA,QAAA,IAGA,KACA,mGAKA,CACA,KAAA,UACA,KAAA,QACA,OAAA,CACA,CACA,KAAA,QACA,KAAA,UACA,QAAA,IAEA,CACA,KAAA,QACA,KAAA,QACA,QAAA,IAGA,KACA,4DAGA,CACA,KAAA,kBACA,KAAA,eACA,OAAA,CACA,CACA,KAAA,QACA,KAAA,UACA,QAAA,IAEA,CACA,KAAA,QACA,KAAA,QACA,QAAA,IAGA,KACA,kEAGA,CACA,KAAA,UACA,KAAA,QACA,OAAA,CACA,CACA,KAAA,QACA,KAAA,UACA,QAAA,IAEA,CACA,KAAA,QACA,KAAA,QACA,QAAA,IAGA,KACA,4DAGA,CACA,KAAA,kBACA,KAAA,eACA,OAAA,CACA,CACA,KAAA,QACA,KAAA,UACA,QAAA,IAEA,CACA,KAAA,QACA,KAAA,QACA,QAAA,IAGA,KACA,kEAGA,CACA,KAAA,MACA,KAAA,UACA,OAAA,CACA,CACA,KAAA,QACA,KAAA,SACA,QAAA,IAGA,KACA,kDAEA,CACA,KAAA,MACA,KAAA,UACA,OAAA,CACA,CACA,KAAA,QACA,KAAA,SACA,QAAA,IAGA,KACA,kDAEA,CACA,KAAA,QACA,KAAA,UACA,OAAA,GAGA,KACA,8DAEA,CACA,KAAA,QACA,KAAA,UACA,OAAA,CACA,CACA,KAAA,QACA,KAAA,SACA,QAAA,KAGA,KACA,0CAEA,CACA,KAAA,OACA,KAAA,UACA,OAAA,CACA,CACA,KAAA,QACA,KAAA,SACA,QAAA,IAGA,KACA,gDAEA,CACA,KAAA,OACA,KAAA,UACA,OAAA,GAGA,KACA,4DAEA,CACA,KAAA,WACA,KAAA,eACA,OAAA,CACA,CACA,KAAA,QACA,KAAA,SACA,QAAA,KAGA,KACA,gFAGA,CACA,KAAA,gBACA,KAAA,eACA,OAAA,CACA,CACA,KAAA,QACA,KAAA,WACA,QAAA,GAEA,CACA,KAAA,QACA,KAAA,SACA,QAAA,IAGA,KACA,yIAKA,CACA,KAAA,mBACA,KAAA,eACA,OAAA,CACA,CACA,KAAA,QACA,KAAA,WACA,QAAA,IAEA,CACA,KAAA,QACA,KAAA,SACA,QAAA,IAGA,KACA,+GAGA,CACA,KAAA,iBACA,KAAA,eACA,OAAA,CACA,CACA,KAAA,QACA,KAAA,WACA,QAAA,GAEA,CACA,KAAA,QACA,KAAA,SACA,QAAA,IAGA,KACA,6KAMA,CACA,KAAA,cACA,KAAA,eACA,OAAA,CACA,CACA,KAAA,QACA,KAAA,SACA,QAAA,IAGA,KACA,mFAEA,CACA,KAAA,SACA,KAAA,QACA,OAAA,CACA,CACA,KAAA,QACA,KAAA,SACA,QAAA,IAGA,KACA,uEAEA,CACA,KAAA,WACA,KAAA,QACA,OAAA,CACA,CACA,KAAA,QACA,KAAA,SACA,QAAA,MAGA,KACA,wFAGA,CACA,KAAA,aACA,KAAA,QACA,OAAA,CACA,CACA,KAAA,QACA,KAAA,SACA,QAAA,KAGA,KACA,kDAEA,CACA,KAAA,OACA,KAAA,UACA,OAAA,GAGA,KACA,oEAGA,CACA,KAAA,OACA,KAAA,QACA,OAAA,CACA,CACA,KAAA,QACA,KAAA,YACA,QAAA,IAEA,CACA,KAAA,QACA,KAAA,YACA,QAAA,KAGA,KACA,kJAGA,CACA,KAAA,SACA,KAAA,QACA,OAAA,CACA,CACA,KAAA,QACA,KAAA,YACA,QAAA,IAEA,CACA,KAAA,QACA,KAAA,YACA,QAAA,MAGA,KACA,mIAEA,CACA,KAAA,QACA,KAAA,QACA,OAAA,CACA,CACA,KAAA,QACA,KAA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","file":"hydra.808ec667.js","sourceRoot":"..","sourcesContent":["//const transforms = require('./glsl-transforms.js')\n\nvar Output = function ({ regl, precision, label = \"\", width, height}) {\n  this.regl = regl\n  this.precision = precision\n  this.label = label\n  this.positionBuffer = this.regl.buffer([\n    [-2, 0],\n    [0, -2],\n    [2, 2]\n  ])\n\n  this.draw = () => {}\n  this.init()\n  this.pingPongIndex = 0\n\n  // for each output, create two fbos for pingponging\n  this.fbos = (Array(2)).fill().map(() => this.regl.framebuffer({\n    color: this.regl.texture({\n      mag: 'nearest',\n      width: width,\n      height: height,\n      format: 'rgba'\n    }),\n    depthStencil: false\n  }))\n\n  // array containing render passes\n//  this.passes = []\n}\n\nOutput.prototype.resize = function(width, height) {\n  this.fbos.forEach((fbo) => {\n    fbo.resize(width, height)\n  })\n//  console.log(this)\n}\n\n\nOutput.prototype.getCurrent = function () {\n  return this.fbos[this.pingPongIndex]\n}\n\nOutput.prototype.getTexture = function () {\n   var index = this.pingPongIndex ? 0 : 1\n  return this.fbos[index]\n}\n\nOutput.prototype.init = function () {\n//  console.log('clearing')\n  this.transformIndex = 0\n  this.fragHeader = `\n  precision ${this.precision} float;\n\n  uniform float time;\n  varying vec2 uv;\n  `\n\n  this.fragBody = ``\n\n  this.vert = `\n  precision ${this.precision} float;\n  attribute vec2 position;\n  varying vec2 uv;\n\n  void main () {\n    uv = position;\n    gl_Position = vec4(2.0 * position - 1.0, 0, 1);\n  }`\n\n  this.attributes = {\n    position: this.positionBuffer\n  }\n  this.uniforms = {\n    time: this.regl.prop('time'),\n    resolution: this.regl.prop('resolution')\n  }\n\n  this.frag = `\n       ${this.fragHeader}\n\n      void main () {\n        vec4 c = vec4(0, 0, 0, 0);\n        vec2 st = uv;\n        ${this.fragBody}\n        gl_FragColor = c;\n      }\n  `\n  return this\n}\n\n\nOutput.prototype.render = function (passes) {\n  let pass = passes[0]\n  //console.log('pass', pass, this.pingPongIndex)\n  var self = this\n      var uniforms = Object.assign(pass.uniforms, { prevBuffer:  () =>  {\n             //var index = this.pingPongIndex ? 0 : 1\n          //   var index = self.pingPong[(passIndex+1)%2]\n          //  console.log('ping pong', self.pingPongIndex)\n            return self.fbos[self.pingPongIndex]\n          }\n        })\n\n  self.draw = self.regl({\n    frag: pass.frag,\n    vert: self.vert,\n    attributes: self.attributes,\n    uniforms: uniforms,\n    count: 3,\n    framebuffer: () => {\n      self.pingPongIndex = self.pingPongIndex ? 0 : 1\n      return self.fbos[self.pingPongIndex]\n    }\n  })\n}\n\n\nOutput.prototype.tick = function (props) {\n//  console.log(props)\n  this.draw(props)\n}\n\nmodule.exports = Output\n","if (typeof Object.create === 'function') {\n  // implementation from standard node.js 'util' module\n  module.exports = function inherits(ctor, superCtor) {\n    if (superCtor) {\n      ctor.super_ = superCtor\n      ctor.prototype = Object.create(superCtor.prototype, {\n        constructor: {\n          value: ctor,\n          enumerable: false,\n          writable: true,\n          configurable: true\n        }\n      })\n    }\n  };\n} else {\n  // old school shim for old browsers\n  module.exports = function inherits(ctor, superCtor) {\n    if (superCtor) {\n      ctor.super_ = superCtor\n      var TempCtor = function () {}\n      TempCtor.prototype = superCtor.prototype\n      ctor.prototype = new TempCtor()\n      ctor.prototype.constructor = ctor\n    }\n  }\n}\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\nvar R = typeof Reflect === 'object' ? Reflect : null\nvar ReflectApply = R && typeof R.apply === 'function'\n  ? R.apply\n  : function ReflectApply(target, receiver, args) {\n    return Function.prototype.apply.call(target, receiver, args);\n  }\n\nvar ReflectOwnKeys\nif (R && typeof R.ownKeys === 'function') {\n  ReflectOwnKeys = R.ownKeys\n} else if (Object.getOwnPropertySymbols) {\n  ReflectOwnKeys = function ReflectOwnKeys(target) {\n    return Object.getOwnPropertyNames(target)\n      .concat(Object.getOwnPropertySymbols(target));\n  };\n} else {\n  ReflectOwnKeys = function ReflectOwnKeys(target) {\n    return Object.getOwnPropertyNames(target);\n  };\n}\n\nfunction ProcessEmitWarning(warning) {\n  if (console && console.warn) console.warn(warning);\n}\n\nvar NumberIsNaN = Number.isNaN || function NumberIsNaN(value) {\n  return value !== value;\n}\n\nfunction EventEmitter() {\n  EventEmitter.init.call(this);\n}\nmodule.exports = EventEmitter;\nmodule.exports.once = once;\n\n// Backwards-compat with node 0.10.x\nEventEmitter.EventEmitter = EventEmitter;\n\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._eventsCount = 0;\nEventEmitter.prototype._maxListeners = undefined;\n\n// By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\nvar defaultMaxListeners = 10;\n\nfunction checkListener(listener) {\n  if (typeof listener !== 'function') {\n    throw new TypeError('The \"listener\" argument must be of type Function. Received type ' + typeof listener);\n  }\n}\n\nObject.defineProperty(EventEmitter, 'defaultMaxListeners', {\n  enumerable: true,\n  get: function() {\n    return defaultMaxListeners;\n  },\n  set: function(arg) {\n    if (typeof arg !== 'number' || arg < 0 || NumberIsNaN(arg)) {\n      throw new RangeError('The value of \"defaultMaxListeners\" is out of range. It must be a non-negative number. Received ' + arg + '.');\n    }\n    defaultMaxListeners = arg;\n  }\n});\n\nEventEmitter.init = function() {\n\n  if (this._events === undefined ||\n      this._events === Object.getPrototypeOf(this)._events) {\n    this._events = Object.create(null);\n    this._eventsCount = 0;\n  }\n\n  this._maxListeners = this._maxListeners || undefined;\n};\n\n// Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\nEventEmitter.prototype.setMaxListeners = function setMaxListeners(n) {\n  if (typeof n !== 'number' || n < 0 || NumberIsNaN(n)) {\n    throw new RangeError('The value of \"n\" is out of range. It must be a non-negative number. Received ' + n + '.');\n  }\n  this._maxListeners = n;\n  return this;\n};\n\nfunction _getMaxListeners(that) {\n  if (that._maxListeners === undefined)\n    return EventEmitter.defaultMaxListeners;\n  return that._maxListeners;\n}\n\nEventEmitter.prototype.getMaxListeners = function getMaxListeners() {\n  return _getMaxListeners(this);\n};\n\nEventEmitter.prototype.emit = function emit(type) {\n  var args = [];\n  for (var i = 1; i < arguments.length; i++) args.push(arguments[i]);\n  var doError = (type === 'error');\n\n  var events = this._events;\n  if (events !== undefined)\n    doError = (doError && events.error === undefined);\n  else if (!doError)\n    return false;\n\n  // If there is no 'error' event listener then throw.\n  if (doError) {\n    var er;\n    if (args.length > 0)\n      er = args[0];\n    if (er instanceof Error) {\n      // Note: The comments on the `throw` lines are intentional, they show\n      // up in Node's output if this results in an unhandled exception.\n      throw er; // Unhandled 'error' event\n    }\n    // At least give some kind of context to the user\n    var err = new Error('Unhandled error.' + (er ? ' (' + er.message + ')' : ''));\n    err.context = er;\n    throw err; // Unhandled 'error' event\n  }\n\n  var handler = events[type];\n\n  if (handler === undefined)\n    return false;\n\n  if (typeof handler === 'function') {\n    ReflectApply(handler, this, args);\n  } else {\n    var len = handler.length;\n    var listeners = arrayClone(handler, len);\n    for (var i = 0; i < len; ++i)\n      ReflectApply(listeners[i], this, args);\n  }\n\n  return true;\n};\n\nfunction _addListener(target, type, listener, prepend) {\n  var m;\n  var events;\n  var existing;\n\n  checkListener(listener);\n\n  events = target._events;\n  if (events === undefined) {\n    events = target._events = Object.create(null);\n    target._eventsCount = 0;\n  } else {\n    // To avoid recursion in the case that type === \"newListener\"! Before\n    // adding it to the listeners, first emit \"newListener\".\n    if (events.newListener !== undefined) {\n      target.emit('newListener', type,\n                  listener.listener ? listener.listener : listener);\n\n      // Re-assign `events` because a newListener handler could have caused the\n      // this._events to be assigned to a new object\n      events = target._events;\n    }\n    existing = events[type];\n  }\n\n  if (existing === undefined) {\n    // Optimize the case of one listener. Don't need the extra array object.\n    existing = events[type] = listener;\n    ++target._eventsCount;\n  } else {\n    if (typeof existing === 'function') {\n      // Adding the second element, need to change to array.\n      existing = events[type] =\n        prepend ? [listener, existing] : [existing, listener];\n      // If we've already got an array, just append.\n    } else if (prepend) {\n      existing.unshift(listener);\n    } else {\n      existing.push(listener);\n    }\n\n    // Check for listener leak\n    m = _getMaxListeners(target);\n    if (m > 0 && existing.length > m && !existing.warned) {\n      existing.warned = true;\n      // No error code for this since it is a Warning\n      // eslint-disable-next-line no-restricted-syntax\n      var w = new Error('Possible EventEmitter memory leak detected. ' +\n                          existing.length + ' ' + String(type) + ' listeners ' +\n                          'added. Use emitter.setMaxListeners() to ' +\n                          'increase limit');\n      w.name = 'MaxListenersExceededWarning';\n      w.emitter = target;\n      w.type = type;\n      w.count = existing.length;\n      ProcessEmitWarning(w);\n    }\n  }\n\n  return target;\n}\n\nEventEmitter.prototype.addListener = function addListener(type, listener) {\n  return _addListener(this, type, listener, false);\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.prependListener =\n    function prependListener(type, listener) {\n      return _addListener(this, type, listener, true);\n    };\n\nfunction onceWrapper() {\n  if (!this.fired) {\n    this.target.removeListener(this.type, this.wrapFn);\n    this.fired = true;\n    if (arguments.length === 0)\n      return this.listener.call(this.target);\n    return this.listener.apply(this.target, arguments);\n  }\n}\n\nfunction _onceWrap(target, type, listener) {\n  var state = { fired: false, wrapFn: undefined, target: target, type: type, listener: listener };\n  var wrapped = onceWrapper.bind(state);\n  wrapped.listener = listener;\n  state.wrapFn = wrapped;\n  return wrapped;\n}\n\nEventEmitter.prototype.once = function once(type, listener) {\n  checkListener(listener);\n  this.on(type, _onceWrap(this, type, listener));\n  return this;\n};\n\nEventEmitter.prototype.prependOnceListener =\n    function prependOnceListener(type, listener) {\n      checkListener(listener);\n      this.prependListener(type, _onceWrap(this, type, listener));\n      return this;\n    };\n\n// Emits a 'removeListener' event if and only if the listener was removed.\nEventEmitter.prototype.removeListener =\n    function removeListener(type, listener) {\n      var list, events, position, i, originalListener;\n\n      checkListener(listener);\n\n      events = this._events;\n      if (events === undefined)\n        return this;\n\n      list = events[type];\n      if (list === undefined)\n        return this;\n\n      if (list === listener || list.listener === listener) {\n        if (--this._eventsCount === 0)\n          this._events = Object.create(null);\n        else {\n          delete events[type];\n          if (events.removeListener)\n            this.emit('removeListener', type, list.listener || listener);\n        }\n      } else if (typeof list !== 'function') {\n        position = -1;\n\n        for (i = list.length - 1; i >= 0; i--) {\n          if (list[i] === listener || list[i].listener === listener) {\n            originalListener = list[i].listener;\n            position = i;\n            break;\n          }\n        }\n\n        if (position < 0)\n          return this;\n\n        if (position === 0)\n          list.shift();\n        else {\n          spliceOne(list, position);\n        }\n\n        if (list.length === 1)\n          events[type] = list[0];\n\n        if (events.removeListener !== undefined)\n          this.emit('removeListener', type, originalListener || listener);\n      }\n\n      return this;\n    };\n\nEventEmitter.prototype.off = EventEmitter.prototype.removeListener;\n\nEventEmitter.prototype.removeAllListeners =\n    function removeAllListeners(type) {\n      var listeners, events, i;\n\n      events = this._events;\n      if (events === undefined)\n        return this;\n\n      // not listening for removeListener, no need to emit\n      if (events.removeListener === undefined) {\n        if (arguments.length === 0) {\n          this._events = Object.create(null);\n          this._eventsCount = 0;\n        } else if (events[type] !== undefined) {\n          if (--this._eventsCount === 0)\n            this._events = Object.create(null);\n          else\n            delete events[type];\n        }\n        return this;\n      }\n\n      // emit removeListener for all listeners on all events\n      if (arguments.length === 0) {\n        var keys = Object.keys(events);\n        var key;\n        for (i = 0; i < keys.length; ++i) {\n          key = keys[i];\n          if (key === 'removeListener') continue;\n          this.removeAllListeners(key);\n        }\n        this.removeAllListeners('removeListener');\n        this._events = Object.create(null);\n        this._eventsCount = 0;\n        return this;\n      }\n\n      listeners = events[type];\n\n      if (typeof listeners === 'function') {\n        this.removeListener(type, listeners);\n      } else if (listeners !== undefined) {\n        // LIFO order\n        for (i = listeners.length - 1; i >= 0; i--) {\n          this.removeListener(type, listeners[i]);\n        }\n      }\n\n      return this;\n    };\n\nfunction _listeners(target, type, unwrap) {\n  var events = target._events;\n\n  if (events === undefined)\n    return [];\n\n  var evlistener = events[type];\n  if (evlistener === undefined)\n    return [];\n\n  if (typeof evlistener === 'function')\n    return unwrap ? [evlistener.listener || evlistener] : [evlistener];\n\n  return unwrap ?\n    unwrapListeners(evlistener) : arrayClone(evlistener, evlistener.length);\n}\n\nEventEmitter.prototype.listeners = function listeners(type) {\n  return _listeners(this, type, true);\n};\n\nEventEmitter.prototype.rawListeners = function rawListeners(type) {\n  return _listeners(this, type, false);\n};\n\nEventEmitter.listenerCount = function(emitter, type) {\n  if (typeof emitter.listenerCount === 'function') {\n    return emitter.listenerCount(type);\n  } else {\n    return listenerCount.call(emitter, type);\n  }\n};\n\nEventEmitter.prototype.listenerCount = listenerCount;\nfunction listenerCount(type) {\n  var events = this._events;\n\n  if (events !== undefined) {\n    var evlistener = events[type];\n\n    if (typeof evlistener === 'function') {\n      return 1;\n    } else if (evlistener !== undefined) {\n      return evlistener.length;\n    }\n  }\n\n  return 0;\n}\n\nEventEmitter.prototype.eventNames = function eventNames() {\n  return this._eventsCount > 0 ? ReflectOwnKeys(this._events) : [];\n};\n\nfunction arrayClone(arr, n) {\n  var copy = new Array(n);\n  for (var i = 0; i < n; ++i)\n    copy[i] = arr[i];\n  return copy;\n}\n\nfunction spliceOne(list, index) {\n  for (; index + 1 < list.length; index++)\n    list[index] = list[index + 1];\n  list.pop();\n}\n\nfunction unwrapListeners(arr) {\n  var ret = new Array(arr.length);\n  for (var i = 0; i < ret.length; ++i) {\n    ret[i] = arr[i].listener || arr[i];\n  }\n  return ret;\n}\n\nfunction once(emitter, name) {\n  return new Promise(function (resolve, reject) {\n    function errorListener(err) {\n      emitter.removeListener(name, resolver);\n      reject(err);\n    }\n\n    function resolver() {\n      if (typeof emitter.removeListener === 'function') {\n        emitter.removeListener('error', errorListener);\n      }\n      resolve([].slice.call(arguments));\n    };\n\n    eventTargetAgnosticAddListener(emitter, name, resolver, { once: true });\n    if (name !== 'error') {\n      addErrorHandlerIfEventEmitter(emitter, errorListener, { once: true });\n    }\n  });\n}\n\nfunction addErrorHandlerIfEventEmitter(emitter, handler, flags) {\n  if (typeof emitter.on === 'function') {\n    eventTargetAgnosticAddListener(emitter, 'error', handler, flags);\n  }\n}\n\nfunction eventTargetAgnosticAddListener(emitter, name, listener, flags) {\n  if (typeof emitter.on === 'function') {\n    if (flags.once) {\n      emitter.once(name, listener);\n    } else {\n      emitter.on(name, listener);\n    }\n  } else if (typeof emitter.addEventListener === 'function') {\n    // EventTarget does not have `error` event semantics like Node\n    // EventEmitters, we do not listen for `error` events here.\n    emitter.addEventListener(name, function wrapListener(arg) {\n      // IE does not have builtin `{ once: true }` support so we\n      // have to do it manually.\n      if (flags.once) {\n        emitter.removeEventListener(name, wrapListener);\n      }\n      listener(arg);\n    });\n  } else {\n    throw new TypeError('The \"emitter\" argument must be of type EventEmitter. Received type ' + typeof emitter);\n  }\n}\n","module.exports =\n  global.performance &&\n  global.performance.now ? function now() {\n    return performance.now()\n  } : Date.now || function now() {\n    return +new Date\n  }\n","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n","if performance? and performance.now\n  module.exports = -> performance.now()\nelse if process? and process.hrtime\n  module.exports = -> (getNanoSeconds() - nodeLoadTime) / 1e6\n  hrtime = process.hrtime\n  getNanoSeconds = ->\n    hr = hrtime()\n    hr[0] * 1e9 + hr[1]\n  moduleLoadTime = getNanoSeconds()\n  upTime = process.uptime() * 1e9\n  nodeLoadTime = moduleLoadTime - upTime\nelse if Date.now\n  module.exports = -> Date.now() - loadTime\n  loadTime = Date.now()\nelse\n  module.exports = -> new Date().getTime() - loadTime\n  loadTime = new Date().getTime()\n","var now = require('performance-now')\n  , root = typeof window === 'undefined' ? global : window\n  , vendors = ['moz', 'webkit']\n  , suffix = 'AnimationFrame'\n  , raf = root['request' + suffix]\n  , caf = root['cancel' + suffix] || root['cancelRequest' + suffix]\n\nfor(var i = 0; !raf && i < vendors.length; i++) {\n  raf = root[vendors[i] + 'Request' + suffix]\n  caf = root[vendors[i] + 'Cancel' + suffix]\n      || root[vendors[i] + 'CancelRequest' + suffix]\n}\n\n// Some versions of FF have rAF but not cAF\nif(!raf || !caf) {\n  var last = 0\n    , id = 0\n    , queue = []\n    , frameDuration = 1000 / 60\n\n  raf = function(callback) {\n    if(queue.length === 0) {\n      var _now = now()\n        , next = Math.max(0, frameDuration - (_now - last))\n      last = next + _now\n      setTimeout(function() {\n        var cp = queue.slice(0)\n        // Clear queue here to prevent\n        // callbacks from appending listeners\n        // to the current frame's queue\n        queue.length = 0\n        for(var i = 0; i < cp.length; i++) {\n          if(!cp[i].cancelled) {\n            try{\n              cp[i].callback(last)\n            } catch(e) {\n              setTimeout(function() { throw e }, 0)\n            }\n          }\n        }\n      }, Math.round(next))\n    }\n    queue.push({\n      handle: ++id,\n      callback: callback,\n      cancelled: false\n    })\n    return id\n  }\n\n  caf = function(handle) {\n    for(var i = 0; i < queue.length; i++) {\n      if(queue[i].handle === handle) {\n        queue[i].cancelled = true\n      }\n    }\n  }\n}\n\nmodule.exports = function(fn) {\n  // Wrap in a new function to prevent\n  // `cancel` potentially being assigned\n  // to the native rAF function\n  return raf.call(root, fn)\n}\nmodule.exports.cancel = function() {\n  caf.apply(root, arguments)\n}\nmodule.exports.polyfill = function(object) {\n  if (!object) {\n    object = root;\n  }\n  object.requestAnimationFrame = raf\n  object.cancelAnimationFrame = caf\n}\n","var inherits = require('inherits')\nvar EventEmitter = require('events').EventEmitter\nvar now = require('right-now')\nvar raf = require('raf')\n\nmodule.exports = Engine\nfunction Engine(fn) {\n    if (!(this instanceof Engine)) \n        return new Engine(fn)\n    this.running = false\n    this.last = now()\n    this._frame = 0\n    this._tick = this.tick.bind(this)\n\n    if (fn)\n        this.on('tick', fn)\n}\n\ninherits(Engine, EventEmitter)\n\nEngine.prototype.start = function() {\n    if (this.running) \n        return\n    this.running = true\n    this.last = now()\n    this._frame = raf(this._tick)\n    return this\n}\n\nEngine.prototype.stop = function() {\n    this.running = false\n    if (this._frame !== 0)\n        raf.cancel(this._frame)\n    this._frame = 0\n    return this\n}\n\nEngine.prototype.tick = function() {\n    this._frame = raf(this._tick)\n    var time = now()\n    var dt = time - this.last\n    this.emit('tick', dt)\n    this.last = time\n}","//const enumerateDevices = require('enumerate-devices')\n\nmodule.exports = function (deviceId) {\n  return navigator.mediaDevices.enumerateDevices()\n    .then(devices => devices.filter(devices => devices.kind === 'videoinput'))\n    .then(cameras => {\n      let constraints = { audio: false, video: true}\n      if (cameras[deviceId]) {\n        constraints['video'] = {\n          deviceId: { exact: cameras[deviceId].deviceId }\n        }\n      }\n    //  console.log(cameras)\n      return window.navigator.mediaDevices.getUserMedia(constraints)\n    })\n    .then(stream => {\n      const video = document.createElement('video')\n      //  video.src = window.URL.createObjectURL(stream)\n      video.srcObject = stream\n      return new Promise((resolve, reject) => {\n        video.addEventListener('loadedmetadata', () => {\n          video.play().then(() => resolve({video: video}))\n        })\n      })\n    })\n    .catch(console.log.bind(console))\n}\n","\nmodule.exports = function (options) {\n  return new Promise(function(resolve, reject) {\n    //  async function startCapture(displayMediaOptions) {\n    navigator.mediaDevices.getDisplayMedia(options).then((stream) => {\n      const video = document.createElement('video')\n      video.srcObject = stream\n      video.addEventListener('loadedmetadata', () => {\n        video.play()\n        resolve({video: video})\n      })\n    }).catch((err) => reject(err))\n  })\n}\n","const Webcam = require('./lib/webcam.js')\nconst Screen = require('./lib/screenmedia.js')\n\nclass HydraSource {\n  constructor ({ regl, width, height, pb, label = \"\"}) {\n    this.label = label\n    this.regl = regl\n    this.src = null\n    this.dynamic = true\n    this.width = width\n    this.height = height\n    this.tex = this.regl.texture({\n      //  shape: [width, height]\n      shape: [ 1, 1 ]\n    })\n    this.pb = pb\n  }\n\n  init (opts) {\n    if (opts.src) {\n      this.src = opts.src\n      this.tex = this.regl.texture(this.src)\n    }\n    if (opts.dynamic) this.dynamic = opts.dynamic\n  }\n\n  initCam (index) {\n    const self = this\n    Webcam(index)\n      .then(response => {\n        self.src = response.video\n        self.dynamic = true\n        self.tex = self.regl.texture(self.src)\n      })\n      .catch(err => console.log('could not get camera', err))\n  }\n\n  initVideo (url = '') {\n    // const self = this\n    const vid = document.createElement('video')\n    vid.crossOrigin = 'anonymous'\n    vid.autoplay = true\n    vid.loop = true\n    vid.muted = true // mute in order to load without user interaction\n    const onload = vid.addEventListener('loadeddata', () => {\n      this.src = vid\n      vid.play()\n      this.tex = this.regl.texture(this.src)\n      this.dynamic = true\n    })\n    vid.src = url\n  }\n\n  initImage (url = '') {\n    const img = document.createElement('img')\n    img.crossOrigin = 'anonymous'\n    img.src = url\n    img.onload = () => {\n      this.src = img\n      this.dynamic = false\n      this.tex = this.regl.texture(this.src)\n    }\n  }\n\n  initStream (streamName) {\n    //  console.log(\"initing stream!\", streamName)\n    let self = this\n    if (streamName && this.pb) {\n      this.pb.initSource(streamName)\n\n      this.pb.on('got video', function (nick, video) {\n        if (nick === streamName) {\n          self.src = video\n          self.dynamic = true\n          self.tex = self.regl.texture(self.src)\n        }\n      })\n    }\n  }\n\n  initScreen () {\n    const self = this\n    Screen()\n      .then(function (response) {\n        self.src = response.video\n        self.tex = self.regl.texture(self.src)\n        self.dynamic = true\n        //  console.log(\"received screen input\")\n      })\n      .catch(err => console.log('could not get screen', err))\n  }\n\n  resize (width, height) {\n    this.width = width\n    this.height = height\n  }\n\n  clear () {\n    if (this.src && this.src.srcObject) {\n      if (this.src.srcObject.getTracks) {\n        this.src.srcObject.getTracks().forEach(track => track.stop())\n      }\n    }\n    this.src = null\n    this.tex = this.regl.texture({ shape: [ 1, 1 ] })\n  }\n\n  tick (time) {\n    //  console.log(this.src, this.tex.width, this.tex.height)\n    if (this.src !== null && this.dynamic === true) {\n      if (this.src.videoWidth && this.src.videoWidth !== this.tex.width) {\n        console.log(\n          this.src.videoWidth,\n          this.src.videoHeight,\n          this.tex.width,\n          this.tex.height\n        )\n        this.tex.resize(this.src.videoWidth, this.src.videoHeight)\n      }\n\n      if (this.src.width && this.src.width !== this.tex.width) {\n        this.tex.resize(this.src.width, this.src.height)\n      }\n\n      this.tex.subimage(this.src)\n    }\n  }\n\n  getTexture () {\n    return this.tex\n  }\n}\n\nmodule.exports = HydraSource\n","// https://github.com/mikolalysenko/mouse-event\n\n'use strict'\n\nfunction mouseButtons(ev) {\n  if(typeof ev === 'object') {\n    if('buttons' in ev) {\n      return ev.buttons\n    } else if('which' in ev) {\n      var b = ev.which\n      if(b === 2) {\n        return 4\n      } else if(b === 3) {\n        return 2\n      } else if(b > 0) {\n        return 1<<(b-1)\n      }\n    } else if('button' in ev) {\n      var b = ev.button\n      if(b === 1) {\n        return 4\n      } else if(b === 2) {\n        return 2\n      } else if(b >= 0) {\n        return 1<<b\n      }\n    }\n  }\n  return 0\n}\nexports.buttons = mouseButtons\n\nfunction mouseElement(ev) {\n  return ev.target || ev.srcElement || window\n}\nexports.element = mouseElement\n\nfunction mouseRelativeX(ev) {\n  if(typeof ev === 'object') {\n    if('pageX' in ev) {\n      return ev.pageX\n    }\n  }\n  return 0\n}\nexports.x = mouseRelativeX\n\nfunction mouseRelativeY(ev) {\n  if(typeof ev === 'object') {\n    if('pageY' in ev) {\n      return ev.pageY\n    }\n  }\n  return 0\n}\nexports.y = mouseRelativeY\n","// based on https://github.com/mikolalysenko/mouse-change\n\n'use strict'\n\nmodule.exports = mouseListen\n\nvar mouse = require('./mouse-event.js')\n\nfunction mouseListen (element, callback) {\n  if (!callback) {\n    callback = element\n    element = window\n  }\n\n  var buttonState = 0\n  var x = 0\n  var y = 0\n  var mods = {\n    shift: false,\n    alt: false,\n    control: false,\n    meta: false\n  }\n  var attached = false\n\n  function updateMods (ev) {\n    var changed = false\n    if ('altKey' in ev) {\n      changed = changed || ev.altKey !== mods.alt\n      mods.alt = !!ev.altKey\n    }\n    if ('shiftKey' in ev) {\n      changed = changed || ev.shiftKey !== mods.shift\n      mods.shift = !!ev.shiftKey\n    }\n    if ('ctrlKey' in ev) {\n      changed = changed || ev.ctrlKey !== mods.control\n      mods.control = !!ev.ctrlKey\n    }\n    if ('metaKey' in ev) {\n      changed = changed || ev.metaKey !== mods.meta\n      mods.meta = !!ev.metaKey\n    }\n    return changed\n  }\n\n  function handleEvent (nextButtons, ev) {\n    var nextX = mouse.x(ev)\n    var nextY = mouse.y(ev)\n    if ('buttons' in ev) {\n      nextButtons = ev.buttons | 0\n    }\n    if (nextButtons !== buttonState ||\n      nextX !== x ||\n      nextY !== y ||\n      updateMods(ev)) {\n      buttonState = nextButtons | 0\n      x = nextX || 0\n      y = nextY || 0\n      callback && callback(buttonState, x, y, mods)\n    }\n  }\n\n  function clearState (ev) {\n    handleEvent(0, ev)\n  }\n\n  function handleBlur () {\n    if (buttonState ||\n      x ||\n      y ||\n      mods.shift ||\n      mods.alt ||\n      mods.meta ||\n      mods.control) {\n      x = y = 0\n      buttonState = 0\n      mods.shift = mods.alt = mods.control = mods.meta = false\n      callback && callback(0, 0, 0, mods)\n    }\n  }\n\n  function handleMods (ev) {\n    if (updateMods(ev)) {\n      callback && callback(buttonState, x, y, mods)\n    }\n  }\n\n  function handleMouseMove (ev) {\n    if (mouse.buttons(ev) === 0) {\n      handleEvent(0, ev)\n    } else {\n      handleEvent(buttonState, ev)\n    }\n  }\n\n  function handleMouseDown (ev) {\n    handleEvent(buttonState | mouse.buttons(ev), ev)\n  }\n\n  function handleMouseUp (ev) {\n    handleEvent(buttonState & ~mouse.buttons(ev), ev)\n  }\n\n  function attachListeners () {\n    if (attached) {\n      return\n    }\n    attached = true\n\n    element.addEventListener('mousemove', handleMouseMove)\n\n    element.addEventListener('mousedown', handleMouseDown)\n\n    element.addEventListener('mouseup', handleMouseUp)\n\n    element.addEventListener('mouseleave', clearState)\n    element.addEventListener('mouseenter', clearState)\n    element.addEventListener('mouseout', clearState)\n    element.addEventListener('mouseover', clearState)\n\n    element.addEventListener('blur', handleBlur)\n\n    element.addEventListener('keyup', handleMods)\n    element.addEventListener('keydown', handleMods)\n    element.addEventListener('keypress', handleMods)\n\n    if (element !== window) {\n      window.addEventListener('blur', handleBlur)\n\n      window.addEventListener('keyup', handleMods)\n      window.addEventListener('keydown', handleMods)\n      window.addEventListener('keypress', handleMods)\n    }\n  }\n\n  function detachListeners () {\n    if (!attached) {\n      return\n    }\n    attached = false\n\n    element.removeEventListener('mousemove', handleMouseMove)\n\n    element.removeEventListener('mousedown', handleMouseDown)\n\n    element.removeEventListener('mouseup', handleMouseUp)\n\n    element.removeEventListener('mouseleave', clearState)\n    element.removeEventListener('mouseenter', clearState)\n    element.removeEventListener('mouseout', clearState)\n    element.removeEventListener('mouseover', clearState)\n\n    element.removeEventListener('blur', handleBlur)\n\n    element.removeEventListener('keyup', handleMods)\n    element.removeEventListener('keydown', handleMods)\n    element.removeEventListener('keypress', handleMods)\n\n    if (element !== window) {\n      window.removeEventListener('blur', handleBlur)\n\n      window.removeEventListener('keyup', handleMods)\n      window.removeEventListener('keydown', handleMods)\n      window.removeEventListener('keypress', handleMods)\n    }\n  }\n\n  // Attach listeners\n  attachListeners()\n\n  var result = {\n    element: element\n  }\n\n  Object.defineProperties(result, {\n    enabled: {\n      get: function () { return attached },\n      set: function (f) {\n        if (f) {\n          attachListeners()\n        } else {\n          detachListeners()\n        }\n      },\n      enumerable: true\n    },\n    buttons: {\n      get: function () { return buttonState },\n      enumerable: true\n    },\n    x: {\n      get: function () { return x },\n      enumerable: true\n    },\n    y: {\n      get: function () { return y },\n      enumerable: true\n    },\n    mods: {\n      get: function () { return mods },\n      enumerable: true\n    }\n  })\n\n  return result\n}\n","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"Meyda\"] = factory();\n\telse\n\t\troot[\"Meyda\"] = factory();\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/index.js\");\n","'use strict';\n\n// compare and isBuffer taken from https://github.com/feross/buffer/blob/680e9e5e488f22aac27599a57dc844a6315928dd/index.js\n// original notice:\n\n/*!\n * The buffer module from node.js, for the browser.\n *\n * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>\n * @license  MIT\n */\nfunction compare(a, b) {\n  if (a === b) {\n    return 0;\n  }\n\n  var x = a.length;\n  var y = b.length;\n\n  for (var i = 0, len = Math.min(x, y); i < len; ++i) {\n    if (a[i] !== b[i]) {\n      x = a[i];\n      y = b[i];\n      break;\n    }\n  }\n\n  if (x < y) {\n    return -1;\n  }\n  if (y < x) {\n    return 1;\n  }\n  return 0;\n}\nfunction isBuffer(b) {\n  if (global.Buffer && typeof global.Buffer.isBuffer === 'function') {\n    return global.Buffer.isBuffer(b);\n  }\n  return !!(b != null && b._isBuffer);\n}\n\n// based on node assert, original notice:\n\n// http://wiki.commonjs.org/wiki/Unit_Testing/1.0\n//\n// THIS IS NOT TESTED NOR LIKELY TO WORK OUTSIDE V8!\n//\n// Originally from narwhal.js (http://narwhaljs.org)\n// Copyright (c) 2009 Thomas Robinson <280north.com>\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the 'Software'), to\n// deal in the Software without restriction, including without limitation the\n// rights to use, copy, modify, merge, publish, distribute, sublicense, and/or\n// sell copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED 'AS IS', WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN\n// ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION\n// WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nvar util = require('util/');\nvar hasOwn = Object.prototype.hasOwnProperty;\nvar pSlice = Array.prototype.slice;\nvar functionsHaveNames = (function () {\n  return function foo() {}.name === 'foo';\n}());\nfunction pToString (obj) {\n  return Object.prototype.toString.call(obj);\n}\nfunction isView(arrbuf) {\n  if (isBuffer(arrbuf)) {\n    return false;\n  }\n  if (typeof global.ArrayBuffer !== 'function') {\n    return false;\n  }\n  if (typeof ArrayBuffer.isView === 'function') {\n    return ArrayBuffer.isView(arrbuf);\n  }\n  if (!arrbuf) {\n    return false;\n  }\n  if (arrbuf instanceof DataView) {\n    return true;\n  }\n  if (arrbuf.buffer && arrbuf.buffer instanceof ArrayBuffer) {\n    return true;\n  }\n  return false;\n}\n// 1. The assert module provides functions that throw\n// AssertionError's when particular conditions are not met. The\n// assert module must conform to the following interface.\n\nvar assert = module.exports = ok;\n\n// 2. The AssertionError is defined in assert.\n// new assert.AssertionError({ message: message,\n//                             actual: actual,\n//                             expected: expected })\n\nvar regex = /\\s*function\\s+([^\\(\\s]*)\\s*/;\n// based on https://github.com/ljharb/function.prototype.name/blob/adeeeec8bfcc6068b187d7d9fb3d5bb1d3a30899/implementation.js\nfunction getName(func) {\n  if (!util.isFunction(func)) {\n    return;\n  }\n  if (functionsHaveNames) {\n    return func.name;\n  }\n  var str = func.toString();\n  var match = str.match(regex);\n  return match && match[1];\n}\nassert.AssertionError = function AssertionError(options) {\n  this.name = 'AssertionError';\n  this.actual = options.actual;\n  this.expected = options.expected;\n  this.operator = options.operator;\n  if (options.message) {\n    this.message = options.message;\n    this.generatedMessage = false;\n  } else {\n    this.message = getMessage(this);\n    this.generatedMessage = true;\n  }\n  var stackStartFunction = options.stackStartFunction || fail;\n  if (Error.captureStackTrace) {\n    Error.captureStackTrace(this, stackStartFunction);\n  } else {\n    // non v8 browsers so we can have a stacktrace\n    var err = new Error();\n    if (err.stack) {\n      var out = err.stack;\n\n      // try to strip useless frames\n      var fn_name = getName(stackStartFunction);\n      var idx = out.indexOf('\\n' + fn_name);\n      if (idx >= 0) {\n        // once we have located the function frame\n        // we need to strip out everything before it (and its line)\n        var next_line = out.indexOf('\\n', idx + 1);\n        out = out.substring(next_line + 1);\n      }\n\n      this.stack = out;\n    }\n  }\n};\n\n// assert.AssertionError instanceof Error\nutil.inherits(assert.AssertionError, Error);\n\nfunction truncate(s, n) {\n  if (typeof s === 'string') {\n    return s.length < n ? s : s.slice(0, n);\n  } else {\n    return s;\n  }\n}\nfunction inspect(something) {\n  if (functionsHaveNames || !util.isFunction(something)) {\n    return util.inspect(something);\n  }\n  var rawname = getName(something);\n  var name = rawname ? ': ' + rawname : '';\n  return '[Function' +  name + ']';\n}\nfunction getMessage(self) {\n  return truncate(inspect(self.actual), 128) + ' ' +\n         self.operator + ' ' +\n         truncate(inspect(self.expected), 128);\n}\n\n// At present only the three keys mentioned above are used and\n// understood by the spec. Implementations or sub modules can pass\n// other keys to the AssertionError's constructor - they will be\n// ignored.\n\n// 3. All of the following functions must throw an AssertionError\n// when a corresponding condition is not met, with a message that\n// may be undefined if not provided.  All assertion methods provide\n// both the actual and expected values to the assertion error for\n// display purposes.\n\nfunction fail(actual, expected, message, operator, stackStartFunction) {\n  throw new assert.AssertionError({\n    message: message,\n    actual: actual,\n    expected: expected,\n    operator: operator,\n    stackStartFunction: stackStartFunction\n  });\n}\n\n// EXTENSION! allows for well behaved errors defined elsewhere.\nassert.fail = fail;\n\n// 4. Pure assertion tests whether a value is truthy, as determined\n// by !!guard.\n// assert.ok(guard, message_opt);\n// This statement is equivalent to assert.equal(true, !!guard,\n// message_opt);. To test strictly for the value true, use\n// assert.strictEqual(true, guard, message_opt);.\n\nfunction ok(value, message) {\n  if (!value) fail(value, true, message, '==', assert.ok);\n}\nassert.ok = ok;\n\n// 5. The equality assertion tests shallow, coercive equality with\n// ==.\n// assert.equal(actual, expected, message_opt);\n\nassert.equal = function equal(actual, expected, message) {\n  if (actual != expected) fail(actual, expected, message, '==', assert.equal);\n};\n\n// 6. The non-equality assertion tests for whether two objects are not equal\n// with != assert.notEqual(actual, expected, message_opt);\n\nassert.notEqual = function notEqual(actual, expected, message) {\n  if (actual == expected) {\n    fail(actual, expected, message, '!=', assert.notEqual);\n  }\n};\n\n// 7. The equivalence assertion tests a deep equality relation.\n// assert.deepEqual(actual, expected, message_opt);\n\nassert.deepEqual = function deepEqual(actual, expected, message) {\n  if (!_deepEqual(actual, expected, false)) {\n    fail(actual, expected, message, 'deepEqual', assert.deepEqual);\n  }\n};\n\nassert.deepStrictEqual = function deepStrictEqual(actual, expected, message) {\n  if (!_deepEqual(actual, expected, true)) {\n    fail(actual, expected, message, 'deepStrictEqual', assert.deepStrictEqual);\n  }\n};\n\nfunction _deepEqual(actual, expected, strict, memos) {\n  // 7.1. All identical values are equivalent, as determined by ===.\n  if (actual === expected) {\n    return true;\n  } else if (isBuffer(actual) && isBuffer(expected)) {\n    return compare(actual, expected) === 0;\n\n  // 7.2. If the expected value is a Date object, the actual value is\n  // equivalent if it is also a Date object that refers to the same time.\n  } else if (util.isDate(actual) && util.isDate(expected)) {\n    return actual.getTime() === expected.getTime();\n\n  // 7.3 If the expected value is a RegExp object, the actual value is\n  // equivalent if it is also a RegExp object with the same source and\n  // properties (`global`, `multiline`, `lastIndex`, `ignoreCase`).\n  } else if (util.isRegExp(actual) && util.isRegExp(expected)) {\n    return actual.source === expected.source &&\n           actual.global === expected.global &&\n           actual.multiline === expected.multiline &&\n           actual.lastIndex === expected.lastIndex &&\n           actual.ignoreCase === expected.ignoreCase;\n\n  // 7.4. Other pairs that do not both pass typeof value == 'object',\n  // equivalence is determined by ==.\n  } else if ((actual === null || typeof actual !== 'object') &&\n             (expected === null || typeof expected !== 'object')) {\n    return strict ? actual === expected : actual == expected;\n\n  // If both values are instances of typed arrays, wrap their underlying\n  // ArrayBuffers in a Buffer each to increase performance\n  // This optimization requires the arrays to have the same type as checked by\n  // Object.prototype.toString (aka pToString). Never perform binary\n  // comparisons for Float*Arrays, though, since e.g. +0 === -0 but their\n  // bit patterns are not identical.\n  } else if (isView(actual) && isView(expected) &&\n             pToString(actual) === pToString(expected) &&\n             !(actual instanceof Float32Array ||\n               actual instanceof Float64Array)) {\n    return compare(new Uint8Array(actual.buffer),\n                   new Uint8Array(expected.buffer)) === 0;\n\n  // 7.5 For all other Object pairs, including Array objects, equivalence is\n  // determined by having the same number of owned properties (as verified\n  // with Object.prototype.hasOwnProperty.call), the same set of keys\n  // (although not necessarily the same order), equivalent values for every\n  // corresponding key, and an identical 'prototype' property. Note: this\n  // accounts for both named and indexed properties on Arrays.\n  } else if (isBuffer(actual) !== isBuffer(expected)) {\n    return false;\n  } else {\n    memos = memos || {actual: [], expected: []};\n\n    var actualIndex = memos.actual.indexOf(actual);\n    if (actualIndex !== -1) {\n      if (actualIndex === memos.expected.indexOf(expected)) {\n        return true;\n      }\n    }\n\n    memos.actual.push(actual);\n    memos.expected.push(expected);\n\n    return objEquiv(actual, expected, strict, memos);\n  }\n}\n\nfunction isArguments(object) {\n  return Object.prototype.toString.call(object) == '[object Arguments]';\n}\n\nfunction objEquiv(a, b, strict, actualVisitedObjects) {\n  if (a === null || a === undefined || b === null || b === undefined)\n    return false;\n  // if one is a primitive, the other must be same\n  if (util.isPrimitive(a) || util.isPrimitive(b))\n    return a === b;\n  if (strict && Object.getPrototypeOf(a) !== Object.getPrototypeOf(b))\n    return false;\n  var aIsArgs = isArguments(a);\n  var bIsArgs = isArguments(b);\n  if ((aIsArgs && !bIsArgs) || (!aIsArgs && bIsArgs))\n    return false;\n  if (aIsArgs) {\n    a = pSlice.call(a);\n    b = pSlice.call(b);\n    return _deepEqual(a, b, strict);\n  }\n  var ka = objectKeys(a);\n  var kb = objectKeys(b);\n  var key, i;\n  // having the same number of owned properties (keys incorporates\n  // hasOwnProperty)\n  if (ka.length !== kb.length)\n    return false;\n  //the same set of keys (although not necessarily the same order),\n  ka.sort();\n  kb.sort();\n  //~~~cheap key test\n  for (i = ka.length - 1; i >= 0; i--) {\n    if (ka[i] !== kb[i])\n      return false;\n  }\n  //equivalent values for every corresponding key, and\n  //~~~possibly expensive deep test\n  for (i = ka.length - 1; i >= 0; i--) {\n    key = ka[i];\n    if (!_deepEqual(a[key], b[key], strict, actualVisitedObjects))\n      return false;\n  }\n  return true;\n}\n\n// 8. The non-equivalence assertion tests for any deep inequality.\n// assert.notDeepEqual(actual, expected, message_opt);\n\nassert.notDeepEqual = function notDeepEqual(actual, expected, message) {\n  if (_deepEqual(actual, expected, false)) {\n    fail(actual, expected, message, 'notDeepEqual', assert.notDeepEqual);\n  }\n};\n\nassert.notDeepStrictEqual = notDeepStrictEqual;\nfunction notDeepStrictEqual(actual, expected, message) {\n  if (_deepEqual(actual, expected, true)) {\n    fail(actual, expected, message, 'notDeepStrictEqual', notDeepStrictEqual);\n  }\n}\n\n\n// 9. The strict equality assertion tests strict equality, as determined by ===.\n// assert.strictEqual(actual, expected, message_opt);\n\nassert.strictEqual = function strictEqual(actual, expected, message) {\n  if (actual !== expected) {\n    fail(actual, expected, message, '===', assert.strictEqual);\n  }\n};\n\n// 10. The strict non-equality assertion tests for strict inequality, as\n// determined by !==.  assert.notStrictEqual(actual, expected, message_opt);\n\nassert.notStrictEqual = function notStrictEqual(actual, expected, message) {\n  if (actual === expected) {\n    fail(actual, expected, message, '!==', assert.notStrictEqual);\n  }\n};\n\nfunction expectedException(actual, expected) {\n  if (!actual || !expected) {\n    return false;\n  }\n\n  if (Object.prototype.toString.call(expected) == '[object RegExp]') {\n    return expected.test(actual);\n  }\n\n  try {\n    if (actual instanceof expected) {\n      return true;\n    }\n  } catch (e) {\n    // Ignore.  The instanceof check doesn't work for arrow functions.\n  }\n\n  if (Error.isPrototypeOf(expected)) {\n    return false;\n  }\n\n  return expected.call({}, actual) === true;\n}\n\nfunction _tryBlock(block) {\n  var error;\n  try {\n    block();\n  } catch (e) {\n    error = e;\n  }\n  return error;\n}\n\nfunction _throws(shouldThrow, block, expected, message) {\n  var actual;\n\n  if (typeof block !== 'function') {\n    throw new TypeError('\"block\" argument must be a function');\n  }\n\n  if (typeof expected === 'string') {\n    message = expected;\n    expected = null;\n  }\n\n  actual = _tryBlock(block);\n\n  message = (expected && expected.name ? ' (' + expected.name + ').' : '.') +\n            (message ? ' ' + message : '.');\n\n  if (shouldThrow && !actual) {\n    fail(actual, expected, 'Missing expected exception' + message);\n  }\n\n  var userProvidedMessage = typeof message === 'string';\n  var isUnwantedException = !shouldThrow && util.isError(actual);\n  var isUnexpectedException = !shouldThrow && actual && !expected;\n\n  if ((isUnwantedException &&\n      userProvidedMessage &&\n      expectedException(actual, expected)) ||\n      isUnexpectedException) {\n    fail(actual, expected, 'Got unwanted exception' + message);\n  }\n\n  if ((shouldThrow && actual && expected &&\n      !expectedException(actual, expected)) || (!shouldThrow && actual)) {\n    throw actual;\n  }\n}\n\n// 11. Expected to throw an error:\n// assert.throws(block, Error_opt, message_opt);\n\nassert.throws = function(block, /*optional*/error, /*optional*/message) {\n  _throws(true, block, error, message);\n};\n\n// EXTENSION! This is annoying to write outside this module.\nassert.doesNotThrow = function(block, /*optional*/error, /*optional*/message) {\n  _throws(false, block, error, message);\n};\n\nassert.ifError = function(err) { if (err) throw err; };\n\nvar objectKeys = Object.keys || function (obj) {\n  var keys = [];\n  for (var key in obj) {\n    if (hasOwn.call(obj, key)) keys.push(key);\n  }\n  return keys;\n};\n","module.exports = require('./src/dct.js');\n","/*===========================================================================*\\\n * Discrete Cosine Transform\n *\n * (c) Vail Systems. Joshua Jung and Ben Bryan. 2015\n *\n * This code is not designed to be highly optimized but as an educational\n * tool to understand the Mel-scale and its related coefficients used in\n * human speech analysis.\n\\*===========================================================================*/\nvar cosMap = null;\n\n// Builds a cosine map for the given input size. This allows multiple input sizes to be memoized automagically\n// if you want to run the DCT over and over.\nvar memoizeCosines = function(N) {\n  cosMap = cosMap || {};\n  cosMap[N] = new Array(N*N);\n\n  var PI_N = Math.PI / N;\n\n  for (var k = 0; k < N; k++) {\n    for (var n = 0; n < N; n++) {\n      cosMap[N][n + (k * N)] = Math.cos(PI_N * (n + 0.5) * k);\n    }\n  }\n};\n\nfunction dct(signal, scale) {\n  var L = signal.length;\n  scale = scale || 2;\n\n  if (!cosMap || !cosMap[L]) memoizeCosines(L);\n\n  var coefficients = signal.map(function () {return 0;});\n\n  return coefficients.map(function (__, ix) {\n    return scale * signal.reduce(function (prev, cur, ix_, arr) {\n      return prev + (cur * cosMap[L][ix_ + (ix * L)]);\n    }, 0);\n  });\n};\n\nmodule.exports = dct;\n","'use strict';\n\nvar utils = require('./utils');\n\n// real to complex fft\nvar fft = function fft(signal) {\n\n  var complexSignal = {};\n\n  if (signal.real === undefined || signal.imag === undefined) {\n    complexSignal = utils.constructComplexArray(signal);\n  } else {\n    complexSignal.real = signal.real.slice();\n    complexSignal.imag = signal.imag.slice();\n  }\n\n  var N = complexSignal.real.length;\n  var logN = Math.log2(N);\n\n  if (Math.round(logN) != logN) throw new Error('Input size must be a power of 2.');\n\n  if (complexSignal.real.length != complexSignal.imag.length) {\n    throw new Error('Real and imaginary components must have the same length.');\n  }\n\n  var bitReversedIndices = utils.bitReverseArray(N);\n\n  // sort array\n  var ordered = {\n    'real': [],\n    'imag': []\n  };\n\n  for (var i = 0; i < N; i++) {\n    ordered.real[bitReversedIndices[i]] = complexSignal.real[i];\n    ordered.imag[bitReversedIndices[i]] = complexSignal.imag[i];\n  }\n\n  for (var _i = 0; _i < N; _i++) {\n    complexSignal.real[_i] = ordered.real[_i];\n    complexSignal.imag[_i] = ordered.imag[_i];\n  }\n  // iterate over the number of stages\n  for (var n = 1; n <= logN; n++) {\n    var currN = Math.pow(2, n);\n\n    // find twiddle factors\n    for (var k = 0; k < currN / 2; k++) {\n      var twiddle = utils.euler(k, currN);\n\n      // on each block of FT, implement the butterfly diagram\n      for (var m = 0; m < N / currN; m++) {\n        var currEvenIndex = currN * m + k;\n        var currOddIndex = currN * m + k + currN / 2;\n\n        var currEvenIndexSample = {\n          'real': complexSignal.real[currEvenIndex],\n          'imag': complexSignal.imag[currEvenIndex]\n        };\n        var currOddIndexSample = {\n          'real': complexSignal.real[currOddIndex],\n          'imag': complexSignal.imag[currOddIndex]\n        };\n\n        var odd = utils.multiply(twiddle, currOddIndexSample);\n\n        var subtractionResult = utils.subtract(currEvenIndexSample, odd);\n        complexSignal.real[currOddIndex] = subtractionResult.real;\n        complexSignal.imag[currOddIndex] = subtractionResult.imag;\n\n        var additionResult = utils.add(odd, currEvenIndexSample);\n        complexSignal.real[currEvenIndex] = additionResult.real;\n        complexSignal.imag[currEvenIndex] = additionResult.imag;\n      }\n    }\n  }\n\n  return complexSignal;\n};\n\n// complex to real ifft\nvar ifft = function ifft(signal) {\n\n  if (signal.real === undefined || signal.imag === undefined) {\n    throw new Error(\"IFFT only accepts a complex input.\");\n  }\n\n  var N = signal.real.length;\n\n  var complexSignal = {\n    'real': [],\n    'imag': []\n  };\n\n  //take complex conjugate in order to be able to use the regular FFT for IFFT\n  for (var i = 0; i < N; i++) {\n    var currentSample = {\n      'real': signal.real[i],\n      'imag': signal.imag[i]\n    };\n\n    var conjugateSample = utils.conj(currentSample);\n    complexSignal.real[i] = conjugateSample.real;\n    complexSignal.imag[i] = conjugateSample.imag;\n  }\n\n  //compute\n  var X = fft(complexSignal);\n\n  //normalize\n  complexSignal.real = X.real.map(function (val) {\n    return val / N;\n  });\n\n  complexSignal.imag = X.imag.map(function (val) {\n    return val / N;\n  });\n\n  return complexSignal;\n};\n\nmodule.exports = {\n  fft: fft,\n  ifft: ifft\n};","'use strict';\n\n// memoization of the reversal of different lengths.\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\nvar memoizedReversal = {};\nvar memoizedZeroBuffers = {};\n\nvar constructComplexArray = function constructComplexArray(signal) {\n  var complexSignal = {};\n\n  complexSignal.real = signal.real === undefined ? signal.slice() : signal.real.slice();\n\n  var bufferSize = complexSignal.real.length;\n\n  if (memoizedZeroBuffers[bufferSize] === undefined) {\n    memoizedZeroBuffers[bufferSize] = Array.apply(null, Array(bufferSize)).map(Number.prototype.valueOf, 0);\n  }\n\n  complexSignal.imag = memoizedZeroBuffers[bufferSize].slice();\n\n  return complexSignal;\n};\n\nvar bitReverseArray = function bitReverseArray(N) {\n  if (memoizedReversal[N] === undefined) {\n    var maxBinaryLength = (N - 1).toString(2).length; //get the binary length of the largest index.\n    var templateBinary = '0'.repeat(maxBinaryLength); //create a template binary of that length.\n    var reversed = {};\n    for (var n = 0; n < N; n++) {\n      var currBinary = n.toString(2); //get binary value of current index.\n\n      //prepend zeros from template to current binary. This makes binary values of all indices have the same length.\n      currBinary = templateBinary.substr(currBinary.length) + currBinary;\n\n      currBinary = [].concat(_toConsumableArray(currBinary)).reverse().join(''); //reverse\n      reversed[n] = parseInt(currBinary, 2); //convert to decimal\n    }\n    memoizedReversal[N] = reversed; //save\n  }\n  return memoizedReversal[N];\n};\n\n// complex multiplication\nvar multiply = function multiply(a, b) {\n  return {\n    'real': a.real * b.real - a.imag * b.imag,\n    'imag': a.real * b.imag + a.imag * b.real\n  };\n};\n\n// complex addition\nvar add = function add(a, b) {\n  return {\n    'real': a.real + b.real,\n    'imag': a.imag + b.imag\n  };\n};\n\n// complex subtraction\nvar subtract = function subtract(a, b) {\n  return {\n    'real': a.real - b.real,\n    'imag': a.imag - b.imag\n  };\n};\n\n// euler's identity e^x = cos(x) + sin(x)\nvar euler = function euler(kn, N) {\n  var x = -2 * Math.PI * kn / N;\n  return { 'real': Math.cos(x), 'imag': Math.sin(x) };\n};\n\n// complex conjugate\nvar conj = function conj(a) {\n  a.imag *= -1;\n  return a;\n};\n\nmodule.exports = {\n  bitReverseArray: bitReverseArray,\n  multiply: multiply,\n  add: add,\n  subtract: subtract,\n  euler: euler,\n  conj: conj,\n  constructComplexArray: constructComplexArray\n};","if (typeof Object.create === 'function') {\n  // implementation from standard node.js 'util' module\n  module.exports = function inherits(ctor, superCtor) {\n    ctor.super_ = superCtor\n    ctor.prototype = Object.create(superCtor.prototype, {\n      constructor: {\n        value: ctor,\n        enumerable: false,\n        writable: true,\n        configurable: true\n      }\n    });\n  };\n} else {\n  // old school shim for old browsers\n  module.exports = function inherits(ctor, superCtor) {\n    ctor.super_ = superCtor\n    var TempCtor = function () {}\n    TempCtor.prototype = superCtor.prototype\n    ctor.prototype = new TempCtor()\n    ctor.prototype.constructor = ctor\n  }\n}\n","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n","module.exports = function isBuffer(arg) {\n  return arg && typeof arg === 'object'\n    && typeof arg.copy === 'function'\n    && typeof arg.fill === 'function'\n    && typeof arg.readUInt8 === 'function';\n}","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nvar getOwnPropertyDescriptors = Object.getOwnPropertyDescriptors ||\n  function getOwnPropertyDescriptors(obj) {\n    var keys = Object.keys(obj);\n    var descriptors = {};\n    for (var i = 0; i < keys.length; i++) {\n      descriptors[keys[i]] = Object.getOwnPropertyDescriptor(obj, keys[i]);\n    }\n    return descriptors;\n  };\n\nvar formatRegExp = /%[sdj%]/g;\nexports.format = function(f) {\n  if (!isString(f)) {\n    var objects = [];\n    for (var i = 0; i < arguments.length; i++) {\n      objects.push(inspect(arguments[i]));\n    }\n    return objects.join(' ');\n  }\n\n  var i = 1;\n  var args = arguments;\n  var len = args.length;\n  var str = String(f).replace(formatRegExp, function(x) {\n    if (x === '%%') return '%';\n    if (i >= len) return x;\n    switch (x) {\n      case '%s': return String(args[i++]);\n      case '%d': return Number(args[i++]);\n      case '%j':\n        try {\n          return JSON.stringify(args[i++]);\n        } catch (_) {\n          return '[Circular]';\n        }\n      default:\n        return x;\n    }\n  });\n  for (var x = args[i]; i < len; x = args[++i]) {\n    if (isNull(x) || !isObject(x)) {\n      str += ' ' + x;\n    } else {\n      str += ' ' + inspect(x);\n    }\n  }\n  return str;\n};\n\n\n// Mark that a method should not be used.\n// Returns a modified function which warns once by default.\n// If --no-deprecation is set, then it is a no-op.\nexports.deprecate = function(fn, msg) {\n  if (typeof process !== 'undefined' && process.noDeprecation === true) {\n    return fn;\n  }\n\n  // Allow for deprecating things in the process of starting up.\n  if (typeof process === 'undefined') {\n    return function() {\n      return exports.deprecate(fn, msg).apply(this, arguments);\n    };\n  }\n\n  var warned = false;\n  function deprecated() {\n    if (!warned) {\n      if (process.throwDeprecation) {\n        throw new Error(msg);\n      } else if (process.traceDeprecation) {\n        console.trace(msg);\n      } else {\n        console.error(msg);\n      }\n      warned = true;\n    }\n    return fn.apply(this, arguments);\n  }\n\n  return deprecated;\n};\n\n\nvar debugs = {};\nvar debugEnviron;\nexports.debuglog = function(set) {\n  if (isUndefined(debugEnviron))\n    debugEnviron = process.env.NODE_DEBUG || '';\n  set = set.toUpperCase();\n  if (!debugs[set]) {\n    if (new RegExp('\\\\b' + set + '\\\\b', 'i').test(debugEnviron)) {\n      var pid = process.pid;\n      debugs[set] = function() {\n        var msg = exports.format.apply(exports, arguments);\n        console.error('%s %d: %s', set, pid, msg);\n      };\n    } else {\n      debugs[set] = function() {};\n    }\n  }\n  return debugs[set];\n};\n\n\n/**\n * Echos the value of a value. Trys to print the value out\n * in the best way possible given the different types.\n *\n * @param {Object} obj The object to print out.\n * @param {Object} opts Optional options object that alters the output.\n */\n/* legacy: obj, showHidden, depth, colors*/\nfunction inspect(obj, opts) {\n  // default options\n  var ctx = {\n    seen: [],\n    stylize: stylizeNoColor\n  };\n  // legacy...\n  if (arguments.length >= 3) ctx.depth = arguments[2];\n  if (arguments.length >= 4) ctx.colors = arguments[3];\n  if (isBoolean(opts)) {\n    // legacy...\n    ctx.showHidden = opts;\n  } else if (opts) {\n    // got an \"options\" object\n    exports._extend(ctx, opts);\n  }\n  // set default options\n  if (isUndefined(ctx.showHidden)) ctx.showHidden = false;\n  if (isUndefined(ctx.depth)) ctx.depth = 2;\n  if (isUndefined(ctx.colors)) ctx.colors = false;\n  if (isUndefined(ctx.customInspect)) ctx.customInspect = true;\n  if (ctx.colors) ctx.stylize = stylizeWithColor;\n  return formatValue(ctx, obj, ctx.depth);\n}\nexports.inspect = inspect;\n\n\n// http://en.wikipedia.org/wiki/ANSI_escape_code#graphics\ninspect.colors = {\n  'bold' : [1, 22],\n  'italic' : [3, 23],\n  'underline' : [4, 24],\n  'inverse' : [7, 27],\n  'white' : [37, 39],\n  'grey' : [90, 39],\n  'black' : [30, 39],\n  'blue' : [34, 39],\n  'cyan' : [36, 39],\n  'green' : [32, 39],\n  'magenta' : [35, 39],\n  'red' : [31, 39],\n  'yellow' : [33, 39]\n};\n\n// Don't use 'blue' not visible on cmd.exe\ninspect.styles = {\n  'special': 'cyan',\n  'number': 'yellow',\n  'boolean': 'yellow',\n  'undefined': 'grey',\n  'null': 'bold',\n  'string': 'green',\n  'date': 'magenta',\n  // \"name\": intentionally not styling\n  'regexp': 'red'\n};\n\n\nfunction stylizeWithColor(str, styleType) {\n  var style = inspect.styles[styleType];\n\n  if (style) {\n    return '\\u001b[' + inspect.colors[style][0] + 'm' + str +\n           '\\u001b[' + inspect.colors[style][1] + 'm';\n  } else {\n    return str;\n  }\n}\n\n\nfunction stylizeNoColor(str, styleType) {\n  return str;\n}\n\n\nfunction arrayToHash(array) {\n  var hash = {};\n\n  array.forEach(function(val, idx) {\n    hash[val] = true;\n  });\n\n  return hash;\n}\n\n\nfunction formatValue(ctx, value, recurseTimes) {\n  // Provide a hook for user-specified inspect functions.\n  // Check that value is an object with an inspect function on it\n  if (ctx.customInspect &&\n      value &&\n      isFunction(value.inspect) &&\n      // Filter out the util module, it's inspect function is special\n      value.inspect !== exports.inspect &&\n      // Also filter out any prototype objects using the circular check.\n      !(value.constructor && value.constructor.prototype === value)) {\n    var ret = value.inspect(recurseTimes, ctx);\n    if (!isString(ret)) {\n      ret = formatValue(ctx, ret, recurseTimes);\n    }\n    return ret;\n  }\n\n  // Primitive types cannot have properties\n  var primitive = formatPrimitive(ctx, value);\n  if (primitive) {\n    return primitive;\n  }\n\n  // Look up the keys of the object.\n  var keys = Object.keys(value);\n  var visibleKeys = arrayToHash(keys);\n\n  if (ctx.showHidden) {\n    keys = Object.getOwnPropertyNames(value);\n  }\n\n  // IE doesn't make error fields non-enumerable\n  // http://msdn.microsoft.com/en-us/library/ie/dww52sbt(v=vs.94).aspx\n  if (isError(value)\n      && (keys.indexOf('message') >= 0 || keys.indexOf('description') >= 0)) {\n    return formatError(value);\n  }\n\n  // Some type of object without properties can be shortcutted.\n  if (keys.length === 0) {\n    if (isFunction(value)) {\n      var name = value.name ? ': ' + value.name : '';\n      return ctx.stylize('[Function' + name + ']', 'special');\n    }\n    if (isRegExp(value)) {\n      return ctx.stylize(RegExp.prototype.toString.call(value), 'regexp');\n    }\n    if (isDate(value)) {\n      return ctx.stylize(Date.prototype.toString.call(value), 'date');\n    }\n    if (isError(value)) {\n      return formatError(value);\n    }\n  }\n\n  var base = '', array = false, braces = ['{', '}'];\n\n  // Make Array say that they are Array\n  if (isArray(value)) {\n    array = true;\n    braces = ['[', ']'];\n  }\n\n  // Make functions say that they are functions\n  if (isFunction(value)) {\n    var n = value.name ? ': ' + value.name : '';\n    base = ' [Function' + n + ']';\n  }\n\n  // Make RegExps say that they are RegExps\n  if (isRegExp(value)) {\n    base = ' ' + RegExp.prototype.toString.call(value);\n  }\n\n  // Make dates with properties first say the date\n  if (isDate(value)) {\n    base = ' ' + Date.prototype.toUTCString.call(value);\n  }\n\n  // Make error with message first say the error\n  if (isError(value)) {\n    base = ' ' + formatError(value);\n  }\n\n  if (keys.length === 0 && (!array || value.length == 0)) {\n    return braces[0] + base + braces[1];\n  }\n\n  if (recurseTimes < 0) {\n    if (isRegExp(value)) {\n      return ctx.stylize(RegExp.prototype.toString.call(value), 'regexp');\n    } else {\n      return ctx.stylize('[Object]', 'special');\n    }\n  }\n\n  ctx.seen.push(value);\n\n  var output;\n  if (array) {\n    output = formatArray(ctx, value, recurseTimes, visibleKeys, keys);\n  } else {\n    output = keys.map(function(key) {\n      return formatProperty(ctx, value, recurseTimes, visibleKeys, key, array);\n    });\n  }\n\n  ctx.seen.pop();\n\n  return reduceToSingleString(output, base, braces);\n}\n\n\nfunction formatPrimitive(ctx, value) {\n  if (isUndefined(value))\n    return ctx.stylize('undefined', 'undefined');\n  if (isString(value)) {\n    var simple = '\\'' + JSON.stringify(value).replace(/^\"|\"$/g, '')\n                                             .replace(/'/g, \"\\\\'\")\n                                             .replace(/\\\\\"/g, '\"') + '\\'';\n    return ctx.stylize(simple, 'string');\n  }\n  if (isNumber(value))\n    return ctx.stylize('' + value, 'number');\n  if (isBoolean(value))\n    return ctx.stylize('' + value, 'boolean');\n  // For some reason typeof null is \"object\", so special case here.\n  if (isNull(value))\n    return ctx.stylize('null', 'null');\n}\n\n\nfunction formatError(value) {\n  return '[' + Error.prototype.toString.call(value) + ']';\n}\n\n\nfunction formatArray(ctx, value, recurseTimes, visibleKeys, keys) {\n  var output = [];\n  for (var i = 0, l = value.length; i < l; ++i) {\n    if (hasOwnProperty(value, String(i))) {\n      output.push(formatProperty(ctx, value, recurseTimes, visibleKeys,\n          String(i), true));\n    } else {\n      output.push('');\n    }\n  }\n  keys.forEach(function(key) {\n    if (!key.match(/^\\d+$/)) {\n      output.push(formatProperty(ctx, value, recurseTimes, visibleKeys,\n          key, true));\n    }\n  });\n  return output;\n}\n\n\nfunction formatProperty(ctx, value, recurseTimes, visibleKeys, key, array) {\n  var name, str, desc;\n  desc = Object.getOwnPropertyDescriptor(value, key) || { value: value[key] };\n  if (desc.get) {\n    if (desc.set) {\n      str = ctx.stylize('[Getter/Setter]', 'special');\n    } else {\n      str = ctx.stylize('[Getter]', 'special');\n    }\n  } else {\n    if (desc.set) {\n      str = ctx.stylize('[Setter]', 'special');\n    }\n  }\n  if (!hasOwnProperty(visibleKeys, key)) {\n    name = '[' + key + ']';\n  }\n  if (!str) {\n    if (ctx.seen.indexOf(desc.value) < 0) {\n      if (isNull(recurseTimes)) {\n        str = formatValue(ctx, desc.value, null);\n      } else {\n        str = formatValue(ctx, desc.value, recurseTimes - 1);\n      }\n      if (str.indexOf('\\n') > -1) {\n        if (array) {\n          str = str.split('\\n').map(function(line) {\n            return '  ' + line;\n          }).join('\\n').substr(2);\n        } else {\n          str = '\\n' + str.split('\\n').map(function(line) {\n            return '   ' + line;\n          }).join('\\n');\n        }\n      }\n    } else {\n      str = ctx.stylize('[Circular]', 'special');\n    }\n  }\n  if (isUndefined(name)) {\n    if (array && key.match(/^\\d+$/)) {\n      return str;\n    }\n    name = JSON.stringify('' + key);\n    if (name.match(/^\"([a-zA-Z_][a-zA-Z_0-9]*)\"$/)) {\n      name = name.substr(1, name.length - 2);\n      name = ctx.stylize(name, 'name');\n    } else {\n      name = name.replace(/'/g, \"\\\\'\")\n                 .replace(/\\\\\"/g, '\"')\n                 .replace(/(^\"|\"$)/g, \"'\");\n      name = ctx.stylize(name, 'string');\n    }\n  }\n\n  return name + ': ' + str;\n}\n\n\nfunction reduceToSingleString(output, base, braces) {\n  var numLinesEst = 0;\n  var length = output.reduce(function(prev, cur) {\n    numLinesEst++;\n    if (cur.indexOf('\\n') >= 0) numLinesEst++;\n    return prev + cur.replace(/\\u001b\\[\\d\\d?m/g, '').length + 1;\n  }, 0);\n\n  if (length > 60) {\n    return braces[0] +\n           (base === '' ? '' : base + '\\n ') +\n           ' ' +\n           output.join(',\\n  ') +\n           ' ' +\n           braces[1];\n  }\n\n  return braces[0] + base + ' ' + output.join(', ') + ' ' + braces[1];\n}\n\n\n// NOTE: These type checking functions intentionally don't use `instanceof`\n// because it is fragile and can be easily faked with `Object.create()`.\nfunction isArray(ar) {\n  return Array.isArray(ar);\n}\nexports.isArray = isArray;\n\nfunction isBoolean(arg) {\n  return typeof arg === 'boolean';\n}\nexports.isBoolean = isBoolean;\n\nfunction isNull(arg) {\n  return arg === null;\n}\nexports.isNull = isNull;\n\nfunction isNullOrUndefined(arg) {\n  return arg == null;\n}\nexports.isNullOrUndefined = isNullOrUndefined;\n\nfunction isNumber(arg) {\n  return typeof arg === 'number';\n}\nexports.isNumber = isNumber;\n\nfunction isString(arg) {\n  return typeof arg === 'string';\n}\nexports.isString = isString;\n\nfunction isSymbol(arg) {\n  return typeof arg === 'symbol';\n}\nexports.isSymbol = isSymbol;\n\nfunction isUndefined(arg) {\n  return arg === void 0;\n}\nexports.isUndefined = isUndefined;\n\nfunction isRegExp(re) {\n  return isObject(re) && objectToString(re) === '[object RegExp]';\n}\nexports.isRegExp = isRegExp;\n\nfunction isObject(arg) {\n  return typeof arg === 'object' && arg !== null;\n}\nexports.isObject = isObject;\n\nfunction isDate(d) {\n  return isObject(d) && objectToString(d) === '[object Date]';\n}\nexports.isDate = isDate;\n\nfunction isError(e) {\n  return isObject(e) &&\n      (objectToString(e) === '[object Error]' || e instanceof Error);\n}\nexports.isError = isError;\n\nfunction isFunction(arg) {\n  return typeof arg === 'function';\n}\nexports.isFunction = isFunction;\n\nfunction isPrimitive(arg) {\n  return arg === null ||\n         typeof arg === 'boolean' ||\n         typeof arg === 'number' ||\n         typeof arg === 'string' ||\n         typeof arg === 'symbol' ||  // ES6 symbol\n         typeof arg === 'undefined';\n}\nexports.isPrimitive = isPrimitive;\n\nexports.isBuffer = require('./support/isBuffer');\n\nfunction objectToString(o) {\n  return Object.prototype.toString.call(o);\n}\n\n\nfunction pad(n) {\n  return n < 10 ? '0' + n.toString(10) : n.toString(10);\n}\n\n\nvar months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep',\n              'Oct', 'Nov', 'Dec'];\n\n// 26 Feb 16:19:34\nfunction timestamp() {\n  var d = new Date();\n  var time = [pad(d.getHours()),\n              pad(d.getMinutes()),\n              pad(d.getSeconds())].join(':');\n  return [d.getDate(), months[d.getMonth()], time].join(' ');\n}\n\n\n// log is just a thin wrapper to console.log that prepends a timestamp\nexports.log = function() {\n  console.log('%s - %s', timestamp(), exports.format.apply(exports, arguments));\n};\n\n\n/**\n * Inherit the prototype methods from one constructor into another.\n *\n * The Function.prototype.inherits from lang.js rewritten as a standalone\n * function (not on Function.prototype). NOTE: If this file is to be loaded\n * during bootstrapping this function needs to be rewritten using some native\n * functions as prototype setup using normal JavaScript does not work as\n * expected during bootstrapping (see mirror.js in r114903).\n *\n * @param {function} ctor Constructor function which needs to inherit the\n *     prototype.\n * @param {function} superCtor Constructor function to inherit prototype from.\n */\nexports.inherits = require('inherits');\n\nexports._extend = function(origin, add) {\n  // Don't do anything if add isn't an object\n  if (!add || !isObject(add)) return origin;\n\n  var keys = Object.keys(add);\n  var i = keys.length;\n  while (i--) {\n    origin[keys[i]] = add[keys[i]];\n  }\n  return origin;\n};\n\nfunction hasOwnProperty(obj, prop) {\n  return Object.prototype.hasOwnProperty.call(obj, prop);\n}\n\nvar kCustomPromisifiedSymbol = typeof Symbol !== 'undefined' ? Symbol('util.promisify.custom') : undefined;\n\nexports.promisify = function promisify(original) {\n  if (typeof original !== 'function')\n    throw new TypeError('The \"original\" argument must be of type Function');\n\n  if (kCustomPromisifiedSymbol && original[kCustomPromisifiedSymbol]) {\n    var fn = original[kCustomPromisifiedSymbol];\n    if (typeof fn !== 'function') {\n      throw new TypeError('The \"util.promisify.custom\" argument must be of type Function');\n    }\n    Object.defineProperty(fn, kCustomPromisifiedSymbol, {\n      value: fn, enumerable: false, writable: false, configurable: true\n    });\n    return fn;\n  }\n\n  function fn() {\n    var promiseResolve, promiseReject;\n    var promise = new Promise(function (resolve, reject) {\n      promiseResolve = resolve;\n      promiseReject = reject;\n    });\n\n    var args = [];\n    for (var i = 0; i < arguments.length; i++) {\n      args.push(arguments[i]);\n    }\n    args.push(function (err, value) {\n      if (err) {\n        promiseReject(err);\n      } else {\n        promiseResolve(value);\n      }\n    });\n\n    try {\n      original.apply(this, args);\n    } catch (err) {\n      promiseReject(err);\n    }\n\n    return promise;\n  }\n\n  Object.setPrototypeOf(fn, Object.getPrototypeOf(original));\n\n  if (kCustomPromisifiedSymbol) Object.defineProperty(fn, kCustomPromisifiedSymbol, {\n    value: fn, enumerable: false, writable: false, configurable: true\n  });\n  return Object.defineProperties(\n    fn,\n    getOwnPropertyDescriptors(original)\n  );\n}\n\nexports.promisify.custom = kCustomPromisifiedSymbol\n\nfunction callbackifyOnRejected(reason, cb) {\n  // `!reason` guard inspired by bluebird (Ref: https://goo.gl/t5IS6M).\n  // Because `null` is a special error value in callbacks which means \"no error\n  // occurred\", we error-wrap so the callback consumer can distinguish between\n  // \"the promise rejected with null\" or \"the promise fulfilled with undefined\".\n  if (!reason) {\n    var newReason = new Error('Promise was rejected with a falsy value');\n    newReason.reason = reason;\n    reason = newReason;\n  }\n  return cb(reason);\n}\n\nfunction callbackify(original) {\n  if (typeof original !== 'function') {\n    throw new TypeError('The \"original\" argument must be of type Function');\n  }\n\n  // We DO NOT return the promise as it gives the user a false sense that\n  // the promise is actually somehow related to the callback's execution\n  // and that the callback throwing will reject the promise.\n  function callbackified() {\n    var args = [];\n    for (var i = 0; i < arguments.length; i++) {\n      args.push(arguments[i]);\n    }\n\n    var maybeCb = args.pop();\n    if (typeof maybeCb !== 'function') {\n      throw new TypeError('The last argument must be of type Function');\n    }\n    var self = this;\n    var cb = function() {\n      return maybeCb.apply(self, arguments);\n    };\n    // In true node style we process the callback on `nextTick` with all the\n    // implications (stack, `uncaughtException`, `async_hooks`)\n    original.apply(this, args)\n      .then(function(ret) { process.nextTick(cb, null, ret) },\n            function(rej) { process.nextTick(callbackifyOnRejected, rej, cb) });\n  }\n\n  Object.setPrototypeOf(callbackified, Object.getPrototypeOf(original));\n  Object.defineProperties(callbackified,\n                          getOwnPropertyDescriptors(original));\n  return callbackified;\n}\nexports.callbackify = callbackify;\n","var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || new Function(\"return this\")();\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n","export default function(args) {\n  if (typeof args.ampSpectrum !== 'object') {\n    throw new TypeError('Valid ampSpectrum is required to generate chroma');\n  }\n  if (typeof args.chromaFilterBank !== 'object') {\n    throw new TypeError('Valid chromaFilterBank is required to generate chroma');\n  }\n\n  var chromagram = args.chromaFilterBank.map((row, i) =>\n    args.ampSpectrum.reduce((acc, v, j) => acc + v * row[j], 0)\n  );\n  var maxVal = Math.max(...chromagram);\n\n\n  return maxVal\n    ? chromagram.map(v => v / maxVal)\n    : chromagram;\n}\n","import * as assert from 'assert';\n\nexport default function() {\n  if (typeof arguments[0].signal !== 'object') {\n    throw new TypeError();\n  }\n\n  var energy = 0;\n  for (var i = 0; i < arguments[0].signal.length; i++) {\n    energy += Math.pow(Math.abs(arguments[0].signal[i]), 2);\n  }\n\n  return energy;\n}\n","export function mu(i, amplitudeSpect) {\n  var numerator = 0;\n  var denominator = 0;\n  for (var k = 0; k < amplitudeSpect.length; k++) {\n    numerator += Math.pow(k, i) * Math.abs(amplitudeSpect[k]);\n    denominator += amplitudeSpect[k];\n  }\n\n  return numerator / denominator;\n}\n","export default function(args) {\n  if (typeof args.ampSpectrum !== 'object' ||\n         typeof args.barkScale !== 'object') {\n    throw new TypeError();\n  }\n\n  var NUM_BARK_BANDS = 24;\n  var specific = new Float32Array(NUM_BARK_BANDS);\n  var total = 0;\n  var normalisedSpectrum = args.ampSpectrum;\n  var bbLimits = new Int32Array(NUM_BARK_BANDS + 1);\n\n  bbLimits[0] = 0;\n  var currentBandEnd = args.barkScale[normalisedSpectrum.length - 1] /\n        NUM_BARK_BANDS;\n  var currentBand = 1;\n  for (let i = 0; i < normalisedSpectrum.length; i++) {\n    while (args.barkScale[i] > currentBandEnd) {\n      bbLimits[currentBand++] = i;\n      currentBandEnd = currentBand *\n\t\t\t\t\t\t\t\targs.barkScale[normalisedSpectrum.length - 1] /\n                NUM_BARK_BANDS;\n    }\n  }\n\n  bbLimits[NUM_BARK_BANDS] = normalisedSpectrum.length - 1;\n\n  //process\n\n  for (let i = 0; i < NUM_BARK_BANDS; i++) {\n    let sum = 0;\n    for (let j = bbLimits[i]; j < bbLimits[i + 1]; j++) {\n\n      sum += normalisedSpectrum[j];\n    }\n\n    specific[i] = Math.pow(sum, 0.23);\n  }\n\n  //get total loudness\n  for (let i = 0; i < specific.length; i++) {\n    total += specific[i];\n  }\n\n  return {\n    specific: specific,\n    total: total,\n  };\n}\n","import powerSpectrum from './powerSpectrum';\nimport freqToMel from './../utilities';\nimport melToFreq from './../utilities';\n\nvar dct = require('dct');\n\nexport default function(args) {\n  if (typeof args.ampSpectrum !== 'object') {\n    throw new TypeError('Valid ampSpectrum is required to generate MFCC');\n  }\n  if (typeof args.melFilterBank !== 'object') {\n    throw new TypeError('Valid melFilterBank is required to generate MFCC');\n  }\n\n  let numberOfMFCCCoefficients = Math.min(40, Math.max(1, args.numberOfMFCCCoefficients || 13));\n\n  // Tutorial from:\n  // http://practicalcryptography.com/miscellaneous/machine-learning\n  // /guide-mel-frequency-cepstral-coefficients-mfccs/\n  let powSpec = powerSpectrum(args);\n  let numFilters = args.melFilterBank.length;\n  let filtered = Array(numFilters);\n\n  if (numFilters < numberOfMFCCCoefficients) {\n    throw new Error(\"Insufficient filter bank for requested number of coefficients\");\n  }\n\n  let loggedMelBands = new Float32Array(numFilters);\n\n  for (let i = 0; i < loggedMelBands.length; i++) {\n    filtered[i] = new Float32Array(args.bufferSize / 2);\n    loggedMelBands[i] = 0;\n    for (let j = 0; j < (args.bufferSize / 2); j++) {\n      //point-wise multiplication between power spectrum and filterbanks.\n      filtered[i][j] = args.melFilterBank[i][j] * powSpec[j];\n\n      //summing up all of the coefficients into one array\n      loggedMelBands[i] += filtered[i][j];\n    }\n\n    //log each coefficient.\n    loggedMelBands[i] = Math.log(loggedMelBands[i] + 1);\n  }\n\n  //dct\n  let loggedMelBandsArray = Array.prototype.slice.call(loggedMelBands);\n  let mfccs = dct(loggedMelBandsArray).slice(0, numberOfMFCCCoefficients);\n\n  return mfccs;\n}\n","import loudness from './loudness';\n\nexport default function() {\n  if (typeof arguments[0].signal !== 'object') {\n    throw new TypeError();\n  }\n\n  var loudnessValue = loudness(arguments[0]);\n  var spec = loudnessValue.specific;\n  var output = 0;\n\n  for (var i = 0; i < spec.length; i++) {\n    if (i < 15) {\n      output += (i + 1) * spec[i + 1];\n    } else {\n      output += 0.066 * Math.exp(0.171 * (i + 1));\n    }\n  }\n\n  output *= 0.11 / loudnessValue.total;\n\n  return output;\n}\n","import loudness from './loudness';\n\nexport default function() {\n  if (typeof arguments[0].signal !== 'object') {\n    throw new TypeError();\n  }\n\n  var loudnessValue = loudness(arguments[0]);\n\n  var max = 0;\n  for (var i = 0; i < loudnessValue.specific.length; i++) {\n    if (loudnessValue.specific[i] > max) {\n      max = loudnessValue.specific[i];\n    }\n  }\n\n  var spread = Math.pow((loudnessValue.total - max) / loudnessValue.total, 2);\n\n  return spread;\n}\n","export default function() {\n  if (typeof arguments[0].ampSpectrum !== 'object') {\n    throw new TypeError();\n  }\n\n  var powerSpectrum = new Float32Array(arguments[0].ampSpectrum.length);\n  for (var i = 0; i < powerSpectrum.length; i++) {\n    powerSpectrum[i] =  Math.pow(arguments[0].ampSpectrum[i], 2);\n  }\n\n  return powerSpectrum;\n}\n","export default function(args) {\n  if (typeof args.signal !== 'object') {\n    throw new TypeError();\n  }\n\n  var rms = 0;\n  for (var i = 0; i < args.signal.length; i++) {\n    rms += Math.pow(args.signal[i], 2);\n  }\n\n  rms = rms / args.signal.length;\n  rms = Math.sqrt(rms);\n\n  return rms;\n}\n","import {mu} from './extractorUtilities';\n\nexport default function() {\n  if (typeof arguments[0].ampSpectrum !== 'object') {\n    throw new TypeError();\n  }\n\n  return mu(1, arguments[0].ampSpectrum);\n}\n","export default function() {\n  if (typeof arguments[0].ampSpectrum !== 'object') {\n    throw new TypeError();\n  }\n\n  var numerator = 0;\n  var denominator = 0;\n  for (var i = 0; i < arguments[0].ampSpectrum.length; i++) {\n    numerator += Math.log(arguments[0].ampSpectrum[i]);\n    denominator += arguments[0].ampSpectrum[i];\n  }\n\n  return Math.exp(numerator / arguments[0].ampSpectrum.length) *\n      arguments[0].ampSpectrum.length / denominator;\n}\n","export default function(args) {\n  if (typeof args.signal !== 'object' ||\n  typeof args.previousSignal != 'object'\n\t\t) {\n    throw new TypeError();\n  }\n\n  let sf = 0;\n  for (let i = -(args.bufferSize / 2); i < signal.length / 2 - 1; i++) {\n    x = Math.abs(args.signal[i]) - Math.abs(args.previousSignal[i]);\n    sf += (x + Math.abs(x)) / 2;\n  }\n\n  return sf;\n}\n","import {mu} from './extractorUtilities';\n\nexport default function() {\n  if (typeof arguments[0].ampSpectrum !== 'object') {\n    throw new TypeError();\n  }\n\n  var ampspec = arguments[0].ampSpectrum;\n  var mu1 = mu(1, ampspec);\n  var mu2 = mu(2, ampspec);\n  var mu3 = mu(3, ampspec);\n  var mu4 = mu(4, ampspec);\n  var numerator = -3 * Math.pow(mu1, 4) + 6 * mu1 * mu2 - 4 * mu1 * mu3 + mu4;\n  var denominator = Math.pow(Math.sqrt(mu2 - Math.pow(mu1, 2)), 4);\n  return numerator / denominator;\n}\n","export default function() {\n  if (typeof arguments[0].ampSpectrum !== 'object') {\n    throw new TypeError();\n  }\n\n  var ampspec = arguments[0].ampSpectrum;\n\n  //calculate nyquist bin\n  var nyqBin = arguments[0].sampleRate / (2 * (ampspec.length - 1));\n  var ec = 0;\n  for (var i = 0; i < ampspec.length; i++) {\n    ec += ampspec[i];\n  }\n\n  var threshold = 0.99 * ec;\n  var n = ampspec.length - 1;\n  while (ec > threshold && n >= 0) {\n    ec -= ampspec[n];\n    --n;\n  }\n\n  return (n + 1) * nyqBin;\n}\n","import {mu} from './extractorUtilities';\n\nexport default function(args) {\n  if (typeof args.ampSpectrum !== 'object') {\n    throw new TypeError();\n  }\n\n  var mu1 = mu(1, args.ampSpectrum);\n  var mu2 = mu(2, args.ampSpectrum);\n  var mu3 = mu(3, args.ampSpectrum);\n  var numerator = 2 * Math.pow(mu1, 3) - 3 * mu1 * mu2 + mu3;\n  var denominator = Math.pow(Math.sqrt(mu2 - Math.pow(mu1, 2)), 3);\n  return numerator / denominator;\n}\n","export default function(args) {\n  if (typeof args.ampSpectrum !== 'object') {\n    throw new TypeError();\n  }\n\n  //linear regression\n  let ampSum = 0;\n  let freqSum = 0;\n  let freqs = new Float32Array(args.ampSpectrum.length);\n  let powFreqSum = 0;\n  let ampFreqSum = 0;\n\n  for (var i = 0; i < args.ampSpectrum.length; i++) {\n    ampSum += args.ampSpectrum[i];\n    let curFreq = i * args.sampleRate / args.bufferSize;\n    freqs[i] = curFreq;\n    powFreqSum += curFreq * curFreq;\n    freqSum += curFreq;\n    ampFreqSum += curFreq * args.ampSpectrum[i];\n  }\n\n  return (args.ampSpectrum.length * ampFreqSum - freqSum * ampSum) / (ampSum * (\n        powFreqSum - Math.pow(freqSum, 2)));\n}\n","import {mu} from './extractorUtilities';\n\nexport default function(args) {\n  if (typeof args.ampSpectrum !== 'object') {\n    throw new TypeError();\n  }\n\n  return Math.sqrt(mu(2, args.ampSpectrum) -\n         Math.pow(mu(1, args.ampSpectrum), 2));\n}\n","export default function() {\n  if (typeof arguments[0].signal !== 'object') {\n    throw new TypeError();\n  }\n\n  var zcr = 0;\n  for (var i = 1; i < arguments[0].signal.length; i++) {\n    if ((arguments[0].signal[i-1] >= 0 && arguments[0].signal[i] < 0) ||\n         (arguments[0].signal[i-1] < 0 && arguments[0].signal[i] >= 0)) {\n      zcr++;\n    }\n  }\n\n  return zcr;\n}\n","import rms from './extractors/rms';\nimport energy from './extractors/energy';\nimport spectralSlope from './extractors/spectralSlope';\nimport spectralCentroid from './extractors/spectralCentroid';\nimport spectralRolloff from './extractors/spectralRolloff';\nimport spectralFlatness from './extractors/spectralFlatness';\nimport spectralSpread from './extractors/spectralSpread';\nimport spectralSkewness from './extractors/spectralSkewness';\nimport spectralKurtosis from './extractors/spectralKurtosis';\nimport zcr from './extractors/zcr';\nimport loudness from './extractors/loudness';\nimport perceptualSpread from './extractors/perceptualSpread';\nimport perceptualSharpness from './extractors/perceptualSharpness';\nimport mfcc from './extractors/mfcc';\nimport chroma from './extractors/chroma';\nimport powerSpectrum from './extractors/powerSpectrum';\nimport spectralFlux from './extractors/spectralFlux';\n\nlet buffer = function(args) {\n  return args.signal;\n};\n\nlet complexSpectrum = function (args) {\n  return args.complexSpectrum;\n};\n\nlet amplitudeSpectrum = function (args) {\n  return args.ampSpectrum;\n};\n\nexport {\n  buffer,\n  rms,\n  energy,\n  complexSpectrum,\n\n  spectralSlope,\n  spectralCentroid,\n  spectralRolloff,\n  spectralFlatness,\n  spectralSpread,\n  spectralSkewness,\n  spectralKurtosis,\n  amplitudeSpectrum,\n\n  zcr,\n  loudness,\n  perceptualSpread,\n  perceptualSharpness,\n  powerSpectrum,\n  mfcc,\n  chroma,\n  spectralFlux\n};\n","module.exports = require('./main').default;","import * as utilities from './utilities';\nimport * as extractors from './featureExtractors';\nimport {fft, ifft} from 'fftjs';\nimport {MeydaAnalyzer} from './meyda-wa';\n\n/**\n * Meyda Module\n * @module meyda\n */\n\n/**\n * Options for constructing a MeydaAnalyzer\n * @typedef {Object} MeydaOptions\n * @property {AudioContext} audioContext - The Audio Context for the MeydaAnalyzer to operate in.\n * @property {AudioNode} source - The Audio Node for Meyda to listen to.\n * @property {number} [bufferSize] - The size of the buffer.\n * @property {number} [hopSize] - The hop size between buffers.\n * @property {number} [sampleRate] - The number of samples per second in the audio context.\n * @property {Function} [callback] - A function to receive the frames of audio features\n * @property {string} [windowingFunction] - The Windowing Function to apply to the signal before transformation to the frequency domain\n * @property {string|Array.<string>} [featureExtractors] - Specify the feature extractors you want to run on the audio.\n * @property {boolean} [startImmediately] - Pass `true` to start feature extraction immediately\n * @property {number} [numberOfMFCCCoefficients] - The number of MFCC co-efficients that the MFCC feature extractor should return\n */\n\n /**\n  * Web Audio context\n  * Either an {@link AudioContext|https://developer.mozilla.org/en-US/docs/Web/API/AudioContext}\n  * or an {@link OfflineAudioContext|https://developer.mozilla.org/en-US/docs/Web/API/OfflineAudioContext}\n  * @typedef {Object} AudioContext\n  */\n\n/**\n * AudioNode\n * A Web AudioNode\n * @typedef {Object} AudioNode\n */\n\n/**\n * ScriptProcessorNode\n * A Web Audio ScriptProcessorNode\n * @typedef {Object} ScriptProcessorNode\n */\n\n/**\n * @class Meyda\n * @hideconstructor\n * @classdesc\n * The schema for the default export of the Meyda library.\n * @example\n * var Meyda = require('meyda');\n */\nvar Meyda = {\n  /**\n   * Meyda stores a reference to the relevant audio context here for use inside\n   * the Web Audio API.\n   * @instance\n   * @member {AudioContext}\n   */\n  audioContext: null,\n  /**\n   * Meyda keeps an internal ScriptProcessorNode in which it runs audio feature\n   * extraction. The ScriptProcessorNode is stored in this member variable.\n   * @instance\n   * @member {ScriptProcessorNode}\n   */\n  spn: null,\n  /**\n   * The length of each buffer that Meyda will extract audio on. When recieving\n   * input via the Web Audio API, the Script Processor Node chunks incoming audio\n   * into arrays of this length. Longer buffers allow for more precision in the\n   * frequency domain, but increase the amount of time it takes for Meyda to\n   * output a set of audio features for the buffer. You can calculate how many\n   * sets of audio features Meyda will output per second by dividing the\n   * buffer size by the sample rate. If you're using Meyda for visualisation,\n   * make sure that you're collecting audio features at a rate that's faster\n   * than or equal to the video frame rate you expect.\n   * @instance\n   * @member {number}\n   */\n  bufferSize: 512,\n  /**\n   * The number of samples per second of the incoming audio. This affects\n   * feature extraction outside of the context of the Web Audio API, and must be\n   * set accurately - otherwise calculations will be off.\n   * @instance\n   * @member {number}\n   */\n  sampleRate: 44100,\n  /**\n   * The number of Mel bands to use in the Mel Frequency Cepstral Co-efficients\n   * feature extractor\n   * @instance\n   * @member {number}\n   */\n  melBands: 26,\n  /**\n   * The number of bands to divide the spectrum into for the Chroma feature\n   * extractor. 12 is the standard number of semitones per octave in the western\n   * music tradition, but Meyda can use an arbitrary number of bands, which\n   * can be useful for microtonal music.\n   * @instance\n   * @member {number}\n   */\n  chromaBands: 12,\n  /**\n   * A function you can provide that will be called for each buffer that Meyda\n   * receives from its source node\n   * @instance\n   * @member {Function}\n   */\n  callback: null,\n  /**\n   * Specify the windowing function to apply to the buffer before the\n   * transformation from the time domain to the frequency domain is performed\n   *\n   * The default windowing function is the hanning window.\n   *\n   * @instance\n   * @member {string}\n   */\n  windowingFunction: 'hanning',\n  /**\n   * @member {object}\n   */\n  featureExtractors: extractors,\n  EXTRACTION_STARTED: false,\n  /**\n   * The number of MFCC co-efficients that the MFCC feature extractor should return\n   * @instance\n   * @member {number}\n   */\n  numberOfMFCCCoefficients: 13,\n  _featuresToExtract: [],\n  windowing: utilities.applyWindow,\n  _errors: {\n    notPow2: new Error(\n        'Meyda: Buffer size must be a power of 2, e.g. 64 or 512'),\n    featureUndef: new Error('Meyda: No features defined.'),\n    invalidFeatureFmt: new Error('Meyda: Invalid feature format'),\n    invalidInput: new Error('Meyda: Invalid input.'),\n    noAC: new Error('Meyda: No AudioContext specified.'),\n    noSource: new Error('Meyda: No source node specified.'),\n  },\n\n  /**\n   * @summary\n   * Create a MeydaAnalyzer\n   *\n   * A factory function for creating a MeydaAnalyzer, the interface for using\n   * Meyda in the context of Web Audio.\n   *\n   * @method\n   * @param {MeydaOptions} options Options - an object containing configuration\n   * @returns {MeydaAnalyzer}\n   * @example\n   * const analyzer = Meyda.createMeydaAnalyzer({\n   *   \"audioContext\": audioContext,\n   *   \"source\": source,\n   *   \"bufferSize\": 512,\n   *   \"featureExtractors\": [\"rms\"],\n   *   \"inputs\": 2,\n   *   \"callback\": features => {\n   *     levelRangeElement.value = features.rms;\n   *   }\n   * });\n   */\n  createMeydaAnalyzer: function (options) {\n    return new MeydaAnalyzer(options, Object.assign({}, Meyda));\n  },\n\n  /**\n   * Extract an audio feature from a buffer\n   *\n   * Unless `meyda.windowingFunction` is set otherwise, `extract` will\n   * internally apply a hanning window to the buffer prior to conversion into\n   * the frequency domain.\n   *\n   * @function\n   * @param {(string|Array.<string>)} feature - the feature you want to extract\n   * @param {Array.<number>} signal\n   * An array of numbers that represents the signal. It should be of length\n   * `meyda.bufferSize`\n   * @param {Array.<number>} [previousSignal] - the previous buffer\n   * @returns {object} Features\n   * @example\n   * meyda.bufferSize = 2048;\n   * const features = meyda.extract(['zcr', 'spectralCentroid'], signal);\n   */\n  extract: function (feature, signal, previousSignal) {\n    if (!signal)\n        throw this._errors.invalidInput;\n    else if (typeof signal != 'object')\n        throw this._errors.invalidInput;\n    else if (!feature)\n        throw this._errors.featureUndef;\n    else if (!utilities.isPowerOfTwo(signal.length))\n        throw this._errors.notPow2;\n\n    if (typeof this.barkScale == 'undefined' ||\n            this.barkScale.length != this.bufferSize) {\n      this.barkScale = utilities.createBarkScale(\n          this.bufferSize,\n          this.sampleRate,\n          this.bufferSize\n      );\n    }\n\n    // Recalculate mel bank if buffer length changed\n    if (typeof this.melFilterBank == 'undefined' ||\n            this.barkScale.length != this.bufferSize ||\n            this.melFilterBank.length != this.melBands) {\n      this.melFilterBank = utilities.createMelFilterBank(\n          Math.max(this.melBands, this.numberOfMFCCCoefficients),\n          this.sampleRate,\n          this.bufferSize);\n    }\n\n    // Recalculate chroma bank if buffer length changed\n    if (typeof this.chromaFilterBank == 'undefined' ||\n            this.chromaFilterBank.length != this.chromaBands) {\n      this.chromaFilterBank = utilities.createChromaFilterBank(\n          this.chromaBands,\n          this.sampleRate,\n          this.bufferSize);\n    }\n\n    if (typeof signal.buffer == 'undefined') {\n      //signal is a normal array, convert to F32A\n      this.signal = utilities.arrayToTyped(signal);\n    } else {\n      this.signal = signal;\n    }\n\n    let preparedSignal = prepareSignalWithSpectrum(\n            signal,\n            this.windowingFunction,\n            this.bufferSize);\n\n    this.signal = preparedSignal.windowedSignal;\n    this.complexSpectrum = preparedSignal.complexSpectrum;\n    this.ampSpectrum = preparedSignal.ampSpectrum;\n\n    if (previousSignal) {\n      let preparedSignal = prepareSignalWithSpectrum(previousSignal,\n              this.windowingFunction,\n              this.bufferSize);\n\n      this.previousSignal = preparedSignal.windowedSignal;\n      this.previousComplexSpectrum = preparedSignal.complexSpectrum;\n      this.previousAmpSpectrum = preparedSignal.ampSpectrum;\n    }\n\n    const extract = (feature) => {\n      return this.featureExtractors[feature]({\n        ampSpectrum:this.ampSpectrum,\n        chromaFilterBank: this.chromaFilterBank,\n        complexSpectrum:this.complexSpectrum,\n        signal:this.signal,\n        bufferSize:this.bufferSize,\n        sampleRate:this.sampleRate,\n        barkScale:this.barkScale,\n        melFilterBank:this.melFilterBank,\n        previousSignal:this.previousSignal,\n        previousAmpSpectrum:this.previousAmpSpectrum,\n        previousComplexSpectrum:this.previousComplexSpectrum,\n        numberOfMFCCCoefficients:this.numberOfMFCCCoefficients,\n      });\n    };\n\n    if (typeof feature === 'object') {\n      return feature.reduce((acc, el) =>\n        Object.assign({}, acc, {\n          [el]: extract(el),\n        }), {});\n    } else if (typeof feature === 'string') {\n      return extract(feature);\n    } else {\n      throw this._errors.invalidFeatureFmt;\n    }\n  },\n};\n\nvar prepareSignalWithSpectrum = function (signal,\n  windowingFunction,\n  bufferSize) {\n  var preparedSignal = {};\n\n  if (typeof signal.buffer == 'undefined') {\n    //signal is a normal array, convert to F32A\n    preparedSignal.signal = utilities.arrayToTyped(signal);\n  }  else {\n    preparedSignal.signal = signal;\n  }\n\n  preparedSignal.windowedSignal = utilities.applyWindow(\n    preparedSignal.signal,\n    windowingFunction);\n\n  preparedSignal.complexSpectrum = fft(preparedSignal.windowedSignal);\n  preparedSignal.ampSpectrum = new Float32Array(bufferSize / 2);\n  for (var i = 0; i < bufferSize / 2; i++) {\n    preparedSignal.ampSpectrum[i] = Math.sqrt(\n      Math.pow(preparedSignal.complexSpectrum.real[i], 2) +\n      Math.pow(preparedSignal.complexSpectrum.imag[i], 2));\n  }\n\n  return preparedSignal;\n};\n\n/**\n * The Meyda class\n * @type {Meyda}\n */\nexport default Meyda;\n\nif (typeof window !== 'undefined') window.Meyda = Meyda;\n","import * as utilities from './utilities';\nimport * as featureExtractors from './featureExtractors';\n\n/**\n  * MeydaAnalyzer\n  * @classdesc\n  * Meyda's interface to the Web Audio API. MeydaAnalyzer abstracts an API on\n  * top of the Web Audio API's ScriptProcessorNode, running the Meyda audio\n  * feature extractors inside that context.\n  *\n  * MeydaAnalyzer's constructor should not be called directly - MeydaAnalyzer\n  * objects should be generated using the {@link Meyda.createMeydaAnalyzer}\n  * factory function in the main Meyda class.\n  *\n  * @example\n  * const analyzer = Meyda.createMeydaAnalyzer({\n  *   \"audioContext\": audioContext,\n  *   \"source\": source,\n  *   \"bufferSize\": 512,\n  *   \"featureExtractors\": [\"rms\"],\n  *   \"inputs\": 2,\n  *   \"numberOfMFCCCoefficients\": 20\n  *   \"callback\": features => {\n  *     levelRangeElement.value = features.rms;\n  *   }\n  * });\n  * @hideconstructor\n  */\nexport class MeydaAnalyzer {\n  constructor(options, _this) {\n    this._m = _this;\n    if (!options.audioContext) {\n      throw this._m.errors.noAC;\n    }\n    else if (options.bufferSize &&\n      !utilities.isPowerOfTwo(options.bufferSize)) {\n      throw this._m._errors.notPow2;\n    }\n    else if (!options.source) {\n      throw this._m._errors.noSource;\n    }\n\n    this._m.audioContext = options.audioContext;\n\n    // TODO: validate options\n    this._m.bufferSize = options.bufferSize || this._m.bufferSize || 256;\n    this._m.hopSize = options.hopSize || this._m.hopSize || this._m.bufferSize;\n    this._m.sampleRate = options.sampleRate\n      || this._m.audioContext.sampleRate || 44100;\n    this._m.callback = options.callback;\n    this._m.windowingFunction = options.windowingFunction || 'hanning';\n    this._m.featureExtractors = featureExtractors;\n    this._m.EXTRACTION_STARTED = options.startImmediately || false;\n    this._m.channel = typeof options.channel === 'number' ? options.channel : 0;\n    this._m.inputs = options.inputs || 1;\n    this._m.outputs = options.outputs || 1;\n    this._m.numberOfMFCCCoefficients = options.numberOfMFCCCoefficients || this._m.numberOfMFCCCoefficients || 13;\n\n    //create nodes\n    this._m.spn = this._m.audioContext.createScriptProcessor(\n      this._m.bufferSize,\n      this._m.inputs,\n      this._m.outputs);\n    this._m.spn.connect(this._m.audioContext.destination);\n\n    this._m._featuresToExtract = options.featureExtractors || [];\n\n    //always recalculate BS and MFB when a new Meyda analyzer is created.\n    this._m.barkScale = utilities.createBarkScale(\n      this._m.bufferSize,\n      this._m.sampleRate,\n      this._m.bufferSize);\n    this._m.melFilterBank = utilities.createMelFilterBank(\n      Math.max(this._m.melBands, this._m.numberOfMFCCCoefficients),\n      this._m.sampleRate,\n      this._m.bufferSize);\n\n    this._m.inputData = null;\n    this._m.previousInputData = null;\n\n    this._m.frame = null;\n    this._m.previousFrame = null;\n\n    this.setSource(options.source);\n\n    this._m.spn.onaudioprocess = (e)=> {\n      if (this._m.inputData !== null) {\n        this._m.previousInputData = this._m.inputData;\n      }\n\n      this._m.inputData = e.inputBuffer.getChannelData(this._m.channel);\n\n      if (!this._m.previousInputData) {\n        var buffer = this._m.inputData;\n      } else  {\n        var buffer = new Float32Array(this._m.previousInputData.length + this._m.inputData.length - this._m.hopSize);\n        buffer.set(this._m.previousInputData.slice(this._m.hopSize));\n        buffer.set(this._m.inputData, this._m.previousInputData.length - this._m.hopSize);\n      };\n\n      var frames = utilities.frame(buffer, this._m.bufferSize, this._m.hopSize);\n\n      frames.forEach(f => {\n        this._m.frame = f;\n\n        var features = this._m.extract(\n          this._m._featuresToExtract,\n          this._m.frame,\n          this._m.previousFrame);\n\n        // call callback if applicable\n        if (typeof this._m.callback === 'function' && this._m.EXTRACTION_STARTED) {\n          this._m.callback(features);\n        }\n\n        this._m.previousFrame = this._m.frame;\n      });\n    };\n  }\n\n  /**\n   * Start feature extraction\n   * The audio features will be passed to the callback function that was defined\n   * in the MeydaOptions that were passed to the factory when constructing the\n   * MeydaAnalyzer.\n   * @param {(string|Array.<string>)} [features]\n   * Change the features that Meyda is extracting. Defaults to the features that\n   * were set upon construction in the options parameter.\n   * @example\n   * analyzer.start('chroma');\n   */\n  start(features) {\n    this._m._featuresToExtract = features || this._m._featuresToExtract;\n    this._m.EXTRACTION_STARTED = true;\n  }\n\n  /**\n   * Stop feature extraction.\n   * @example\n   * analyzer.stop();\n   */\n  stop() {\n    this._m.EXTRACTION_STARTED = false;\n  }\n\n  /**\n   * Set the Audio Node for Meyda to listen to.\n   * @param {AudioNode} source - The Audio Node for Meyda to listen to\n   * @example\n   * analyzer.setSource(audioSourceNode);\n   */\n  setSource(source) {\n    this._m.source && this._m.source.disconnect(this._m.spn);\n    this._m.source = source;\n    this._m.source.connect(this._m.spn);\n  }\n\n  /**\n   * Set the channel of the audio node for Meyda to listen to\n   * @param {number} channel - the index of the channel on the input audio node\n   * for Meyda to listen to.\n   * @example\n   * analyzer.setChannel(0);\n   */\n  setChannel(channel) {\n    if (channel <= this._m.inputs) {\n      this._m.channel = channel;\n    } else {\n      console.error(`Channel ${channel} does not exist. Make sure you've provided a value for 'inputs' that is greater than ${channel} when instantiating the MeydaAnalyzer`);\n    }\n  }\n\n  /**\n   * Get a set of features from the current frame.\n   * @param {(string|Array.<string>)} [features]\n   * Change the features that Meyda is extracting\n   * @example\n   * analyzer.get('spectralFlatness');\n   */\n  get(features) {\n    if (this._m.inputData) {\n      return this._m.extract(\n              (features || this._m._featuresToExtract),\n              this._m.inputData,\n              this._m.previousInputData);\n    } else {\n      return null;\n    }\n  }\n}\n","import * as windowing from './windowing';\n\nlet windows = {};\n\nexport function isPowerOfTwo(num) {\n  while (((num % 2) === 0) && num > 1) {\n    num /= 2;\n  }\n\n  return (num === 1);\n}\n\nexport function error(message) {\n  throw new Error('Meyda: ' + message);\n}\n\nexport function pointwiseBufferMult(a, b) {\n  let c = [];\n  for (let i = 0; i < Math.min(a.length, b.length); i++) {\n    c[i] = a[i] * b[i];\n  }\n\n  return c;\n}\n\nexport function applyWindow(signal, windowname) {\n  if (windowname !== 'rect') {\n    if (windowname === '' || !windowname) windowname = 'hanning';\n    if (!windows[windowname]) windows[windowname] = {};\n\n    if (!windows[windowname][signal.length]) {\n      try {\n        windows[windowname][signal.length] = windowing[windowname](\n                    signal.length\n                );\n      }\n      catch (e) {\n        throw new Error('Invalid windowing function');\n      }\n    }\n\n    signal = pointwiseBufferMult(signal, windows[windowname][signal.length]);\n  }\n\n  return signal;\n}\n\nexport function createBarkScale(length, sampleRate, bufferSize) {\n  let barkScale = new Float32Array(length);\n\n  for (var i = 0; i < barkScale.length; i++) {\n    barkScale[i] = i * sampleRate / (bufferSize);\n    barkScale[i] = 13 * Math.atan(barkScale[i] / 1315.8) +\n            3.5 * Math.atan(Math.pow((barkScale[i] / 7518), 2));\n  }\n\n  return barkScale;\n}\n\nexport function typedToArray(t) {\n  // utility to convert typed arrays to normal arrays\n  return Array.prototype.slice.call(t);\n}\n\nexport function arrayToTyped(t) {\n  // utility to convert arrays to typed F32 arrays\n  return Float32Array.from(t);\n}\n\nexport function _normalize(num, range) {\n  return num / range;\n}\n\nexport function normalize(a, range) {\n  return a.map(function (n) { return _normalize(n, range); });\n}\n\nexport function normalizeToOne(a) {\n  var max = Math.max.apply(null, a);\n\n  return a.map(function (n) {\n    return n / max;\n  });\n}\n\nexport function mean(a) {\n  return a.reduce(function (prev, cur) {  return prev + cur;  }) / a.length;\n}\n\nfunction _melToFreq(melValue) {\n  var freqValue = 700 * (Math.exp(melValue / 1125) - 1);\n  return freqValue;\n}\n\nfunction _freqToMel(freqValue) {\n  var melValue = 1125 * Math.log(1 + (freqValue / 700));\n  return melValue;\n}\n\nexport function melToFreq(mV) { return _melToFreq(mV); }\n\nexport function freqToMel(fV) { return _freqToMel(fV); }\n\nexport function createMelFilterBank(numFilters, sampleRate, bufferSize) {\n  //the +2 is the upper and lower limits\n  let melValues = new Float32Array(numFilters + 2);\n  let melValuesInFreq = new Float32Array(numFilters + 2);\n\n  //Generate limits in Hz - from 0 to the nyquist.\n  let lowerLimitFreq = 0;\n  let upperLimitFreq = sampleRate / 2;\n\n  //Convert the limits to Mel\n  let lowerLimitMel = _freqToMel(lowerLimitFreq);\n  let upperLimitMel = _freqToMel(upperLimitFreq);\n\n  //Find the range\n  let range = upperLimitMel - lowerLimitMel;\n\n  //Find the range as part of the linear interpolation\n  let valueToAdd = range / (numFilters + 1);\n\n  let fftBinsOfFreq = Array(numFilters + 2);\n\n  for (let i = 0; i < melValues.length; i++) {\n    // Initialising the mel frequencies\n    // They're a linear interpolation between the lower and upper limits.\n    melValues[i] = i * valueToAdd;\n\n    // Convert back to Hz\n    melValuesInFreq[i] = _melToFreq(melValues[i]);\n\n    // Find the corresponding bins\n    fftBinsOfFreq[i] = Math.floor((bufferSize + 1) *\n                           melValuesInFreq[i] / sampleRate);\n  }\n\n  var filterBank = Array(numFilters);\n  for (let j = 0; j < filterBank.length; j++) {\n    // Create a two dimensional array of size numFilters * (buffersize/2)+1\n    // pre-populating the arrays with 0s.\n    filterBank[j] = Array.apply(\n            null,\n            new Array((bufferSize / 2) + 1)).map(Number.prototype.valueOf, 0);\n\n    //creating the lower and upper slopes for each bin\n    for (let i = fftBinsOfFreq[j]; i < fftBinsOfFreq[j + 1]; i++) {\n      filterBank[j][i] = (i - fftBinsOfFreq[j]) /\n                (fftBinsOfFreq[j + 1] - fftBinsOfFreq[j]);\n    }\n\n    for (let i = fftBinsOfFreq[j + 1]; i < fftBinsOfFreq[j + 2]; i++) {\n      filterBank[j][i] = (fftBinsOfFreq[j + 2] - i) /\n                (fftBinsOfFreq[j + 2] - fftBinsOfFreq[j + 1]);\n    }\n  }\n\n  return filterBank;\n}\n\nexport function hzToOctaves(freq, A440) {\n  return Math.log2(16 * freq / A440);\n}\n\nexport function normalizeByColumn (a) {\n  var emptyRow = a[0].map(() => 0);\n  var colDenominators = a.reduce((acc, row) => {\n    row.forEach((cell, j) => {\n      acc[j] += Math.pow(cell, 2);\n    });\n    return acc;\n  }, emptyRow).map(Math.sqrt);\n  return a.map((row, i) => row.map((v, j) => v / (colDenominators[j] || 1) ));\n};\n\nexport function createChromaFilterBank(numFilters, sampleRate, bufferSize, centerOctave=5, octaveWidth=2, baseC=true, A440=440) {\n  var numOutputBins = Math.floor(bufferSize / 2) + 1;\n\n\n  var frequencyBins = new Array(bufferSize).fill(0)\n    .map((_, i) => numFilters * hzToOctaves(sampleRate * i / bufferSize, A440));\n\n  // Set a value for the 0 Hz bin that is 1.5 octaves below bin 1\n  // (so chroma is 50% rotated from bin 1, and bin width is broad)\n  frequencyBins[0] = frequencyBins[1] - 1.5 * numFilters;\n\n  var binWidthBins = frequencyBins\n    .slice(1)\n    .map((v, i) => Math.max(v - frequencyBins[i]), 1)\n    .concat([1]);\n\n  var halfNumFilters = Math.round(numFilters / 2);\n\n  var filterPeaks = new Array(numFilters).fill(0)\n    .map((_, i) => frequencyBins.map(frq =>\n      ((10 * numFilters + halfNumFilters + frq - i) % numFilters) - halfNumFilters\n    ));\n\n  var weights = filterPeaks.map((row, i) => row.map((_, j) => (\n    Math.exp(-0.5 * Math.pow(2 * filterPeaks[i][j] / binWidthBins[j], 2))\n  )));\n\n  weights = normalizeByColumn(weights);\n\n  if (octaveWidth) {\n    var octaveWeights = frequencyBins.map(v =>\n      Math.exp(-0.5 * Math.pow((v / numFilters - centerOctave) / octaveWidth, 2))\n    );\n    weights = weights.map(row => row.map((cell, j) => cell * octaveWeights[j]));\n  }\n\n  if (baseC) {\n    weights = [...weights.slice(3), ...weights.slice(0, 3)];\n  }\n\n  return weights.map(row => row.slice(0, numOutputBins));\n}\n\nexport function frame(buffer, frameLength, hopLength) {\n  if (buffer.length < frameLength) {\n    throw new Error('Buffer is too short for frame length');\n  }\n  if (hopLength < 1) {\n    throw new Error('Hop length cannot be less that 1');\n  }\n  if (frameLength < 1) {\n    throw new Error('Frame length cannot be less that 1');\n  }\n\n  const numFrames = 1 + Math.floor((buffer.length - frameLength) / hopLength);\n\n  return new Array(numFrames).fill(0).map((_, i) =>\n    buffer.slice(i * hopLength, (i * hopLength) + frameLength));\n}\n","export function blackman(size) {\n  let blackmanBuffer = new Float32Array(size);\n  let coeff1 = 2 * Math.PI / (size - 1);\n  let coeff2 = 2 * coeff1;\n\n  //According to http://uk.mathworks.com/help/signal/ref/blackman.html\n  //first half of the window\n  for (let i = 0; i < size / 2; i++) {\n    blackmanBuffer[i] = 0.42 - 0.5 * Math.cos(i * coeff1) +\n            0.08 * Math.cos(i * coeff2);\n  }\n\n  //second half of the window\n  for (let i = size / 2; i > 0; i--) {\n    blackmanBuffer[size - i] = blackmanBuffer[i - 1];\n  }\n\n  return blackmanBuffer;\n}\n\nexport function sine(size) {\n  let coeff = Math.PI / (size - 1);\n  let sineBuffer = new Float32Array(size);\n\n  for (let i = 0; i < size; i++) {\n    sineBuffer[i] = Math.sin(coeff * i);\n  }\n\n  return sineBuffer;\n}\n\nexport function hanning(size) {\n  let hanningBuffer = new Float32Array(size);\n  for (let i = 0; i < size; i++) {\n    // According to the R documentation\n    // http://ugrad.stat.ubc.ca/R/library/e1071/html/hanning.window.html\n    hanningBuffer[i] = 0.5 - 0.5 * Math.cos(2 * Math.PI * i / (size - 1));\n  }\n\n  return hanningBuffer;\n}\n\nexport function hamming(size) {\n  let hammingBuffer = new Float32Array(size);\n  for (let i = 0; i < size; i++) {\n    //According to http://uk.mathworks.com/help/signal/ref/hamming.html\n    hammingBuffer[i] = 0.54 - 0.46 * Math.cos(2 * Math.PI * (i / size - 1));\n  }\n\n  return hammingBuffer;\n}\n","const Meyda = require('meyda')\n\nclass Audio {\n  constructor ({\n    numBins = 4,\n    cutoff = 2,\n    smooth = 0.4,\n    max = 15,\n    scale = 10,\n    isDrawing = false\n  }) {\n    this.vol = 0\n    this.scale = scale\n    this.max = max\n    this.cutoff = cutoff\n    this.smooth = smooth\n    this.setBins(numBins)\n\n    // beat detection from: https://github.com/therewasaguy/p5-music-viz/blob/gh-pages/demos/01d_beat_detect_amplitude/sketch.js\n    this.beat = {\n      holdFrames: 20,\n      threshold: 40,\n      _cutoff: 0, // adaptive based on sound state\n      decay: 0.98,\n      _framesSinceBeat: 0 // keeps track of frames\n    }\n\n    this.onBeat = () => {\n    //  console.log(\"beat\")\n    }\n\n    this.canvas = document.createElement('canvas')\n    this.canvas.width = 100\n    this.canvas.height = 80\n    this.canvas.style.width = \"100px\"\n    this.canvas.style.height = \"80px\"\n    this.canvas.style.position = 'absolute'\n    this.canvas.style.right = '0px'\n    this.canvas.style.bottom = '0px'\n    document.body.appendChild(this.canvas)\n\n    this.isDrawing = isDrawing\n    this.ctx = this.canvas.getContext('2d')\n    this.ctx.fillStyle=\"#DFFFFF\"\n    this.ctx.strokeStyle=\"#0ff\"\n    this.ctx.lineWidth=0.5\n\n    window.navigator.mediaDevices.getUserMedia({video: false, audio: true})\n      .then((stream) => {\n      //  console.log('got mic stream', stream)\n        this.stream = stream\n        this.context = new AudioContext()\n        //  this.context = new AudioContext()\n        let audio_stream = this.context.createMediaStreamSource(stream)\n\n      //  console.log(this.context)\n        this.meyda = Meyda.createMeydaAnalyzer({\n          audioContext: this.context,\n          source: audio_stream,\n          featureExtractors: [\n            'loudness',\n            //  'perceptualSpread',\n            //  'perceptualSharpness',\n            //  'spectralCentroid'\n          ]\n        })\n      })\n      .catch((err) => console.log('ERROR', err))\n  }\n\n  detectBeat (level) {\n    //console.log(level,   this.beat._cutoff)\n    if (level > this.beat._cutoff && level > this.beat.threshold) {\n      this.onBeat()\n      this.beat._cutoff = level *1.2\n      this.beat._framesSinceBeat = 0\n    } else {\n      if (this.beat._framesSinceBeat <= this.beat.holdFrames){\n        this.beat._framesSinceBeat ++;\n      } else {\n        this.beat._cutoff *= this.beat.decay\n        this.beat._cutoff = Math.max(  this.beat._cutoff, this.beat.threshold);\n      }\n    }\n  }\n\n  tick() {\n   if(this.meyda){\n     var features = this.meyda.get()\n     if(features && features !== null){\n       this.vol = features.loudness.total\n       this.detectBeat(this.vol)\n       // reduce loudness array to number of bins\n       const reducer = (accumulator, currentValue) => accumulator + currentValue;\n       let spacing = Math.floor(features.loudness.specific.length/this.bins.length)\n       this.prevBins = this.bins.slice(0)\n       this.bins = this.bins.map((bin, index) => {\n         return features.loudness.specific.slice(index * spacing, (index + 1)*spacing).reduce(reducer)\n       }).map((bin, index) => {\n         // map to specified range\n\n        // return (bin * (1.0 - this.smooth) + this.prevBins[index] * this.smooth)\n          return (bin * (1.0 - this.settings[index].smooth) + this.prevBins[index] * this.settings[index].smooth)\n       })\n       // var y = this.canvas.height - scale*this.settings[index].cutoff\n       // this.ctx.beginPath()\n       // this.ctx.moveTo(index*spacing, y)\n       // this.ctx.lineTo((index+1)*spacing, y)\n       // this.ctx.stroke()\n       //\n       // var yMax = this.canvas.height - scale*(this.settings[index].scale + this.settings[index].cutoff)\n       this.fft = this.bins.map((bin, index) => (\n        // Math.max(0, (bin - this.cutoff) / (this.max - this.cutoff))\n         Math.max(0, (bin - this.settings[index].cutoff)/this.settings[index].scale)\n       ))\n       if(this.isDrawing) this.draw()\n     }\n   }\n  }\n\n  setCutoff (cutoff) {\n    this.cutoff = cutoff\n    this.settings = this.settings.map((el) => {\n      el.cutoff = cutoff\n      return el\n    })\n  }\n\n  setSmooth (smooth) {\n    this.smooth = smooth\n    this.settings = this.settings.map((el) => {\n      el.smooth = smooth\n      return el\n    })\n  }\n\n  setBins (numBins) {\n    this.bins = Array(numBins).fill(0)\n    this.prevBins = Array(numBins).fill(0)\n    this.fft = Array(numBins).fill(0)\n    this.settings = Array(numBins).fill(0).map(() => ({\n      cutoff: this.cutoff,\n      scale: this.scale,\n      smooth: this.smooth\n    }))\n    // to do: what to do in non-global mode?\n    this.bins.forEach((bin, index) => {\n      window['a' + index] = (scale = 1, offset = 0) => () => (a.fft[index] * scale + offset)\n    })\n  //  console.log(this.settings)\n  }\n\n  setScale(scale){\n    this.scale = scale\n    this.settings = this.settings.map((el) => {\n      el.scale = scale\n      return el\n    })\n  }\n\n  setMax(max) {\n    this.max = max\n    console.log('set max is deprecated')\n  }\n  hide() {\n    this.isDrawing = false\n    this.canvas.style.display = 'none'\n  }\n\n  show() {\n    this.isDrawing = true\n    this.canvas.style.display = 'block'\n\n  }\n\n  draw () {\n    this.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height)\n    var spacing = this.canvas.width / this.bins.length\n    var scale = this.canvas.height / (this.max * 2)\n  //  console.log(this.bins)\n    this.bins.forEach((bin, index) => {\n\n      var height = bin * scale\n\n     this.ctx.fillRect(index * spacing, this.canvas.height - height, spacing, height)\n\n  //   console.log(this.settings[index])\n     var y = this.canvas.height - scale*this.settings[index].cutoff\n     this.ctx.beginPath()\n     this.ctx.moveTo(index*spacing, y)\n     this.ctx.lineTo((index+1)*spacing, y)\n     this.ctx.stroke()\n\n     var yMax = this.canvas.height - scale*(this.settings[index].scale + this.settings[index].cutoff)\n     this.ctx.beginPath()\n     this.ctx.moveTo(index*spacing, yMax)\n     this.ctx.lineTo((index+1)*spacing, yMax)\n     this.ctx.stroke()\n    })\n\n\n    /*var y = this.canvas.height - scale*this.cutoff\n    this.ctx.beginPath()\n    this.ctx.moveTo(0, y)\n    this.ctx.lineTo(this.canvas.width, y)\n    this.ctx.stroke()\n    var yMax = this.canvas.height - scale*this.max\n    this.ctx.beginPath()\n    this.ctx.moveTo(0, yMax)\n    this.ctx.lineTo(this.canvas.width, yMax)\n    this.ctx.stroke()*/\n  }\n}\n\nmodule.exports = Audio\n","class VideoRecorder {\n  constructor(stream) {\n    this.mediaSource = new MediaSource()\n    this.stream = stream\n\n    // testing using a recording as input\n    this.output = document.createElement('video')\n    this.output.autoplay = true\n    this.output.loop = true\n\n    let self = this\n    this.mediaSource.addEventListener('sourceopen', () => {\n      console.log('MediaSource opened');\n      self.sourceBuffer = self.mediaSource.addSourceBuffer('video/webm; codecs=\"vp8\"');\n      console.log('Source buffer: ', sourceBuffer);\n    })\n  }\n\n  start() {\n  //  let options = {mimeType: 'video/webm'};\n\n//   let options = {mimeType: 'video/webm;codecs=h264'};\n   let options = {mimeType: 'video/webm;codecs=vp9'};\n\n    this.recordedBlobs = []\n    try {\n     this.mediaRecorder = new MediaRecorder(this.stream, options)\n    } catch (e0) {\n     console.log('Unable to create MediaRecorder with options Object: ', e0)\n     try {\n       options = {mimeType: 'video/webm,codecs=vp9'}\n       this.mediaRecorder = new MediaRecorder(this.stream, options)\n     } catch (e1) {\n       console.log('Unable to create MediaRecorder with options Object: ', e1)\n       try {\n         options = 'video/vp8' // Chrome 47\n         this.mediaRecorder = new MediaRecorder(this.stream, options)\n       } catch (e2) {\n         alert('MediaRecorder is not supported by this browser.\\n\\n' +\n           'Try Firefox 29 or later, or Chrome 47 or later, ' +\n           'with Enable experimental Web Platform features enabled from chrome://flags.')\n         console.error('Exception while creating MediaRecorder:', e2)\n         return\n       }\n     }\n   }\n   console.log('Created MediaRecorder', this.mediaRecorder, 'with options', options);\n   this.mediaRecorder.onstop = this._handleStop.bind(this)\n   this.mediaRecorder.ondataavailable = this._handleDataAvailable.bind(this)\n   this.mediaRecorder.start(100) // collect 100ms of data\n   console.log('MediaRecorder started', this.mediaRecorder)\n }\n\n  \n   stop(){\n     this.mediaRecorder.stop()\n   }\n\n _handleStop() {\n   //const superBuffer = new Blob(recordedBlobs, {type: 'video/webm'})\n   // const blob = new Blob(this.recordedBlobs, {type: 'video/webm;codecs=h264'})\n  const blob = new Blob(this.recordedBlobs, {type: this.mediaRecorder.mimeType})\n   const url = window.URL.createObjectURL(blob)\n   this.output.src = url\n\n    const a = document.createElement('a')\n    a.style.display = 'none'\n    a.href = url\n    let d = new Date()\n    a.download = `hydra-${d.getFullYear()}-${d.getMonth() + 1}-${d.getDate()}-${d.getHours()}.${d.getMinutes()}.${d.getSeconds()}.webm`\n    document.body.appendChild(a)\n    a.click()\n    setTimeout(() => {\n      document.body.removeChild(a);\n      window.URL.revokeObjectURL(url);\n    }, 300);\n  }\n\n  _handleDataAvailable(event) {\n    if (event.data && event.data.size > 0) {\n      this.recordedBlobs.push(event.data);\n    }\n  }\n}\n\nmodule.exports = VideoRecorder\n","// from https://gist.github.com/gre/1650294\n\nmodule.exports = {\n  // no easing, no acceleration\n  linear: function (t) { return t },\n  // accelerating from zero velocity\n  easeInQuad: function (t) { return t*t },\n  // decelerating to zero velocity\n  easeOutQuad: function (t) { return t*(2-t) },\n  // acceleration until halfway, then deceleration\n  easeInOutQuad: function (t) { return t<.5 ? 2*t*t : -1+(4-2*t)*t },\n  // accelerating from zero velocity\n  easeInCubic: function (t) { return t*t*t },\n  // decelerating to zero velocity\n  easeOutCubic: function (t) { return (--t)*t*t+1 },\n  // acceleration until halfway, then deceleration\n  easeInOutCubic: function (t) { return t<.5 ? 4*t*t*t : (t-1)*(2*t-2)*(2*t-2)+1 },\n  // accelerating from zero velocity\n  easeInQuart: function (t) { return t*t*t*t },\n  // decelerating to zero velocity\n  easeOutQuart: function (t) { return 1-(--t)*t*t*t },\n  // acceleration until halfway, then deceleration\n  easeInOutQuart: function (t) { return t<.5 ? 8*t*t*t*t : 1-8*(--t)*t*t*t },\n  // accelerating from zero velocity\n  easeInQuint: function (t) { return t*t*t*t*t },\n  // decelerating to zero velocity\n  easeOutQuint: function (t) { return 1+(--t)*t*t*t*t },\n  // acceleration until halfway, then deceleration\n  easeInOutQuint: function (t) { return t<.5 ? 16*t*t*t*t*t : 1+16*(--t)*t*t*t*t },\n  // sin shape\n  sin: function (t) { return (1 + Math.sin(Math.PI*t-Math.PI/2))/2 }\n}\n","// WIP utils for working with arrays\n// Possibly should be integrated with lfo extension, etc.\n// to do: transform time rather than array values, similar to working with coordinates in hydra\n\nvar easing = require('./easing-functions.js')\n\nvar map = (num, in_min, in_max, out_min, out_max) => {\n  return (num - in_min) * (out_max - out_min) / (in_max - in_min) + out_min;\n}\n\nmodule.exports = {\n  init: () => {\n\n    Array.prototype.fast = function(speed = 1) {\n      this._speed = speed\n      return this\n    }\n\n    Array.prototype.smooth = function(smooth = 1) {\n      this._smooth = smooth\n      return this\n    }\n\n    Array.prototype.ease = function(ease = 'linear') {\n      if (typeof ease == 'function') {\n        this._smooth = 1\n        this._ease = ease\n      }\n      else if (easing[ease]){\n        this._smooth = 1\n        this._ease = easing[ease]\n      }\n      return this\n    }\n\n    Array.prototype.offset = function(offset = 0.5) {\n      this._offset = offset%1.0\n      return this\n    }\n\n    // Array.prototype.bounce = function() {\n    //   this.modifiers.bounce = true\n    //   return this\n    // }\n\n    Array.prototype.fit = function(low = 0, high =1) {\n      let lowest = Math.min(...this)\n      let highest =  Math.max(...this)\n      var newArr = this.map((num) => map(num, lowest, highest, low, high))\n      newArr._speed = this._speed\n      newArr._smooth = this._smooth\n      newArr._ease = this._ease\n      return newArr\n    }\n  },\n\n  getValue: (arr = []) => ({time, bpm}) =>{\n    let speed = arr._speed ? arr._speed : 1\n    let smooth = arr._smooth ? arr._smooth : 0\n    let index = time * speed * (bpm / 60) + (arr._offset || 0)\n\n    if (smooth!==0) {\n      let ease = arr._ease ? arr._ease : easing['linear']\n      let _index = index - (smooth / 2)\n      let currValue = arr[Math.floor(_index % (arr.length))]\n      let nextValue = arr[Math.floor((_index + 1) % (arr.length))]\n      let t = Math.min((_index%1)/smooth,1)\n      return ease(t) * (nextValue - currValue) + currValue\n    }\n    else {\n      return arr[Math.floor(index % (arr.length))]\n    }\n  }\n}\n","// attempt custom evaluation sandbox for hydra functions\n// for now, just avoids polluting the global namespace\n// should probably be replaced with an abstract syntax tree\n\nmodule.exports = (parent) => {\n  var initialCode = ``\n\n  var sandbox = createSandbox(initialCode)\n\n  var addToContext = (name, object) => {\n    initialCode += `\n      var ${name} = ${object}\n    `\n    sandbox = createSandbox(initialCode)\n  }\n\n\n  return {\n    addToContext: addToContext,\n    eval: (code) => sandbox.eval(code)\n  }\n\n  function createSandbox (initial) {\n    eval(initial)\n    // optional params\n    var localEval = function (code)  {\n      eval(code)\n    }\n\n    // API/data for end-user\n    return {\n      eval: localEval\n    }\n  }\n}\n","// handles code evaluation and attaching relevant objects to global and evaluation contexts\n\nconst Sandbox = require('./lib/sandbox.js')\nconst ArrayUtils = require('./lib/array-utils.js')\n\nclass EvalSandbox {\n  constructor(parent, makeGlobal, userProps = []) {\n    this.makeGlobal = makeGlobal\n    this.sandbox = Sandbox(parent)\n    this.parent = parent\n    var properties = Object.keys(parent)\n    properties.forEach((property) => this.add(property))\n    this.userProps = userProps\n  }\n\n  add(name) {\n    if(this.makeGlobal) window[name] = this.parent[name]\n    this.sandbox.addToContext(name, `parent.${name}`)\n  }\n\n// sets on window as well as synth object if global (not needed for objects, which can be set directly)\n\n  set(property, value) {\n    if(this.makeGlobal) {\n      window[property] = value\n    }\n    this.parent[property] = value\n  }\n\n  tick() {\n    if(this.makeGlobal) {\n      this.userProps.forEach((property) => {\n        this.parent[property] = window[property]\n      })\n      //  this.parent.speed = window.speed\n    } else {\n\n    }\n  }\n\n  eval(code) {\n    this.sandbox.eval(code)\n  }\n}\n\nmodule.exports = EvalSandbox\n","/*\nFormat for adding functions to hydra. For each entry in this file, hydra automatically generates a glsl function and javascript function with the same name. You can also ass functions dynamically using setFunction(object).\n\n{\n  name: 'osc', // name that will be used to access function in js as well as in glsl\n  type: 'src', // can be 'src', 'color', 'combine', 'combineCoords'. see below for more info\n  inputs: [\n    {\n      name: 'freq',\n      type: 'float',\n      default: 0.2\n    },\n    {\n      name: 'sync',\n      type: 'float',\n      default: 0.1\n    },\n    {\n      name: 'offset',\n      type: 'float',\n      default: 0.0\n    }\n  ],\n    glsl: `\n      vec2 st = _st;\n      float r = sin((st.x-offset*2/freq+time*sync)*freq)*0.5  + 0.5;\n      float g = sin((st.x+time*sync)*freq)*0.5 + 0.5;\n      float b = sin((st.x+offset/freq+time*sync)*freq)*0.5  + 0.5;\n      return vec4(r, g, b, 1.0);\n   `\n}\n\n// The above code generates the glsl function:\n`vec4 osc(vec2 _st, float freq, float sync, float offset){\n vec2 st = _st;\n float r = sin((st.x-offset*2/freq+time*sync)*freq)*0.5  + 0.5;\n float g = sin((st.x+time*sync)*freq)*0.5 + 0.5;\n float b = sin((st.x+offset/freq+time*sync)*freq)*0.5  + 0.5;\n return vec4(r, g, b, 1.0);\n}`\n\n\nTypes and default arguments for hydra functions.\nThe value in the 'type' field lets the parser know which type the function will be returned as well as default arguments.\n\nconst types = {\n  'src': {\n    returnType: 'vec4',\n    args: ['vec2 _st']\n  },\n  'coord': {\n    returnType: 'vec2',\n    args: ['vec2 _st']\n  },\n  'color': {\n    returnType: 'vec4',\n    args: ['vec4 _c0']\n  },\n  'combine': {\n    returnType: 'vec4',\n    args: ['vec4 _c0', 'vec4 _c1']\n  },\n  'combineCoord': {\n    returnType: 'vec2',\n    args: ['vec2 _st', 'vec4 _c0']\n  }\n}\n\n*/\n\nmodule.exports = [\n  {\n  name: 'noise',\n  type: 'src',\n  inputs: [\n    {\n      type: 'float',\n      name: 'scale',\n      default: 10,\n    },\n{\n      type: 'float',\n      name: 'offset',\n      default: 0.1,\n    }\n  ],\n  glsl:\n`   return vec4(vec3(_noise(vec3(_st*scale, offset*time))), 1.0);`\n},\n{\n  name: 'voronoi',\n  type: 'src',\n  inputs: [\n    {\n      type: 'float',\n      name: 'scale',\n      default: 5,\n    },\n{\n      type: 'float',\n      name: 'speed',\n      default: 0.3,\n    },\n{\n      type: 'float',\n      name: 'blending',\n      default: 0.3,\n    }\n  ],\n  glsl:\n`   vec3 color = vec3(.0);\n   // Scale\n   _st *= scale;\n   // Tile the space\n   vec2 i_st = floor(_st);\n   vec2 f_st = fract(_st);\n   float m_dist = 10.;  // minimun distance\n   vec2 m_point;        // minimum point\n   for (int j=-1; j<=1; j++ ) {\n   for (int i=-1; i<=1; i++ ) {\n   vec2 neighbor = vec2(float(i),float(j));\n   vec2 p = i_st + neighbor;\n   vec2 point = fract(sin(vec2(dot(p,vec2(127.1,311.7)),dot(p,vec2(269.5,183.3))))*43758.5453);\n   point = 0.5 + 0.5*sin(time*speed + 6.2831*point);\n   vec2 diff = neighbor + point - f_st;\n   float dist = length(diff);\n   if( dist < m_dist ) {\n   m_dist = dist;\n   m_point = point;\n   }\n   }\n   }\n   // Assign a color using the closest point position\n   color += dot(m_point,vec2(.3,.6));\n   color *= 1.0 - blending*m_dist;\n   return vec4(color, 1.0);`\n},\n{\n  name: 'osc',\n  type: 'src',\n  inputs: [\n    {\n      type: 'float',\n      name: 'frequency',\n      default: 60,\n    },\n{\n      type: 'float',\n      name: 'sync',\n      default: 0.1,\n    },\n{\n      type: 'float',\n      name: 'offset',\n      default: 0,\n    }\n  ],\n  glsl:\n`   vec2 st = _st;\n   float r = sin((st.x-offset/frequency+time*sync)*frequency)*0.5  + 0.5;\n   float g = sin((st.x+time*sync)*frequency)*0.5 + 0.5;\n   float b = sin((st.x+offset/frequency+time*sync)*frequency)*0.5  + 0.5;\n   return vec4(r, g, b, 1.0);`\n},\n{\n  name: 'shape',\n  type: 'src',\n  inputs: [\n    {\n      type: 'float',\n      name: 'sides',\n      default: 3,\n    },\n{\n      type: 'float',\n      name: 'radius',\n      default: 0.3,\n    },\n{\n      type: 'float',\n      name: 'smoothing',\n      default: 0.01,\n    }\n  ],\n  glsl:\n`   vec2 st = _st * 2. - 1.;\n   // Angle and radius from the current pixel\n   float a = atan(st.x,st.y)+3.1416;\n   float r = (2.*3.1416)/sides;\n   float d = cos(floor(.5+a/r)*r-a)*length(st);\n   return vec4(vec3(1.0-smoothstep(radius,radius + smoothing + 0.0000001,d)), 1.0);`\n},\n{\n  name: 'gradient',\n  type: 'src',\n  inputs: [\n    {\n      type: 'float',\n      name: 'speed',\n      default: 0,\n    }\n  ],\n  glsl:\n`   return vec4(_st, sin(time*speed), 1.0);`\n},\n{\n  name: 'src',\n  type: 'src',\n  inputs: [\n    {\n      type: 'sampler2D',\n      name: 'tex',\n      default: NaN,\n    }\n  ],\n  glsl:\n`   //  vec2 uv = gl_FragCoord.xy/vec2(1280., 720.);\n   return texture2D(tex, fract(_st));`\n},\n{\n  name: 'solid',\n  type: 'src',\n  inputs: [\n    {\n      type: 'float',\n      name: 'r',\n      default: 0,\n    },\n{\n      type: 'float',\n      name: 'g',\n      default: 0,\n    },\n{\n      type: 'float',\n      name: 'b',\n      default: 0,\n    },\n{\n      type: 'float',\n      name: 'a',\n      default: 1,\n    }\n  ],\n  glsl:\n`   return vec4(r, g, b, a);`\n},\n{\n  name: 'rotate',\n  type: 'coord',\n  inputs: [\n    {\n      type: 'float',\n      name: 'angle',\n      default: 10,\n    },\n{\n      type: 'float',\n      name: 'speed',\n      default: 0,\n    }\n  ],\n  glsl:\n`   vec2 xy = _st - vec2(0.5);\n   float ang = angle + speed *time;\n   xy = mat2(cos(ang),-sin(ang), sin(ang),cos(ang))*xy;\n   xy += 0.5;\n   return xy;`\n},\n{\n  name: 'scale',\n  type: 'coord',\n  inputs: [\n    {\n      type: 'float',\n      name: 'amount',\n      default: 1.5,\n    },\n{\n      type: 'float',\n      name: 'xMult',\n      default: 1,\n    },\n{\n      type: 'float',\n      name: 'yMult',\n      default: 1,\n    },\n{\n      type: 'float',\n      name: 'offsetX',\n      default: 0.5,\n    },\n{\n      type: 'float',\n      name: 'offsetY',\n      default: 0.5,\n    }\n  ],\n  glsl:\n`   vec2 xy = _st - vec2(offsetX, offsetY);\n   xy*=(1.0/vec2(amount*xMult, amount*yMult));\n   xy+=vec2(offsetX, offsetY);\n   return xy;\n   `\n},\n{\n  name: 'pixelate',\n  type: 'coord',\n  inputs: [\n    {\n      type: 'float',\n      name: 'pixelX',\n      default: 20,\n    },\n{\n      type: 'float',\n      name: 'pixelY',\n      default: 20,\n    }\n  ],\n  glsl:\n`   vec2 xy = vec2(pixelX, pixelY);\n   return (floor(_st * xy) + 0.5)/xy;`\n},\n{\n  name: 'posterize',\n  type: 'color',\n  inputs: [\n    {\n      type: 'float',\n      name: 'bins',\n      default: 3,\n    },\n{\n      type: 'float',\n      name: 'gamma',\n      default: 0.6,\n    }\n  ],\n  glsl:\n`   vec4 c2 = pow(_c0, vec4(gamma));\n   c2 *= vec4(bins);\n   c2 = floor(c2);\n   c2/= vec4(bins);\n   c2 = pow(c2, vec4(1.0/gamma));\n   return vec4(c2.xyz, _c0.a);`\n},\n{\n  name: 'shift',\n  type: 'color',\n  inputs: [\n    {\n      type: 'float',\n      name: 'r',\n      default: 0.5,\n    },\n{\n      type: 'float',\n      name: 'g',\n      default: 0,\n    },\n{\n      type: 'float',\n      name: 'b',\n      default: 0,\n    },\n{\n      type: 'float',\n      name: 'a',\n      default: 0,\n    }\n  ],\n  glsl:\n`   vec4 c2 = vec4(_c0);\n   c2.r = fract(c2.r + r);\n   c2.g = fract(c2.g + g);\n   c2.b = fract(c2.b + b);\n   c2.a = fract(c2.a + a);\n   return vec4(c2.rgba);`\n},\n{\n  name: 'repeat',\n  type: 'coord',\n  inputs: [\n    {\n      type: 'float',\n      name: 'repeatX',\n      default: 3,\n    },\n{\n      type: 'float',\n      name: 'repeatY',\n      default: 3,\n    },\n{\n      type: 'float',\n      name: 'offsetX',\n      default: 0,\n    },\n{\n      type: 'float',\n      name: 'offsetY',\n      default: 0,\n    }\n  ],\n  glsl:\n`   vec2 st = _st * vec2(repeatX, repeatY);\n   st.x += step(1., mod(st.y,2.0)) * offsetX;\n   st.y += step(1., mod(st.x,2.0)) * offsetY;\n   return fract(st);`\n},\n{\n  name: 'modulateRepeat',\n  type: 'combineCoord',\n  inputs: [\n    {\n      type: 'float',\n      name: 'repeatX',\n      default: 3,\n    },\n{\n      type: 'float',\n      name: 'repeatY',\n      default: 3,\n    },\n{\n      type: 'float',\n      name: 'offsetX',\n      default: 0.5,\n    },\n{\n      type: 'float',\n      name: 'offsetY',\n      default: 0.5,\n    }\n  ],\n  glsl:\n`   vec2 st = _st * vec2(repeatX, repeatY);\n   st.x += step(1., mod(st.y,2.0)) + _c0.r * offsetX;\n   st.y += step(1., mod(st.x,2.0)) + _c0.g * offsetY;\n   return fract(st);`\n},\n{\n  name: 'repeatX',\n  type: 'coord',\n  inputs: [\n    {\n      type: 'float',\n      name: 'reps',\n      default: 3,\n    },\n{\n      type: 'float',\n      name: 'offset',\n      default: 0,\n    }\n  ],\n  glsl:\n`   vec2 st = _st * vec2(reps, 1.0);\n   //  float f =  mod(_st.y,2.0);\n   st.y += step(1., mod(st.x,2.0))* offset;\n   return fract(st);`\n},\n{\n  name: 'modulateRepeatX',\n  type: 'combineCoord',\n  inputs: [\n    {\n      type: 'float',\n      name: 'reps',\n      default: 3,\n    },\n{\n      type: 'float',\n      name: 'offset',\n      default: 0.5,\n    }\n  ],\n  glsl:\n`   vec2 st = _st * vec2(reps, 1.0);\n   //  float f =  mod(_st.y,2.0);\n   st.y += step(1., mod(st.x,2.0)) + _c0.r * offset;\n   return fract(st);`\n},\n{\n  name: 'repeatY',\n  type: 'coord',\n  inputs: [\n    {\n      type: 'float',\n      name: 'reps',\n      default: 3,\n    },\n{\n      type: 'float',\n      name: 'offset',\n      default: 0,\n    }\n  ],\n  glsl:\n`   vec2 st = _st * vec2(1.0, reps);\n   //  float f =  mod(_st.y,2.0);\n   st.x += step(1., mod(st.y,2.0))* offset;\n   return fract(st);`\n},\n{\n  name: 'modulateRepeatY',\n  type: 'combineCoord',\n  inputs: [\n    {\n      type: 'float',\n      name: 'reps',\n      default: 3,\n    },\n{\n      type: 'float',\n      name: 'offset',\n      default: 0.5,\n    }\n  ],\n  glsl:\n`   vec2 st = _st * vec2(reps, 1.0);\n   //  float f =  mod(_st.y,2.0);\n   st.x += step(1., mod(st.y,2.0)) + _c0.r * offset;\n   return fract(st);`\n},\n{\n  name: 'kaleid',\n  type: 'coord',\n  inputs: [\n    {\n      type: 'float',\n      name: 'nSides',\n      default: 4,\n    }\n  ],\n  glsl:\n`   vec2 st = _st;\n   st -= 0.5;\n   float r = length(st);\n   float a = atan(st.y, st.x);\n   float pi = 2.*3.1416;\n   a = mod(a,pi/nSides);\n   a = abs(a-pi/nSides/2.);\n   return r*vec2(cos(a), sin(a));`\n},\n{\n  name: 'modulateKaleid',\n  type: 'combineCoord',\n  inputs: [\n    {\n      type: 'float',\n      name: 'nSides',\n      default: 4,\n    }\n  ],\n  glsl:\n`   vec2 st = _st - 0.5;\n   float r = length(st);\n   float a = atan(st.y, st.x);\n   float pi = 2.*3.1416;\n   a = mod(a,pi/nSides);\n   a = abs(a-pi/nSides/2.);\n   return (_c0.r+r)*vec2(cos(a), sin(a));`\n},\n{\n  name: 'scroll',\n  type: 'coord',\n  inputs: [\n    {\n      type: 'float',\n      name: 'scrollX',\n      default: 0.5,\n    },\n{\n      type: 'float',\n      name: 'scrollY',\n      default: 0.5,\n    },\n{\n      type: 'float',\n      name: 'speedX',\n      default: 0,\n    },\n{\n      type: 'float',\n      name: 'speedY',\n      default: 0,\n    }\n  ],\n  glsl:\n`\n   _st.x += scrollX + time*speedX;\n   _st.y += scrollY + time*speedY;\n   return fract(_st);`\n},\n{\n  name: 'scrollX',\n  type: 'coord',\n  inputs: [\n    {\n      type: 'float',\n      name: 'scrollX',\n      default: 0.5,\n    },\n{\n      type: 'float',\n      name: 'speed',\n      default: 0,\n    }\n  ],\n  glsl:\n`   _st.x += scrollX + time*speed;\n   return fract(_st);`\n},\n{\n  name: 'modulateScrollX',\n  type: 'combineCoord',\n  inputs: [\n    {\n      type: 'float',\n      name: 'scrollX',\n      default: 0.5,\n    },\n{\n      type: 'float',\n      name: 'speed',\n      default: 0,\n    }\n  ],\n  glsl:\n`   _st.x += _c0.r*scrollX + time*speed;\n   return fract(_st);`\n},\n{\n  name: 'scrollY',\n  type: 'coord',\n  inputs: [\n    {\n      type: 'float',\n      name: 'scrollY',\n      default: 0.5,\n    },\n{\n      type: 'float',\n      name: 'speed',\n      default: 0,\n    }\n  ],\n  glsl:\n`   _st.y += scrollY + time*speed;\n   return fract(_st);`\n},\n{\n  name: 'modulateScrollY',\n  type: 'combineCoord',\n  inputs: [\n    {\n      type: 'float',\n      name: 'scrollY',\n      default: 0.5,\n    },\n{\n      type: 'float',\n      name: 'speed',\n      default: 0,\n    }\n  ],\n  glsl:\n`   _st.y += _c0.r*scrollY + time*speed;\n   return fract(_st);`\n},\n{\n  name: 'add',\n  type: 'combine',\n  inputs: [\n    {\n      type: 'float',\n      name: 'amount',\n      default: 1,\n    }\n  ],\n  glsl:\n`   return (_c0+_c1)*amount + _c0*(1.0-amount);`\n},\n{\n  name: 'sub',\n  type: 'combine',\n  inputs: [\n    {\n      type: 'float',\n      name: 'amount',\n      default: 1,\n    }\n  ],\n  glsl:\n`   return (_c0-_c1)*amount + _c0*(1.0-amount);`\n},\n{\n  name: 'layer',\n  type: 'combine',\n  inputs: [\n\n  ],\n  glsl:\n`   return vec4(mix(_c0.rgb, _c1.rgb, _c1.a), _c0.a+_c1.a);`\n},\n{\n  name: 'blend',\n  type: 'combine',\n  inputs: [\n    {\n      type: 'float',\n      name: 'amount',\n      default: 0.5,\n    }\n  ],\n  glsl:\n`   return _c0*(1.0-amount)+_c1*amount;`\n},\n{\n  name: 'mult',\n  type: 'combine',\n  inputs: [\n    {\n      type: 'float',\n      name: 'amount',\n      default: 1,\n    }\n  ],\n  glsl:\n`   return _c0*(1.0-amount)+(_c0*_c1)*amount;`\n},\n{\n  name: 'diff',\n  type: 'combine',\n  inputs: [\n\n  ],\n  glsl:\n`   return vec4(abs(_c0.rgb-_c1.rgb), max(_c0.a, _c1.a));`\n},\n{\n  name: 'modulate',\n  type: 'combineCoord',\n  inputs: [\n    {\n      type: 'float',\n      name: 'amount',\n      default: 0.1,\n    }\n  ],\n  glsl:\n`   //  return fract(st+(_c0.xy-0.5)*amount);\n   return _st + _c0.xy*amount;`\n},\n{\n  name: 'modulateScale',\n  type: 'combineCoord',\n  inputs: [\n    {\n      type: 'float',\n      name: 'multiple',\n      default: 1,\n    },\n{\n      type: 'float',\n      name: 'offset',\n      default: 1,\n    }\n  ],\n  glsl:\n`   vec2 xy = _st - vec2(0.5);\n   xy*=(1.0/vec2(offset + multiple*_c0.r, offset + multiple*_c0.g));\n   xy+=vec2(0.5);\n   return xy;`\n},\n{\n  name: 'modulatePixelate',\n  type: 'combineCoord',\n  inputs: [\n    {\n      type: 'float',\n      name: 'multiple',\n      default: 10,\n    },\n{\n      type: 'float',\n      name: 'offset',\n      default: 3,\n    }\n  ],\n  glsl:\n`   vec2 xy = vec2(offset + _c0.x*multiple, offset + _c0.y*multiple);\n   return (floor(_st * xy) + 0.5)/xy;`\n},\n{\n  name: 'modulateRotate',\n  type: 'combineCoord',\n  inputs: [\n    {\n      type: 'float',\n      name: 'multiple',\n      default: 1,\n    },\n{\n      type: 'float',\n      name: 'offset',\n      default: 0,\n    }\n  ],\n  glsl:\n`   vec2 xy = _st - vec2(0.5);\n   float angle = offset + _c0.x * multiple;\n   xy = mat2(cos(angle),-sin(angle), sin(angle),cos(angle))*xy;\n   xy += 0.5;\n   return xy;`\n},\n{\n  name: 'modulateHue',\n  type: 'combineCoord',\n  inputs: [\n    {\n      type: 'float',\n      name: 'amount',\n      default: 1,\n    }\n  ],\n  glsl:\n`   return _st + (vec2(_c0.g - _c0.r, _c0.b - _c0.g) * amount * 1.0/resolution);`\n},\n{\n  name: 'invert',\n  type: 'color',\n  inputs: [\n    {\n      type: 'float',\n      name: 'amount',\n      default: 1,\n    }\n  ],\n  glsl:\n`   return vec4((1.0-_c0.rgb)*amount + _c0.rgb*(1.0-amount), _c0.a);`\n},\n{\n  name: 'contrast',\n  type: 'color',\n  inputs: [\n    {\n      type: 'float',\n      name: 'amount',\n      default: 1.6,\n    }\n  ],\n  glsl:\n`   vec4 c = (_c0-vec4(0.5))*vec4(amount) + vec4(0.5);\n   return vec4(c.rgb, _c0.a);`\n},\n{\n  name: 'brightness',\n  type: 'color',\n  inputs: [\n    {\n      type: 'float',\n      name: 'amount',\n      default: 0.4,\n    }\n  ],\n  glsl:\n`   return vec4(_c0.rgb + vec3(amount), _c0.a);`\n},\n{\n  name: 'mask',\n  type: 'combine',\n  inputs: [\n\n  ],\n  glsl:\n`   float a = _luminance(_c1.rgb);\n   return vec4(_c0.rgb*a, a);`\n},\n{\n  name: 'luma',\n  type: 'color',\n  inputs: [\n    {\n      type: 'float',\n      name: 'threshold',\n      default: 0.5,\n    },\n{\n      type: 'float',\n      name: 'tolerance',\n      default: 0.1,\n    }\n  ],\n  glsl:\n`   float a = smoothstep(threshold-(tolerance+0.0000001), threshold+(tolerance+0.0000001), _luminance(_c0.rgb));\n   return vec4(_c0.rgb*a, a);`\n},\n{\n  name: 'thresh',\n  type: 'color',\n  inputs: [\n    {\n      type: 'float',\n      name: 'threshold',\n      default: 0.5,\n    },\n{\n      type: 'float',\n      name: 'tolerance',\n      default: 0.04,\n    }\n  ],\n  glsl:\n`   return vec4(vec3(smoothstep(threshold-(tolerance+0.0000001), threshold+(tolerance+0.0000001), _luminance(_c0.rgb))), _c0.a);`\n},\n{\n  name: 'color',\n  type: 'color',\n  inputs: [\n    {\n      type: 'float',\n      name: 'r',\n      default: 1,\n    },\n{\n      type: 'float',\n      name: 'g',\n      default: 1,\n    },\n{\n      type: 'float',\n      name: 'b',\n      default: 1,\n    },\n{\n      type: 'float',\n      name: 'a',\n      default: 1,\n    }\n  ],\n  glsl:\n`   vec4 c = vec4(r, g, b, a);\n   vec4 pos = step(0.0, c); // detect whether negative\n   // if > 0, return r * _c0\n   // if < 0 return (1.0-r) * _c0\n   return vec4(mix((1.0-_c0)*abs(c), c*_c0, pos));`\n},\n{\n  name: 'saturate',\n  type: 'color',\n  inputs: [\n    {\n      type: 'float',\n      name: 'amount',\n      default: 2,\n    }\n  ],\n  glsl:\n`   const vec3 W = vec3(0.2125, 0.7154, 0.0721);\n   vec3 intensity = vec3(dot(_c0.rgb, W));\n   return vec4(mix(intensity, _c0.rgb, amount), _c0.a);`\n},\n{\n  name: 'hue',\n  type: 'color',\n  inputs: [\n    {\n      type: 'float',\n      name: 'hue',\n      default: 0.4,\n    }\n  ],\n  glsl:\n`   vec3 c = _rgbToHsv(_c0.rgb);\n   c.r += hue;\n   //  c.r = fract(c.r);\n   return vec4(_hsvToRgb(c), _c0.a);`\n},\n{\n  name: 'colorama',\n  type: 'color',\n  inputs: [\n    {\n      type: 'float',\n      name: 'amount',\n      default: 0.005,\n    }\n  ],\n  glsl:\n`   vec3 c = _rgbToHsv(_c0.rgb);\n   c += vec3(amount);\n   c = _hsvToRgb(c);\n   c = fract(c);\n   return vec4(c, _c0.a);`\n},\n{\n  name: 'prev',\n  type: 'src',\n  inputs: [\n\n  ],\n  glsl:\n`   return texture2D(prevBuffer, fract(_st));`\n},\n{\n  name: 'sum',\n  type: 'color',\n  inputs: [\n    {\n      type: 'vec4',\n      name: 'scale',\n      default: 1,\n    }\n  ],\n  glsl:\n`   vec4 v = _c0 * s;\n   return v.r + v.g + v.b + v.a;\n   }\n   float sum(vec2 _st, vec4 s) { // vec4 is not a typo, because argument type is not overloaded\n   vec2 v = _st.xy * s.xy;\n   return v.x + v.y;`\n},\n{\n  name: 'r',\n  type: 'color',\n  inputs: [\n    {\n      type: 'float',\n      name: 'scale',\n      default: 1,\n    },\n{\n      type: 'float',\n      name: 'offset',\n      default: 0,\n    }\n  ],\n  glsl:\n`   return vec4(_c0.r * scale + offset);`\n},\n{\n  name: 'g',\n  type: 'color',\n  inputs: [\n    {\n      type: 'float',\n      name: 'scale',\n      default: 1,\n    },\n{\n      type: 'float',\n      name: 'offset',\n      default: 0,\n    }\n  ],\n  glsl:\n`   return vec4(_c0.g * scale + offset);`\n},\n{\n  name: 'b',\n  type: 'color',\n  inputs: [\n    {\n      type: 'float',\n      name: 'scale',\n      default: 1,\n    },\n{\n      type: 'float',\n      name: 'offset',\n      default: 0,\n    }\n  ],\n  glsl:\n`   return vec4(_c0.b * scale + offset);`\n},\n{\n  name: 'a',\n  type: 'color',\n  inputs: [\n    {\n      type: 'float',\n      name: 'scale',\n      default: 1,\n    },\n{\n      type: 'float',\n      name: 'offset',\n      default: 0,\n    }\n  ],\n  glsl:\n`   return vec4(_c0.a * scale + offset);`\n}\n]\n","// converts a tree of javascript functions to a shader\n\n// Add extra functionality to Array.prototype for generating sequences in time\nconst arrayUtils = require('./lib/array-utils.js')\n\n// [WIP] how to treat different dimensions (?)\nconst DEFAULT_CONVERSIONS = {\n  float: {\n    'vec4': {name: 'sum', args: [[1, 1, 1, 1]]},\n    'vec2': {name: 'sum', args: [[1, 1]]}\n  }\n}\n\nmodule.exports = {\n  generateGlsl: function (transforms) {\n    var shaderParams = {\n      uniforms: [], // list of uniforms used in shader\n      glslFunctions: [], // list of functions used in shader\n      fragColor: ''\n    }\n\n    var gen = generateGlsl(transforms, shaderParams)('st')\n    shaderParams.fragColor = gen\n    // remove uniforms with duplicate names\n    let uniforms = {}\n    shaderParams.uniforms.forEach((uniform) => uniforms[uniform.name] = uniform)\n    shaderParams.uniforms = Object.values(uniforms)\n    return shaderParams\n  },\n  formatArguments: formatArguments\n}\n// recursive function for generating shader string from object containing functions and user arguments. Order of functions in string depends on type of function\n// to do: improve variable names\nfunction generateGlsl (transforms, shaderParams) {\n\n  // transform function that outputs a shader string corresponding to gl_FragColor\n  var fragColor = () => ''\n  // var uniforms = []\n  // var glslFunctions = []\n  transforms.forEach((transform) => {\n    var inputs = formatArguments(transform, shaderParams.uniforms.length)\n  //  console.log('inputs', inputs, transform)\n    inputs.forEach((input) => {\n      if(input.isUniform) shaderParams.uniforms.push(input)\n    })\n\n    // add new glsl function to running list of functions\n    if(!contains(transform, shaderParams.glslFunctions)) shaderParams.glslFunctions.push(transform)\n\n    // current function for generating frag color shader code\n    var f0 = fragColor\n    if (transform.transform.type === 'src') {\n      fragColor = (uv) => `${shaderString(uv, transform.name, inputs, shaderParams)}`\n    } else if (transform.transform.type === 'coord') {\n      fragColor = (uv) => `${f0(`${shaderString(uv, transform.name, inputs, shaderParams)}`)}`\n    } else if (transform.transform.type === 'color') {\n      fragColor = (uv) =>  `${shaderString(`${f0(uv)}`, transform.name, inputs, shaderParams)}`\n    } else if (transform.transform.type === 'combine') {\n      // combining two generated shader strings (i.e. for blend, mult, add funtions)\n      var f1 = inputs[0].value && inputs[0].value.transforms ?\n      (uv) => `${generateGlsl(inputs[0].value.transforms, shaderParams)(uv)}` :\n      (inputs[0].isUniform ? () => inputs[0].name : () => inputs[0].value)\n      fragColor = (uv) => `${shaderString(`${f0(uv)}, ${f1(uv)}`, transform.name, inputs.slice(1), shaderParams)}`\n    } else if (transform.transform.type === 'combineCoord') {\n      // combining two generated shader strings (i.e. for modulate functions)\n      var f1 = inputs[0].value && inputs[0].value.transforms ?\n      (uv) => `${generateGlsl(inputs[0].value.transforms, shaderParams)(uv)}` :\n      (inputs[0].isUniform ? () => inputs[0].name : () => inputs[0].value)\n      fragColor = (uv) => `${f0(`${shaderString(`${uv}, ${f1(uv)}`, transform.name, inputs.slice(1), shaderParams)}`)}`\n\n\n    }\n  })\n//  console.log(fragColor)\n  //  break;\n  return fragColor\n}\n\n// assembles a shader string containing the arguments and the function name, i.e. 'osc(uv, frequency)'\nfunction shaderString (uv, method, inputs, shaderParams) {\n  const str = inputs.map((input) => {\n    if (input.isUniform) {\n      return input.name\n    } else if (input.value && input.value.transforms) {\n      // this by definition needs to be a generator, hence we start with 'st' as the initial value for generating the glsl fragment\n      return `${generateGlsl(input.value.transforms, shaderParams)('st')}`\n    }\n    return input.value\n  }).reduce((p, c) => `${p}, ${c}`, '')\n\n  return `${method}(${uv}${str})`\n}\n\n// merge two arrays and remove duplicates\nfunction mergeArrays (a, b) {\n  return a.concat(b.filter(function (item) {\n    return a.indexOf(item) < 0;\n  }))\n}\n\n// check whether array\nfunction contains(object, arr) {\n  for(var i = 0; i < arr.length; i++){\n    if(object.name == arr[i].name) return true\n  }\n  return false\n}\n\nfunction fillArrayWithDefaults (arr, len) {\n  // fill the array with default values if it's too short\n  while (arr.length < len) {\n    if (arr.length === 3) { // push a 1 as the default for .a in vec4\n      arr.push(1.0)\n    } else {\n      arr.push(0.0)\n    }\n  }\n  return arr.slice(0, len)\n}\n\nconst ensure_decimal_dot = (val) => {\n  val = val.toString()\n  if (val.indexOf('.') < 0) {\n    val += '.'\n  }\n  return val\n}\n\nfunction formatArguments (transform, startIndex) {\n  //  console.log('processing args', transform, startIndex)\n  const defaultArgs = transform.transform.inputs\n  const userArgs = transform.userArgs\n  return defaultArgs.map( (input, index) => {\n    const typedArg = {\n      value: input.default,\n      type: input.type, //\n      isUniform: false,\n      name: input.name,\n      vecLen: 0\n      //  generateGlsl: null // function for creating glsl\n    }\n\n    if(typedArg.type === 'float') typedArg.value = ensure_decimal_dot(input.default)\n    if (input.type.startsWith('vec')) {\n      try {\n        typedArg.vecLen = Number.parseInt(input.type.substr(3))\n      } catch (e) {\n        console.log(`Error determining length of vector input type ${input.type} (${input.name})`)\n      }\n    }\n\n    // if user has input something for this argument\n    if(userArgs.length > index) {\n      typedArg.value = userArgs[index]\n      // do something if a composite or transform\n\n      if (typeof userArgs[index] === 'function') {\n        if (typedArg.vecLen > 0) { // expected input is a vector, not a scalar\n          typedArg.value = (context, props, batchId) => (fillArrayWithDefaults(userArgs[index](props), typedArg.vecLen))\n        } else {\n          typedArg.value = (context, props, batchId) => {\n            try {\n              return userArgs[index](props)\n            } catch (e) {\n              console.log('ERROR', e)\n              return input.default\n            }\n          }\n        }\n\n        typedArg.isUniform = true\n      } else if (userArgs[index].constructor === Array) {\n        if (typedArg.vecLen > 0) { // expected input is a vector, not a scalar\n          typedArg.isUniform = true\n          typedArg.value = fillArrayWithDefaults(typedArg.value, typedArg.vecLen)\n        } else {\n          //  console.log(\"is Array\")\n          typedArg.value = (context, props, batchId) => arrayUtils.getValue(userArgs[index])(props)\n          typedArg.isUniform = true\n        }\n      }\n    }\n\n    if(startIndex< 0){\n    } else {\n      if (typedArg.value && typedArg.value.transforms) {\n        const final_transform = typedArg.value.transforms[typedArg.value.transforms.length - 1]\n\n        if (final_transform.transform.glsl_return_type !== input.type) {\n          const defaults = DEFAULT_CONVERSIONS[input.type]\n          if (typeof defaults !== 'undefined') {\n            const default_def = defaults[final_transform.transform.glsl_return_type]\n            if (typeof default_def !== 'undefined') {\n              const {name, args} = default_def\n              typedArg.value = typedArg.value[name](...args)\n            }\n          }\n        }\n\n        typedArg.isUniform = false\n      } else if (typedArg.type === 'float' && typeof typedArg.value === 'number') {\n        typedArg.value = ensure_decimal_dot(typedArg.value)\n      } else if (typedArg.type.startsWith('vec') && typeof typedArg.value === 'object' && Array.isArray(typedArg.value)) {\n        typedArg.isUniform = false\n        typedArg.value = `${typedArg.type}(${typedArg.value.map(ensure_decimal_dot).join(', ')})`\n      } else if (input.type === 'sampler2D') {\n        // typedArg.tex = typedArg.value\n        var x = typedArg.value\n        typedArg.value = () => (x.getTexture())\n        typedArg.isUniform = true\n      } else {\n        // if passing in a texture reference, when function asks for vec4, convert to vec4\n        if (typedArg.value.getTexture && input.type === 'vec4') {\n          var x1 = typedArg.value\n          typedArg.value = src(x1)\n          typedArg.isUniform = false\n        }\n      }\n\n      // add tp uniform array if is a function that will pass in a different value on each render frame,\n      // or a texture/ external source\n\n      if(typedArg.isUniform) {\n        typedArg.name += startIndex\n        //  shaderParams.uniforms.push(typedArg)\n      }\n    }\n    return typedArg\n  })\n}\n","// functions that are only used within other functions\n\nmodule.exports = {\n  _luminance: {\n    type: 'util',\n    glsl: `float _luminance(vec3 rgb){\n      const vec3 W = vec3(0.2125, 0.7154, 0.0721);\n      return dot(rgb, W);\n    }`\n  },\n  _noise: {\n    type: 'util',\n    glsl: `\n    //\tSimplex 3D Noise\n    //\tby Ian McEwan, Ashima Arts\n    vec4 permute(vec4 x){return mod(((x*34.0)+1.0)*x, 289.0);}\n  vec4 taylorInvSqrt(vec4 r){return 1.79284291400159 - 0.85373472095314 * r;}\n\n  float _noise(vec3 v){\n    const vec2  C = vec2(1.0/6.0, 1.0/3.0) ;\n    const vec4  D = vec4(0.0, 0.5, 1.0, 2.0);\n\n  // First corner\n    vec3 i  = floor(v + dot(v, C.yyy) );\n    vec3 x0 =   v - i + dot(i, C.xxx) ;\n\n  // Other corners\n    vec3 g = step(x0.yzx, x0.xyz);\n    vec3 l = 1.0 - g;\n    vec3 i1 = min( g.xyz, l.zxy );\n    vec3 i2 = max( g.xyz, l.zxy );\n\n    //  x0 = x0 - 0. + 0.0 * C\n    vec3 x1 = x0 - i1 + 1.0 * C.xxx;\n    vec3 x2 = x0 - i2 + 2.0 * C.xxx;\n    vec3 x3 = x0 - 1. + 3.0 * C.xxx;\n\n  // Permutations\n    i = mod(i, 289.0 );\n    vec4 p = permute( permute( permute(\n               i.z + vec4(0.0, i1.z, i2.z, 1.0 ))\n             + i.y + vec4(0.0, i1.y, i2.y, 1.0 ))\n             + i.x + vec4(0.0, i1.x, i2.x, 1.0 ));\n\n  // Gradients\n  // ( N*N points uniformly over a square, mapped onto an octahedron.)\n    float n_ = 1.0/7.0; // N=7\n    vec3  ns = n_ * D.wyz - D.xzx;\n\n    vec4 j = p - 49.0 * floor(p * ns.z *ns.z);  //  mod(p,N*N)\n\n    vec4 x_ = floor(j * ns.z);\n    vec4 y_ = floor(j - 7.0 * x_ );    // mod(j,N)\n\n    vec4 x = x_ *ns.x + ns.yyyy;\n    vec4 y = y_ *ns.x + ns.yyyy;\n    vec4 h = 1.0 - abs(x) - abs(y);\n\n    vec4 b0 = vec4( x.xy, y.xy );\n    vec4 b1 = vec4( x.zw, y.zw );\n\n    vec4 s0 = floor(b0)*2.0 + 1.0;\n    vec4 s1 = floor(b1)*2.0 + 1.0;\n    vec4 sh = -step(h, vec4(0.0));\n\n    vec4 a0 = b0.xzyw + s0.xzyw*sh.xxyy ;\n    vec4 a1 = b1.xzyw + s1.xzyw*sh.zzww ;\n\n    vec3 p0 = vec3(a0.xy,h.x);\n    vec3 p1 = vec3(a0.zw,h.y);\n    vec3 p2 = vec3(a1.xy,h.z);\n    vec3 p3 = vec3(a1.zw,h.w);\n\n  //Normalise gradients\n    vec4 norm = taylorInvSqrt(vec4(dot(p0,p0), dot(p1,p1), dot(p2, p2), dot(p3,p3)));\n    p0 *= norm.x;\n    p1 *= norm.y;\n    p2 *= norm.z;\n    p3 *= norm.w;\n\n  // Mix final noise value\n    vec4 m = max(0.6 - vec4(dot(x0,x0), dot(x1,x1), dot(x2,x2), dot(x3,x3)), 0.0);\n    m = m * m;\n    return 42.0 * dot( m*m, vec4( dot(p0,x0), dot(p1,x1),\n                                  dot(p2,x2), dot(p3,x3) ) );\n  }\n    `\n  },\n\n\n  _rgbToHsv: {\n    type: 'util',\n    glsl: `vec3 _rgbToHsv(vec3 c){\n            vec4 K = vec4(0.0, -1.0 / 3.0, 2.0 / 3.0, -1.0);\n            vec4 p = mix(vec4(c.bg, K.wz), vec4(c.gb, K.xy), step(c.b, c.g));\n            vec4 q = mix(vec4(p.xyw, c.r), vec4(c.r, p.yzx), step(p.x, c.r));\n\n            float d = q.x - min(q.w, q.y);\n            float e = 1.0e-10;\n            return vec3(abs(q.z + (q.w - q.y) / (6.0 * d + e)), d / (q.x + e), q.x);\n        }`\n  },\n  _hsvToRgb: {\n    type: 'util',\n    glsl: `vec3 _hsvToRgb(vec3 c){\n        vec4 K = vec4(1.0, 2.0 / 3.0, 1.0 / 3.0, 3.0);\n        vec3 p = abs(fract(c.xxx + K.xyz) * 6.0 - K.www);\n        return c.z * mix(K.xxx, clamp(p - K.xxx, 0.0, 1.0), c.y);\n    }`\n  }\n}\n","const generateGlsl = require('./glsl-utils.js').generateGlsl\nconst formatArguments = require('./glsl-utils.js').formatArguments\n\n// const glslTransforms = require('./glsl/composable-glsl-functions.js')\nconst utilityGlsl = require('./glsl/utility-functions.js')\n\nvar GlslSource = function (obj) {\n  this.transforms = []\n  this.transforms.push(obj)\n  this.defaultOutput = obj.defaultOutput\n  this.synth = obj.synth\n  this.type = 'GlslSource'\n  this.defaultUniforms = obj.defaultUniforms\n  return this\n}\n\nGlslSource.prototype.addTransform = function (obj)  {\n    this.transforms.push(obj)\n}\n\nGlslSource.prototype.out = function (_output) {\n  var output = _output || this.defaultOutput\n  var glsl = this.glsl(output)\n  this.synth.currentFunctions = []\n // output.renderPasses(glsl)\n  if(output) try{\n    output.render(glsl)\n  } catch (error) {\n    console.log('shader could not compile', error)\n  }\n}\n\nGlslSource.prototype.glsl = function () {\n  //var output = _output || this.defaultOutput\n  var self = this\n  // uniforms included in all shaders\n//  this.defaultUniforms = output.uniforms\n  var passes = []\n  var transforms = []\n//  console.log('output', output)\n  this.transforms.forEach((transform) => {\n    if(transform.transform.type === 'renderpass'){\n      // if (transforms.length > 0) passes.push(this.compile(transforms, output))\n      // transforms = []\n      // var uniforms = {}\n      // const inputs = formatArguments(transform, -1)\n      // inputs.forEach((uniform) => { uniforms[uniform.name] = uniform.value })\n      //\n      // passes.push({\n      //   frag: transform.transform.frag,\n      //   uniforms: Object.assign({}, self.defaultUniforms, uniforms)\n      // })\n      // transforms.push({name: 'prev', transform:  glslTransforms['prev'], synth: this.synth})\n      console.warn('no support for renderpass')\n    } else {\n      transforms.push(transform)\n    }\n  })\n\n  if (transforms.length > 0) passes.push(this.compile(transforms))\n\n  return passes\n}\n\nGlslSource.prototype.compile = function (transforms) {\n  var shaderInfo = generateGlsl(transforms)\n  var uniforms = {}\n  shaderInfo.uniforms.forEach((uniform) => { uniforms[uniform.name] = uniform.value })\n\n  var frag = `\n  precision ${this.defaultOutput.precision} float;\n  ${Object.values(shaderInfo.uniforms).map((uniform) => {\n    let type = uniform.type\n    switch (uniform.type) {\n      case 'texture':\n        type = 'sampler2D'\n        break\n    }\n    return `\n      uniform ${type} ${uniform.name};`\n  }).join('')}\n  uniform float time;\n  uniform vec2 resolution;\n  varying vec2 uv;\n  uniform sampler2D prevBuffer;\n\n  ${Object.values(utilityGlsl).map((transform) => {\n  //  console.log(transform.glsl)\n    return `\n            ${transform.glsl}\n          `\n  }).join('')}\n\n  ${shaderInfo.glslFunctions.map((transform) => {\n    return `\n            ${transform.transform.glsl}\n          `\n  }).join('')}\n\n  void main () {\n    vec4 c = vec4(1, 0, 0, 1);\n    vec2 st = gl_FragCoord.xy/resolution.xy;\n    gl_FragColor = ${shaderInfo.fragColor};\n  }\n  `\n\n  return {\n    frag: frag,\n    uniforms: Object.assign({}, this.defaultUniforms, uniforms)\n  }\n\n}\n\nmodule.exports = GlslSource\n","const glslTransforms = require('./glsl/glsl-functions.js')\nconst GlslSource = require('./glsl-source.js')\n\nclass GeneratorFactory {\n  constructor ({\n      defaultUniforms,\n      defaultOutput,\n      extendTransforms = [],\n      changeListener = (() => {})\n    } = {}\n    ) {\n    this.defaultOutput = defaultOutput\n    this.defaultUniforms = defaultUniforms\n    this.changeListener = changeListener\n    this.extendTransforms = extendTransforms\n    this.generators = {}\n    this.init()\n  }\n  init () {\n    this.glslTransforms = {}\n    this.generators = Object.entries(this.generators).reduce((prev, [method, transform]) => {\n      this.changeListener({type: 'remove', synth: this, method})\n      return prev\n    }, {})\n\n    this.sourceClass = (() => {\n      return class extends GlslSource {\n      }\n    })()\n\n    let functions = glslTransforms\n\n    // add user definied transforms\n    if (Array.isArray(this.extendTransforms)) {\n      functions.concat(this.extendTransforms)\n    } else if (typeof this.extendTransforms === 'object' && this.extendTransforms.type) {\n      functions.push(this.extendTransforms)\n    }\n\n    return functions.map((transform) => this.setFunction(transform))\n }\n\n _addMethod (method, transform) {\n    this.glslTransforms[method] = transform\n    if (transform.type === 'src') {\n      const func = (...args) => new this.sourceClass({\n        name: method,\n        transform: transform,\n        userArgs: args,\n        defaultOutput: this.defaultOutput,\n        defaultUniforms: this.defaultUniforms,\n        synth: this\n      })\n      this.generators[method] = func\n      this.changeListener({type: 'add', synth: this, method})\n      return func\n    } else  {\n      this.sourceClass.prototype[method] = function (...args) {\n        this.transforms.push({name: method, transform: transform, userArgs: args})\n        return this\n      }\n    }\n    return undefined\n  }\n\n  setFunction(obj) {\n    var processedGlsl = processGlsl(obj)\n    if(processedGlsl) this._addMethod(obj.name, processedGlsl)\n  }\n}\n\nconst typeLookup = {\n  'src': {\n    returnType: 'vec4',\n    args: ['vec2 _st']\n  },\n  'coord': {\n    returnType: 'vec2',\n    args: ['vec2 _st']\n  },\n  'color': {\n    returnType: 'vec4',\n    args: ['vec4 _c0']\n  },\n  'combine': {\n    returnType: 'vec4',\n    args: ['vec4 _c0', 'vec4 _c1']\n  },\n  'combineCoord': {\n    returnType: 'vec2',\n    args: ['vec2 _st', 'vec4 _c0']\n  }\n}\n// expects glsl of format\n// {\n//   name: 'osc', // name that will be used to access function as well as within glsl\n//   type: 'src', // can be src: vec4(vec2 _st), coord: vec2(vec2 _st), color: vec4(vec4 _c0), combine: vec4(vec4 _c0, vec4 _c1), combineCoord: vec2(vec2 _st, vec4 _c0)\n//   inputs: [\n//     {\n//       name: 'freq',\n//       type: 'float', // 'float'   //, 'texture', 'vec4'\n//       default: 0.2\n//     },\n//     {\n//           name: 'sync',\n//           type: 'float',\n//           default: 0.1\n//         },\n//         {\n//           name: 'offset',\n//           type: 'float',\n//           default: 0.0\n//         }\n//   ],\n   //  glsl: `\n   //    vec2 st = _st;\n   //    float r = sin((st.x-offset*2/freq+time*sync)*freq)*0.5  + 0.5;\n   //    float g = sin((st.x+time*sync)*freq)*0.5 + 0.5;\n   //    float b = sin((st.x+offset/freq+time*sync)*freq)*0.5  + 0.5;\n   //    return vec4(r, g, b, 1.0);\n   // `\n// }\n\n// // generates glsl function:\n// `vec4 osc(vec2 _st, float freq, float sync, float offset){\n//  vec2 st = _st;\n//  float r = sin((st.x-offset*2/freq+time*sync)*freq)*0.5  + 0.5;\n//  float g = sin((st.x+time*sync)*freq)*0.5 + 0.5;\n//  float b = sin((st.x+offset/freq+time*sync)*freq)*0.5  + 0.5;\n//  return vec4(r, g, b, 1.0);\n// }`\n\nfunction processGlsl(obj) {\n  let t = typeLookup[obj.type]\n  if(t) {\n  let baseArgs = t.args.map((arg) => arg).join(\", \")\n  // @todo: make sure this works for all input types, add validation\n  let customArgs = obj.inputs.map((input) => `${input.type} ${input.name}`).join(', ')\n  let args = `${baseArgs}${customArgs.length > 0 ? ', '+ customArgs: ''}`\n//  console.log('args are ', args)\n\n    let glslFunction =\n`\n  ${t.returnType} ${obj.name}(${args}) {\n      ${obj.glsl}\n  }\n`\n\n  // add extra input to beginning for backward combatibility @todo update compiler so this is no longer necessary\n    if(obj.type === 'combine' || obj.type === 'combineCoord') obj.inputs.unshift({\n        name: 'color',\n        type: 'vec4'\n      })\n    return Object.assign({}, obj, { glsl: glslFunction})\n  } else {\n    console.warn(`type ${obj.type} not recognized`, obj)\n  }\n\n}\n\nmodule.exports = GeneratorFactory\n","const Output = require('./src/output.js')\nconst loop = require('raf-loop')\nconst Source = require('./src/hydra-source.js')\nconst Mouse = require('./src/lib/mouse.js')()\nconst Audio = require('./src/lib/audio.js')\nconst VidRecorder = require('./src/lib/video-recorder.js')\nconst ArrayUtils = require('./src/lib/array-utils.js')\nconst Sandbox = require('./src/eval-sandbox.js')\n\nconst Generator = require('./src/generator-factory.js')\n\n// to do: add ability to pass in certain uniforms and transforms\nclass HydraRenderer {\n\n  constructor ({\n    pb = null,\n    width = 1280,\n    height = 720,\n    numSources = 4,\n    numOutputs = 4,\n    makeGlobal = true,\n    autoLoop = true,\n    detectAudio = true,\n    enableStreamCapture = true,\n    canvas,\n    precision,\n    extendTransforms = {} // add your own functions on init\n  } = {}) {\n\n    ArrayUtils.init()\n\n    this.pb = pb\n\n    this.width = width\n    this.height = height\n    this.renderAll = false\n    this.detectAudio = detectAudio\n\n    this._initCanvas(canvas)\n\n\n    // object that contains all properties that will be made available on the global context and during local evaluation\n    this.synth = {\n      time: 0,\n      bpm: 30,\n      width: this.width,\n      height: this.height,\n      fps: undefined,\n      stats: {\n        fps: 0\n      },\n      speed: 1,\n      mouse: Mouse,\n      render: this._render.bind(this),\n      setResolution: this.setResolution.bind(this),\n      update: (dt) => {},// user defined update function\n      hush: this.hush.bind(this)\n    }\n\n    this.timeSinceLastUpdate = 0\n    this._time = 0 // for internal use, only to use for deciding when to render frames\n\n    // only allow valid precision options\n    let precisionOptions = ['lowp','mediump','highp']\n    if(precision && precisionOptions.includes(precision.toLowerCase())) {\n      this.precision = precision.toLowerCase()\n      //\n      // if(!precisionValid){\n      //   console.warn('[hydra-synth warning]\\nConstructor was provided an invalid floating point precision value of \"' + precision + '\". Using default value of \"mediump\" instead.')\n      // }\n    } else {\n      let isIOS =\n    (/iPad|iPhone|iPod/.test(navigator.platform) ||\n      (navigator.platform === 'MacIntel' && navigator.maxTouchPoints > 1)) &&\n    !window.MSStream;\n      this.precision = isIOS ? 'highp' : 'mediump'\n    }\n\n\n\n    this.extendTransforms = extendTransforms\n\n    // boolean to store when to save screenshot\n    this.saveFrame = false\n\n    // if stream capture is enabled, this object contains the capture stream\n    this.captureStream = null\n\n    this.generator = undefined\n\n    this._initRegl()\n    this._initOutputs(numOutputs)\n    this._initSources(numSources)\n    this._generateGlslTransforms()\n\n    this.synth.screencap = () => {\n      this.saveFrame = true\n    }\n\n    if (enableStreamCapture) {\n      try {\n        this.captureStream = this.canvas.captureStream(25)\n        // to do: enable capture stream of specific sources and outputs\n        this.synth.vidRecorder = new VidRecorder(this.captureStream)\n      } catch (e) {\n        console.warn('[hydra-synth warning]\\nnew MediaSource() is not currently supported on iOS.')\n        console.error(e)\n      }\n    }\n\n    if(detectAudio) this._initAudio()\n\n    if(autoLoop) loop(this.tick.bind(this)).start()\n\n    // final argument is properties that the user can set, all others are treated as read-only\n    this.sandbox = new Sandbox(this.synth, makeGlobal, ['speed', 'update', 'bpm', 'fps'])\n  }\n\n  eval(code) {\n    this.sandbox.eval(code)\n  }\n\n  getScreenImage(callback) {\n    this.imageCallback = callback\n    this.saveFrame = true\n  }\n\n  hush() {\n    this.s.forEach((source) => {\n      source.clear()\n    })\n    this.o.forEach((output) => {\n      this.synth.solid(1, 1, 1, 0).out(output)\n    })\n  }\n\n  setResolution(width, height) {\n  //  console.log(width, height)\n    this.canvas.width = width\n    this.canvas.height = height\n    this.width = width\n    this.height = height\n    this.o.forEach((output) => {\n      output.resize(width, height)\n    })\n    this.s.forEach((source) => {\n      source.resize(width, height)\n    })\n    this.regl._refresh()\n     console.log(this.canvas.width)\n  }\n\n  canvasToImage (callback) {\n    const a = document.createElement('a')\n    a.style.display = 'none'\n\n    let d = new Date()\n    a.download = `hydra-${d.getFullYear()}-${d.getMonth() + 1}-${d.getDate()}-${d.getHours()}.${d.getMinutes()}.${d.getSeconds()}.png`\n    document.body.appendChild(a)\n    var self = this\n    this.canvas.toBlob( (blob) => {\n        if(self.imageCallback){\n          self.imageCallback(blob)\n          delete self.imageCallback\n        } else {\n          a.href = URL.createObjectURL(blob)\n          console.log(a.href)\n          a.click()\n        }\n    }, 'image/png')\n    setTimeout(() => {\n      document.body.removeChild(a);\n      window.URL.revokeObjectURL(a.href);\n    }, 300);\n  }\n\n  _initAudio () {\n    const that = this\n    this.synth.a = new Audio({\n      numBins: 4,\n      // changeListener: ({audio}) => {\n      //   that.a = audio.bins.map((_, index) =>\n      //     (scale = 1, offset = 0) => () => (audio.fft[index] * scale + offset)\n      //   )\n      //\n      //   if (that.makeGlobal) {\n      //     that.a.forEach((a, index) => {\n      //       const aname = `a${index}`\n      //       window[aname] = a\n      //     })\n      //   }\n      // }\n    })\n  }\n\n  // create main output canvas and add to screen\n  _initCanvas (canvas) {\n    if (canvas) {\n      this.canvas = canvas\n      this.width = canvas.width\n      this.height = canvas.height\n    } else {\n      this.canvas = document.createElement('canvas')\n      this.canvas.width = this.width\n      this.canvas.height = this.height\n      this.canvas.style.width = '100%'\n      this.canvas.style.height = '100%'\n      this.canvas.style.imageRendering = 'pixelated'\n      document.body.appendChild(this.canvas)\n    }\n  }\n\n  _initRegl () {\n    this.regl = require('regl')({\n    //  profile: true,\n      canvas: this.canvas,\n      pixelRatio: 1//,\n      // extensions: [\n      //   'oes_texture_half_float',\n      //   'oes_texture_half_float_linear'\n      // ],\n      // optionalExtensions: [\n      //   'oes_texture_float',\n      //   'oes_texture_float_linear'\n     //]\n   })\n\n    // This clears the color buffer to black and the depth buffer to 1\n    this.regl.clear({\n      color: [0, 0, 0, 1]\n    })\n\n    this.renderAll = this.regl({\n      frag: `\n      precision ${this.precision} float;\n      varying vec2 uv;\n      uniform sampler2D tex0;\n      uniform sampler2D tex1;\n      uniform sampler2D tex2;\n      uniform sampler2D tex3;\n\n      void main () {\n        vec2 st = vec2(1.0 - uv.x, uv.y);\n        st*= vec2(2);\n        vec2 q = floor(st).xy*(vec2(2.0, 1.0));\n        int quad = int(q.x) + int(q.y);\n        st.x += step(1., mod(st.y,2.0));\n        st.y += step(1., mod(st.x,2.0));\n        st = fract(st);\n        if(quad==0){\n          gl_FragColor = texture2D(tex0, st);\n        } else if(quad==1){\n          gl_FragColor = texture2D(tex1, st);\n        } else if (quad==2){\n          gl_FragColor = texture2D(tex2, st);\n        } else {\n          gl_FragColor = texture2D(tex3, st);\n        }\n\n      }\n      `,\n      vert: `\n      precision ${this.precision} float;\n      attribute vec2 position;\n      varying vec2 uv;\n\n      void main () {\n        uv = position;\n        gl_Position = vec4(1.0 - 2.0 * position, 0, 1);\n      }`,\n      attributes: {\n        position: [\n          [-2, 0],\n          [0, -2],\n          [2, 2]\n        ]\n      },\n      uniforms: {\n        tex0: this.regl.prop('tex0'),\n        tex1: this.regl.prop('tex1'),\n        tex2: this.regl.prop('tex2'),\n        tex3: this.regl.prop('tex3')\n      },\n      count: 3,\n      depth: { enable: false }\n    })\n\n    this.renderFbo = this.regl({\n      frag: `\n      precision ${this.precision} float;\n      varying vec2 uv;\n      uniform vec2 resolution;\n      uniform sampler2D tex0;\n\n      void main () {\n        gl_FragColor = texture2D(tex0, vec2(1.0 - uv.x, uv.y));\n      }\n      `,\n      vert: `\n      precision ${this.precision} float;\n      attribute vec2 position;\n      varying vec2 uv;\n\n      void main () {\n        uv = position;\n        gl_Position = vec4(1.0 - 2.0 * position, 0, 1);\n      }`,\n      attributes: {\n        position: [\n          [-2, 0],\n          [0, -2],\n          [2, 2]\n        ]\n      },\n      uniforms: {\n        tex0: this.regl.prop('tex0'),\n        resolution: this.regl.prop('resolution')\n      },\n      count: 3,\n      depth: { enable: false }\n    })\n  }\n\n  _initOutputs (numOutputs) {\n    const self = this\n    this.o = (Array(numOutputs)).fill().map((el, index) => {\n      var o = new Output({\n        regl: this.regl,\n        width: this.width,\n        height: this.height,\n        precision: this.precision,\n        label: `o${index}`\n      })\n    //  o.render()\n      o.id = index\n      self.synth['o'+index] = o\n      return o\n    })\n\n    // set default output\n    this.output = this.o[0]\n  }\n\n  _initSources (numSources) {\n    this.s = []\n    for(var i = 0; i < numSources; i++) {\n      this.createSource(i)\n    }\n  }\n\n  createSource (i) {\n    let s = new Source({regl: this.regl, pb: this.pb, width: this.width, height: this.height, label: `s${i}`})\n    this.synth['s' + this.s.length] = s\n    this.s.push(s)\n    return s\n  }\n\n  _generateGlslTransforms () {\n    var self = this\n    this.generator = new Generator({\n      defaultOutput: this.o[0],\n      defaultUniforms: this.o[0].uniforms,\n      extendTransforms: this.extendTransforms,\n      changeListener: ({type, method, synth}) => {\n          if (type === 'add') {\n            self.synth[method] = synth.generators[method]\n            if(self.sandbox) self.sandbox.add(method)\n          } else if (type === 'remove') {\n            // what to do here? dangerously deleting window methods\n            //delete window[method]\n          }\n      //  }\n      }\n    })\n    this.synth.setFunction = this.generator.setFunction.bind(this.generator)\n  }\n\n  _render (output) {\n    if (output) {\n      this.output = output\n      this.isRenderingAll = false\n    } else {\n      this.isRenderingAll = true\n    }\n  }\n\n  // dt in ms\n  tick (dt, uniforms) {\n    this.sandbox.tick()\n    if(this.detectAudio === true) this.synth.a.tick()\n  //  let updateInterval = 1000/this.synth.fps // ms\n    if(this.synth.update) {\n      try { this.synth.update(dt) } catch (e) { console.log(error) }\n    }\n\n    this.sandbox.set('time', this.synth.time += dt * 0.001 * this.synth.speed)\n    this.timeSinceLastUpdate += dt\n    if(!this.synth.fps || this.timeSinceLastUpdate >= 1000/this.synth.fps) {\n    //  console.log(1000/this.timeSinceLastUpdate)\n      this.synth.stats.fps = Math.ceil(1000/this.timeSinceLastUpdate)\n    //  console.log(this.synth.speed, this.synth.time)\n      for (let i = 0; i < this.s.length; i++) {\n        this.s[i].tick(this.synth.time)\n      }\n    //  console.log(this.canvas.width, this.canvas.height)\n      for (let i = 0; i < this.o.length; i++) {\n        this.o[i].tick({\n          time: this.synth.time,\n          mouse: this.synth.mouse,\n          bpm: this.synth.bpm,\n          resolution: [this.canvas.width, this.canvas.height]\n        })\n      }\n      if (this.isRenderingAll) {\n        this.renderAll({\n          tex0: this.o[0].getCurrent(),\n          tex1: this.o[1].getCurrent(),\n          tex2: this.o[2].getCurrent(),\n          tex3: this.o[3].getCurrent(),\n          resolution: [this.canvas.width, this.canvas.height]\n        })\n      } else {\n\n        this.renderFbo({\n          tex0: this.output.getCurrent(),\n          resolution: [this.canvas.width, this.canvas.height]\n        })\n      }\n      this.timeSinceLastUpdate = 0\n    }\n    if(this.saveFrame === true) {\n      this.canvasToImage()\n      this.saveFrame = false\n    }\n  //  this.regl.poll()\n  }\n\n\n}\n\nmodule.exports = HydraRenderer\n","const Synth = require('./hydra-synth.js')\n//const ShaderGenerator = require('./shader-generator.js')\n\nmodule.exports = Synth\n","import Hydra from 'hydra-synth';\n\nconst hydra = new Hydra({\n    detectAudio: false,\n    canvas: document.getElementById('hydra-canvas')\n})\n\nlet funcList = [\n\n    // (rotation, openingX, openingY, height1, heigth2) => {\n    //     osc(3*rotation/10,0.6*rotation,0.9)\n    //         .rotate(rotation/10)\n    //         .blend(\n    //             voronoi(25,2,10).color(0,0.1,0.1).brightness(0.01)\n    //         )\n    //         .pixelate(20+200*openingX,20+200*openingY)\n    //         .out()\n    // },\n\n    // () => {\n    //     osc(3,0.6,0.9).rotate(23).blend(osc(23,0.27,0.46)).pixelate(100,100).out()\n    // },\n\n    // () => {\n    //     voronoi([10,100].fast(20), 10,2).color([1,1.3,1.5].fast(1000),[1, 1.2].fast(1000), 1, 12).modulateScale(osc(3,-0.5,0).kaleid(50).scale(0.5),15,0).modulate(o0, () => mouse.x * 0.01).out()\n    // },\n\n    // () => {\n    //     voronoi(300,4,3).color(3,4,233).hue(400).modulate(noise(0.001,1.5,3)).out()\n    // },\n\n    // () => {\n    //     osc(600,9,0.07999).diff(o0).rotate(0.1).out(o0)\n    // },\n\n    // () => {\n    //     voronoi(350,0.15)\n    //         .modulateScale(osc(0.1).rotate(Math.sin(time)),.5)\n    //         .thresh(.1)\n    //         .modulateRotate(osc(7),.4)\n    //         .thresh(.7)\n    //         .diff(src(o0).scale(1.8))\n    //         .modulateScale(osc(2).modulateRotate(o0,.74))\n    //         .diff(src(o0).rotate([-.012,.01,-.002,0]).scrollY(0,[-1/199800,0].fast(0.7)))\n    //         .brightness([-.02,-.17].smooth().fast(.5))\n    //         .out()\n    // },\n\n    // () => {\n    //     solid(.7,.45, .125)\n    //     .mult(osc(5,.3,.4).rotate(()=>time/2%640).modulate(noise(10,.26,8),.6,),.6)\n    //     .modulateRotate(osc(2),.73).rotate(Math.PI/2).modulate(o0,.9)\n    //     .luma(.23,.14).saturate(1)\n    //     .diff(src(o0).scroll(.1,.3).thresh(.61))\n    //     .mult(shape(2,.6,1.6).repeat(10).scrollY(.01,.051)).modulateRotate(osc(()=>(time)*.0005))\n    // .out()\n    // },\n\n    // () => {\n    //     noise(10,2)\n    //     .modulate(o0, 1).color(-1,.2,.5)\n    //     .mask(shape(3, .5, 0).scale(2).rotate(0,time * .0001))\n    //     .out(o0)\n    //     src(o0)\n    //     .add(src(o0).scale(.5).rotate([1,0].smooth()))\n    //     .mult(noise(3,.5).pixelate(20,20))\n    //     .add(osc(.5,1,.1).blend(osc(100000,1,-1).rotate(0,.1),.5)).modulate(o1)\n    //     .out(o1)\n    //     render(o1)\n    // },\n\n    (rotation, openingX, openingY, height1, heigth2) => {\n        render(o2)\n        s0.initCam()\n        src(o0)\n        .blend(s0, 0.4)\n        .modulate(o0, 0.1)\n        // .saturate(1.01)\n        // .contrast(1.01)\n        // .colorama()\n        // .scale(1.01)\n        .out(o0)\n        voronoi(50+300*openingY,0.05,0.1)\n        .rotate(rotation,0)\n        .modulate(o0, 5*height1)\n        .out(o1)\n        src(o0).diff(o1,1).out(o2)\n    },\n\n    (rotation, openingX, openingY, height1, heigth2) => {\n        s0.initCam()\n        src(s0)\n            .blend(o0)\n            // .saturate(1.4)\n        .colorama(-0.1+0.2*rotation)\n        .kaleid(8)\n        .out(o0)\n        shape(176, () => openingY)\n        .modulate(noise(1,height1))\n        .out(o1)\n        src(o0)\n        .modulateScale(o1)\n        .out(o3)\n        render(o3)\n    },\n\n    (rotation, openingX, openingY, height1, heigth2) => {\n        s0.initCam();\n        src(s0).repeat(openingX+1,openingY+1,height1, heigth2).modulate(o0,3+2*rotation).saturate(3.872).out();\n        render(o0);\n    }\n\n]\n\nlet randomIndex = Math.floor(Math.random() * funcList.length)\nlet func = funcList[randomIndex]\nconsole.log(randomIndex)\n\nvar hydraLoopId = setInterval(function(){\n    if (facemesh.predictions[0] !== undefined) {\n        let faceWidth = facemesh.predictions[0].boundingBox.bottomRight[0][0] - facemesh.predictions[0].boundingBox.topLeft[0][0]\n        let faceHeight = facemesh.predictions[0].boundingBox.bottomRight[0][1] - facemesh.predictions[0].boundingBox.topLeft[0][1]\n\n        let predictions = facemesh.predictions[0].annotations\n\n        let faceRotation = (predictions.midwayBetweenEyes[0][0] - predictions.noseTip[0][0])/15\n        let mouthOpeningY = (predictions.lipsLowerInner[5][1] - predictions.lipsUpperInner[5][1])/faceHeight\n        let mouthOpeningX = (predictions.lipsLowerInner[9][0] - predictions.lipsLowerInner[0][0])/faceWidth\n        let eyeToEyebrowLeft = (predictions.leftEyeLower3[4][1] - predictions.leftEyebrowUpper[4][1])/faceHeight\n        let eyeToEyebrowRight = (predictions.rightEyeLower3[4][1] - predictions.rightEyebrowUpper[4][1])/faceHeight\n\n        func(faceRotation,mouthOpeningX,mouthOpeningY,eyeToEyebrowLeft,eyeToEyebrowRight)\n\n        // console.log(faceRotation, mouthOpeningX, mouthOpeningY, eyeToEyebrowLeft, eyeToEyebrowRight)\n    }\n}, 50);"]}